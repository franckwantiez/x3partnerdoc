<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="fr-fr" xml:lang="fr-fr" class="_Skins_Sage_Skin_SideNav" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="author" content="ADONIX" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="keywords" content="" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="description" content="Web services REST" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="module" content="Superviseur" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="robots" content="all" xmlns="http://www.w3.org/1999/xhtml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" /><title>Web services REST</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/Sage.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/Stylesheets/font-awesome.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: #000000 url('../../Skins/Default/Stylesheets/Images/60x60_globe_white-on-transparent_icon.png') no-repeat center center;
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Retour" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Passer au contenu principal</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Compte</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Paramètres</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Déconnexion</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Afficher le volet de navigation" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../Home.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Compte</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Paramètres</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Déconnexion</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Champ de recherche" placeholder="Rechercher" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filtrer&#160;:</span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Filtre de recherche" title="Tous les fichiers" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">Tous les fichiers</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Rechercher" role="button" tabindex="0"><span class="invisible-label">Démarrer la recherche</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <script type="text/javascript">/*<![CDATA[*/$(document).ready(function(){
			$("#selectlang").appendTo("div.central-account-wrapper");
		});/*]]>*/</script>
                                    <div id="selectlang" class="headerlang">
                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_Language_toggle mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                            <div class="button-group-container-left">
                                                <button class="button needs-pie select-language-button" title="Changer de langue">
                                                    <div>
                                                        <div role="img" class="button-icon-wrapper" aria-label="Changer de langue">
                                                            <div class="button-icon"> </div>
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="sage-header-title">
                                        <img id="sage-header-logo" src="../Resources/Images/Sage_logo_green.svg" alt="Sage" /><span id="sage-header-product-name"><span id="sage-header-product"><span class="mc-variable Sage-Product.ProductName variable">X3 Warehousing</span></span></span>
                                    </div>
                                    <section class="sage-topic-body sage-layout-two-columns">
                                        <div class="sage-layout-topic-main">
                                            <div role="main" id="mc-main-content">
                                                <div id="container" xmlns="http://www.w3.org/1999/xhtml">
                                                    <div id="pageHeader">
                                                        <h1 class="g1" id="WebservicesREST" data-magellan-target="WebservicesREST"><span>Web services REST</span>
                                                        </h1>
                                                    </div>
                                                    <div id="supportingText">
                                                        <div class="stdBloc"><a id="MIS_20_10"></a>
                                                            <h2 class="g1" id="Introduction" data-magellan-target="Introduction">Introduction</h2>
                                                            <p>Le serveur XTEND met à disposition des développeurs d'applications AJAX deux types de web services REST qui peuvent être invoqués directement à partir du navigateur web par une requête HTTP.</p>
                                                            <ul>
                                                                <li>Appel d'un web service SOAP X3 via une <a href="GESAYI.htm">interface</a> XTEND</li>
                                                                <li>Appel d'un <a href="GESAY_ADV_SCRIPTING.htm">script serveur</a> </li>
                                                            </ul>
                                                            <p>Ces services ne sont accessibles qu'aux applications XTEND.</p>
                                                            <p>Le moteur ne prend en compte que les requêtes REST qui ont une session XTEND associée via le cookie (ou le paramètre de l'URL) JSESSIONID.</p>
                                                            <p>Les services REST XTEND ne sont disponibles que sur le serveur XTEND.</p>
                                                            <p>Ils 'encapsulent' l'appel des web services SOAP X3.</p>
                                                            <p>Les structures des données REST échangées pour le passage des paramètres (clés et données) et le retour du résultat (données et messages) sont identiques à celles des services SOAP.</p>
                                                            <p>Seul le protocole d'échange avec le client est différent. </p>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_30_10"></a>
                                                            <h2 class="g1" id="RappelsurleswebservicesSOAPX3" data-magellan-target="RappelsurleswebservicesSOAPX3">Rappel sur les web services SOAP X3</h2>
                                                            <p>Ce paragraphe présente de manière générale les <a href="GESAY_GEN_WSVC.htm">Web services SOAP X3</a> disponibles ainsi que les structures de données associées.</p>
                                                            <p>La connaissance des web service SOAP X3 est indispensable pour utiliser les services REST d'XTEND.</p>
                                                            <h4>Paramètres d'appel</h4>
                                                            <h5>Paramètres obligatoires</h5>
                                                            <ul>
                                                                <li>Le contexte d'appel <b><span style="font-family: 'Courier new';">CAdxCallContext callContext</span></b> <br />Contient les information de login X3 et sur le pool de connexion qui va traiter la requête</li>
                                                                <li>Le nom de publication du web service <b><span style="font-family: 'Courier new';">String publicName</span></b> défini lors de la publication </li>
                                                            </ul>
                                                            <p><span style="font-family: 'Courier new';">public CAdxCallContext {<br />&#160;&#160;&#160; //Code langue X3<br />&#160;&#160;&#160; String codeLang;<br />&#160;&#160;&#160; //Code utilisateur X3<br />&#160;&#160;&#160; String codeUser;<br />&#160;&#160;&#160; //Mot de passe X3<br />&#160;&#160;&#160; String password;<br />&#160;&#160;&#160; //Alias du pool de connexion sur le serveur de web services<br />&#160;&#160;&#160; String poolAlias;<br />&#160;&#160;&#160; //Paramètres de configuration (query string)<br />&#160;&#160;&#160; String requestConfig;<br />}</span>
                                                            </p>
                                                            <p>Les paramètre <b>adxwss.optreturn=JSON/XML</b> de la query <span style="font-family: 'Courier new';"><b>string requestConfig</b></span> indique le type de résultat (XML par défaut).</p>
                                                            <p>Le serveur de web service détecte automatiquement le format XML ou JSON en entrée.</p>
                                                            <h5>Options JSON</h5>
                                                            <p>Le format JSON propose des options pour filtrer les données renvoyées par le web service.</p>
                                                            <p>Les options sont passées :</p>
                                                            <ul>
                                                                <li>soit dans la query <b>string requestConfig</b> via le paramètre <b>adxwss.optjson</b><br /><i>requestConfig=adxwss.optreturn=JSON&amp;adxwss.optjson={"OPTIONS":"noGoups"}</i></li>
                                                                <li>soit dans les paramètres JSON de l'objet ou du sous programme via le champ <b>"_JSONOPT"</b><br /><i>Voir exemple des paramètres d'appel JSON</i> </li>
                                                            </ul>
                                                            <p>L'option JSON est un objet JSON qui comporte au moins un des champs ci-dessous.<br /><span style="font-family: 'Courier new';">{ <br />&#160;&#160;&#160; OPTIONS:["nolabels","noclobs","nogroups","norows"],<br />&#160;&#160;&#160; LANG:"FRA",<br />&#160;&#160;&#160; EXCLUDEGRP:["GRP1","GRP2"],<br />&#160;&#160;&#160; INCLUDEGRP:["GRP1","GRP2"],<br />&#160;&#160;&#160; EXCLUDEFLD:["FLD1","FLD2"],<br />&#160;&#160;&#160; INCLUDEFLD:["FLD1","FLD2"]<br />}</span></p>
                                                            <h5>OPTIONS</h5>
                                                            <p><b>noGroups</b>
                                                                <br />&#160;&#160;&#160; Pas de groupes de publication en retour<br />&#160;&#160;&#160; Chaque paramètre du sous-programme ou champ de l'objet est un tableau de String</p>
                                                            <p><b>noRows</b>
                                                                <br />&#160;&#160;&#160; Pas de lignes dans les tableaux avec dim&gt;1<br />&#160;&#160;&#160; Chaque paramètre du sous-programme ou champ de l'objet est un tableau de String</p>
                                                            <p><b>noLabels</b>
                                                                <br />&#160;&#160;&#160; Pas de labels pour les menus locaux</p>
                                                            <p><b>noClobs</b>
                                                                <br />&#160;&#160;&#160; Les champs clob ne sont pas renvoyés</p>
                                                            <p><i>Le champs OPTION accepte soit un tableau de paramètre soit un seul paramètre (String)</i>
                                                            </p>
                                                            <p><b>EXCLUDEGRP</b>
                                                                <br />&#160;&#160;&#160; Exclut les groupes mentionnés</p>
                                                            <p><b>INCLUDEGRP</b>
                                                                <br />&#160;&#160;&#160; Inclut les groupes contenus mentionnés</p>
                                                            <p><b>EXCLUDEFLD</b>
                                                                <br />&#160;&#160;&#160; Exclut les champs mentionnés</p>
                                                            <p><b>INCLUDEFLD</b>
                                                                <br />&#160;&#160;&#160; Inclut les champs mentionnés</p>
                                                            <p><i>Les champs INCLUDE* et EXCLUDE* acceptent soit un tableau de Strings soit un String</i>
                                                            </p>
                                                            <h5>Paramètres clé d'objet X3</h5>
                                                            <p>Le paramètre <b><span style="font-family: 'Courier new';">CAdxParamKeyValue objectKeys</span></b> pour les méthodes des objets X3 qui nécessitent des clés (Read/Query...).</p>
                                                            <p>Il s'agit d'un tableau codeChamp/valeur.</p>
                                                            <p><span style="font-family: 'Courier new';">public class CAdxParamKeyValue{<br />&#160;&#160;&#160; private String key;<br />&#160;&#160;&#160; private String value;<br />}</span>
                                                            </p>
                                                            <h5>Paramètres données</h5>
                                                            <p>Le paramètre <b>String objectXml</b> pour un objet X3 ou <b>String inputXml</b> contient les données de l'objet ou les paramètre du sous-programme au format XML ou JSON.</p>
                                                            <p>Le format JSON a été ajouté pour les besoins des application AJAX.</p>
                                                            <p>Exemple de format d'appel du web service de login AXTDLOGIN du site ASAMPLE.</p>
                                                            <p><b>Param JSON</b>
                                                            </p>
                                                            <p>Option JSON dans les paramètres d'appel : nogroups, norows<br /><span style="font-family: 'Courier new';">{<br />&#160;&#160;&#160; _JSONOPT:{OPTIONS:["nogroups", "norows"]},<br />&#160;&#160;&#160; AXPARCOD:["SITCOD", "USRLANG"],<br />&#160;&#160;&#160; AXPARVAL:["FDBTEST", "FRA"],<br />&#160;&#160;&#160; AXUSERCODE:"DIS001",<br />&#160;&#160;&#160; AXPWD:"adonix"<br />}</span></p>
                                                            <p><b>Param XML</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">&lt;PARAM&gt;<br />&#160;&#160;&#160; &lt;TAB ID="AX_PAR"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARCOD"&gt;SITCOD&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARVAL"&gt;FDBTEST&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARCOD"&gt;USRLANG&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARVAL"&gt;FRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&#160;&#160;&#160; &lt;GRP ID="AXLOG_PAR"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXUSERCODE"&gt;DIS001&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPWD"&gt;adonix&lt;/FLD&gt;<br />&#160;&#160;&#160; &lt;/GRP&gt;<br />&lt;/PARAM&gt;</span>
                                                            </p>
                                                            <h5>Structure paramètre données sous-programme</h5>
                                                            <p>Les champs <span style="font-family: 'Courier new';">&lt;FLD NAME="FieldName"&gt;</span> représentent les paramètres du sous-programme et sont rattachés au groupe de publication</p>
                                                            <p>Les groupes de publications sont définis dans la fiche Web service associé à la fiche du sous-programme.</p>
                                                            <p>Ils sont représentés par les noeuds <span style="font-family: 'Courier new';">&lt;GRP ID="IdGroup"&gt;</span> pour les paramètres de dimension 1 et <span style="font-family: 'Courier new';">&lt;TAB ID="IdGroup"&gt;</span> pour les paramètres de dimension &gt; 1.</p>
                                                            <p>Le noeuds &lt;LIN&gt; regroupe les champs d'un même groupe tableau ayant le même indexe.</p>
                                                            <p>Les paramètres JSON reprennent la même structure mais on n'est pas obligé d'utiliser les groupes de publication.</p>
                                                            <p><b>Sous Programme XML</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">&lt;PARAM&gt;<br />&#160;&#160;&#160; &lt;GRP ID=’GRP1’&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME=’CHAMP’&gt;Valeur&lt;/FLD&gt;<br />&#160;&#160;&#160; &lt;/GRP&gt;<br />&#160;&#160;&#160; &lt;TAB ID=’GRP2’&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME=’CHAMP1’&gt;Valeur1&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME=’CHAMP2’&gt;Valeur1&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME=’CHAMP1’&gt;Valeur1&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME=’CHAMP2’&gt;Valeur2&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&lt;/PARAM&gt;</span>
                                                            </p>
                                                            <p><b>Sous Programme JSON</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*--- Sans les groupes ---*/<br />{<br />&#160;&#160;&#160; CHAMP:"Valeur",<br />&#160;&#160;&#160; CHAMP1:["Valeur1","Valeur2"],<br />&#160;&#160;&#160; CHAMP2:["Valeur1","Valeur2"]<br />}<br />/*--- Avec les groupes ---*/<br />{<br />&#160;&#160;&#160; GRP1:{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; CHAMP:"Valeur"<br />&#160;&#160;&#160; },&#160;&#160;&#160; <br />&#160;&#160;&#160; GRP2:[<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CHAMP1:"Valeur1",<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CHAMP2:"Valeur1"&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; },<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CHAMP1:"Valeur2",<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CHAMP2:"Valeur2"&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }<br />&#160;&#160;&#160; ]<br />}</span>
                                                            </p>
                                                            <h5>Structure paramètre données Objet X3</h5>
                                                            <p>Même structure que les sous-programme mais les noms des groupes sont codés en fonction de la place du bloc dans l'écran.</p>
                                                            <p>En mode JSON il n'est pas obligatoire de spécifier les noms des groupes.</p>
                                                            <p>Il est laissé au développeur l'initiative de spécifier le nom du groupe dans le cas où il souhaite utiliser un champ de l'objet X3 dont le nom seul&#160;ne permet pas de l'identifier.</p>
                                                            <p>On peut avoir plusieurs champs de même nom dans un objet X3.</p>
                                                            <p><b>Exemple pour la commande SOH</b>
                                                                <br />&#160;&#160;&#160; SOH4_1 (lignes de la commande) correspond au 1er bloc du 4eme écran</p>
                                                            <p><b>Objet XML</b> </p>
                                                            <p><span style="font-family: 'Courier new';">&lt;PARAM&gt;<br />&#160;&#160;&#160; &lt;GRP ID="SOH0_1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="BPCORD"&gt;DIS001&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SOHTYP"&gt;WEB&lt;/FLD&gt;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SALFCY"&gt;ASN&lt;/FLD&gt;<br />&#160;&#160;&#160; &lt;/GRP&gt;<br />&#160;&#160;&#160; &lt;GRP ID="SOH2_1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="STOFCY"&gt;ASN&lt;/FLD&gt;<br />&#160;&#160;&#160; &lt;/GRP&gt;<br />&#160;&#160;&#160; &lt;TAB ID="SOH4_1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="ITMREF"&gt;CUB100&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="QTY"&gt;50&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="ITMREF"&gt;CD100&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="QTY"&gt;10&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&lt;/PARAM&gt;</span>
                                                            </p>
                                                            <p><b>Objet JSON</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">{<br />&#160;&#160;&#160; BPCORD:"DIS001",<br />&#160;&#160;&#160; SOHTYP:"WEB",<br />&#160;&#160;&#160; SALFCY:"ASN",<br />&#160;&#160;&#160; STOFCY:"ASN",<br />&#160;&#160;&#160; ITMREF:["CUB100","CD100"],<br />&#160;&#160;&#160; ITMREF:["50","10"]<br />}</span>
                                                            </p>
                                                            <h4>Services</h4>
                                                            <p><span style="font-family: 'Courier new';">/*--------------- Appel d'un SOUS-PROGRAMME ---------------*/<br />public CAdxResultXml run(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; String inputXml) throws Exception;<br />&#160;&#160;&#160; <br />/*--------------- Appel d'un sous OBJET X3---------------*/<br />public CAdxResultXml save(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; String objectXml) throws Exception;<br />//------------------------------------------<br />public CAdxResultXml delete(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; CAdxParamKeyValue[] objectKeys) throws Exception;<br />//------------------------------------------<br />public CAdxResultXml read(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; CAdxParamKeyValue[] objectKeys) throws Exception;&#160;&#160; <br />//------------------------------------------<br />public CAdxResultXml query(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; CAdxParamKeyValue[] objectKeys,<br />&#160;&#160;&#160; int listSize) throws Exception;&#160; <br />//------------------------------------------<br />public CAdxResultXml modify(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; CAdxParamKeyValue[] objectKeys,<br />&#160;&#160;&#160; String objectXml) throws Exception; <br />//------------------------------------------<br />public CAdxResultXml actionObject(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; String actionCode,<br />&#160;&#160;&#160; CAdxParamKeyValue[] objectKeys) throws Exception; <br />//------------------------------------------<br />public CAdxResultXml actionObject(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; String actionCode<br />&#160;&#160;&#160; String objectXml) throws Exception; <br />}</span>
                                                            </p>
                                                            <h4>Résultat</h4>
                                                            <p>L'appel d'un web service renvoie toujours un objet résultat CAdxResultXml qui contient :</p>
                                                            <ul>
                                                                <li>les données de l'objet ou paramètres du sous-programme au format XML ou JSON<br /><i><b>String resultXml</b></i></li>
                                                                <li>les messages application de type erreur, warning ou information<br /><b><i>CAdxMessage messages</i></b></li>
                                                                <li>des information techniques sur l'exécution du sous programme<br /><b><i>CAdxTechnicalInfos technicalInfos</i></b> </li>
                                                            </ul>
                                                            <p>Le erreurs applicatives X3 ne sont pas renvoyées comme des exceptions.</p>
                                                            <p>Le format JSON ignore les paramètre de type BLOB qui contiennent du binaire.</p>
                                                            <p><span style="font-family: 'Courier new';">public class CAdxResultXml{<br />&#160;&#160;&#160; public CAdxMessage[] messages;<br />&#160;&#160;&#160; public String resultXml;<br />&#160;&#160;&#160; public int status;<br />&#160;&#160;&#160; public CAdxTechnicalInfos technicalInfos;<br /></span><span style="font-family: 'Courier new';">}<br />public class CAdxMessage {<br />&#160;&#160;&#160; public String message;<br />&#160;&#160;&#160; //"1":Information - "2":Warning - "3":Erreur<br />&#160;&#160;&#160; public String type;<br />}</span>
                                                            </p>
                                                            <p>Exemple de résultat suite à l'appel du web service de login AXTDLOGIN du site ASAMPLE.</p>
                                                            <p><b>Résultat JSON</b> </p>
                                                            <p>Options JSON : norows et nogroups</p>
                                                            <p>{<br />AXPARCOD:["SITCOD","USRLANG"],<br />AXPARVAL:["FDBTEST","FRA"]<br />AXUSERCODE:"DIS001",<br />AXPWD:"adonix",<br />AXUSERPROF:"B2B",<br />AX3SOL:["SOLPAIE","X3V5","XTENDV2"],<br />AX3FLDR:["PAIE","X3TESTV5","DEMOFRA"],<br />AX3LANG:["FRA","FRA","FRA"],<br />AX3USER:["XTEND","JPJ1","OG"],<br />AXLOGCOD:["NAME","FIRSTNAME","EMAIL","PHONE"],<br />AXLOGVAL:["DALBO","Frédéric","<span style="font-family: 'Courier new';">../FCT/mailto:fdb@sg.com","0001020304</span>"]<br />SHIPADR1:["Sage Lyon new","Sage MGE","Sage PARIS"],<br />SHIPCITY:["LYON","Echirolles","PARIS"],<br />SHIPZIP:["69443","38130","75834"]<br />}</p>
                                                            <p><b>Résultat XML</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">&lt;RESULT&gt;<br />&#160;&#160;&#160; &lt;TAB DIM="20" ID="AX_PAR" SIZE="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARCOD" TYPE="Char"&gt;SITCOD&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARVAL" TYPE="Char"&gt;FDBTEST&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARCOD" TYPE="Char"&gt;USRLANG&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARVAL" TYPE="Char"&gt;FRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&#160;&#160;&#160; &lt;GRP ID="AXLOG_PAR"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXUSERCODE" TYPE="Char"&gt;DIS001&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPWD" TYPE="Char"&gt;adonix&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXUSERPROF" TYPE="Char"&gt;B2B&lt;/FLD&gt;<br />&#160;&#160;&#160; &lt;/GRP&gt;<br />&#160;&#160;&#160; &lt;TAB DIM="10" ID="AXLOG_X3" SIZE="3"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3SOL" TYPE="Char"&gt;SOLPAIE&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3FLDR" TYPE="Char"&gt;PAIE&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3LANG" TYPE="Char"&gt;FRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3USER" TYPE="Char"&gt;XTEND&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3SOL" TYPE="Char"&gt;X3V5&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3FLDR" TYPE="Char"&gt;X3TESTV5&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3LANG" TYPE="Char"&gt;FRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3USER" TYPE="Char"&gt;JPJ1&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="3"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3SOL" TYPE="Char"&gt;XTENDV2&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3FLDR" TYPE="Char"&gt;DEMOFRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3LANG" TYPE="Char"&gt;FRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3USER" TYPE="Char"&gt;OG&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&#160;&#160;&#160; &lt;TAB DIM="50" ID="AXLOG_RES" SIZE="4"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGCOD" TYPE="Char"&gt;NAME&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGVAL" TYPE="Char"&gt;DALBO&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGCOD" TYPE="Char"&gt;FIRSTNAME&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGVAL" TYPE="Char"&gt;Frédéric&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="3"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGCOD" TYPE="Char"&gt;EMAIL&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGVAL" TYPE="Char"&gt;fdb@sg.com&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="4"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGCOD" TYPE="Char"&gt;PHONE&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGVAL" TYPE="Char"&gt;0001020304&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&#160;&#160;&#160; &lt;TAB DIM="20" ID="LOGINSHIP" SIZE="3"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPADR1" TYPE="Char"&gt;Sage Lyon new&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPCITY" TYPE="Char"&gt;LYON&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPZIP" TYPE="Char"&gt;69443&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPADR1" TYPE="Char"&gt;Sage MGE&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPCITY" TYPE="Char"&gt;Echirolles&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPZIP" TYPE="Char"&gt;38130&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="3"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPADR1" TYPE="Char"&gt;Sage PARIS&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPCITY" TYPE="Char"&gt;PARIS&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPZIP" TYPE="Char"&gt;75834&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&lt;/RESULT&gt;</span>
                                                            </p>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_40_10"></a>
                                                            <h2 class="g1" id="WebservicesRESTXTEND" data-magellan-target="WebservicesRESTXTEND">Web services REST XTEND</h2>
                                                            <p />
                                                            <h4>Principe de fonctionnement</h4>
                                                            <p>Voici les différentes étapes de traitement d'une requête REST:</p>
                                                            <p>1. Réception de la requête HTTP par le servlet ajax du serveur XTEND</p>
                                                            <p>2. Recherche de la session XTEND associée</p>
                                                            <p><i>Via le cookie ou le paramètre de la requête JSESSIONID</i>
                                                                <br />-&gt; Erreur si aucune session n'a été trouvée</p>
                                                            <p>3. Analyse de l'URL pour en déduire les coordonnées du site XTEND et le type de service</p>
                                                            <p><i>Plusieurs sites peuvent être ouverts simultanément par une session XTEND</i>
                                                                <br />-&gt; Erreur si site non trouvé</p>
                                                            <p>4. Exécution du script serveur ou appel du web service SOAP X3 </p>
                                                            <h5>Traitement du script serveur</h5>
                                                            <p>1. Lecture du chemin d'accès dans l'URL</p>
                                                            <p>2. Lecture et compilation du script JavaScript</p>
                                                            <p>3. Exécution du script</p>
                                                            <ul>
                                                                <ul>
                                                                    <ul>
                                                                        <li>Le script a la capacité d'accéder aux données de la session et d'appeler des web services SOAP X3</li>
                                                                        <li>L'instruction print du script est utilisée pour renvoyer la réponse (XML, JSON, HTML...) </li>
                                                                    </ul>
                                                                </ul>
                                                            </ul>
                                                            <h5>Traitement de l'appel du web service SOAP X3</h5>
                                                            <p>1. Lecture du code de l'interface XTEND dans l'URL</p>
                                                            <p><i>L'interface fait référence à un web service SOAP</i>
                                                                <br />-&gt; Erreur si interface non déclarée dans le site</p>
                                                            <p>2. Constitution des paramètres d'appel</p>
                                                            <ul>
                                                                <ul>
                                                                    <ul>
                                                                        <li>Les données XML ou JSON sont lues dans le corps de la requête</li>
                                                                        <li>Les clés sont lues dans la 'Query String'</li>
                                                                        <li>Le type de résultat demandé XML ou JSON est lu dans le header HTTP xtd-accept </li>
                                                                    </ul>
                                                                </ul>
                                                            </ul>
                                                            <p>3. Constitution du contexte d'appel du web service SOAP</p>
                                                            <ul>
                                                                <ul>
                                                                    <ul>
                                                                        <li>Le point d'entrée (URL) est donné par le site XTEND (Pool web service du site ou de l'interface)</li>
                                                                        <li>Le code utilisateur X3, Mot de passe en langue sont donné par la session XTEND </li>
                                                                    </ul>
                                                                </ul>
                                                            </ul>
                                                            <p>4. Appel du web service SOAP</p>
                                                            <p>5. Constitution du résultat</p>
                                                            <ul>
                                                                <ul>
                                                                    <ul>
                                                                        <li>Les messages ont transmis dans le header HTTP<br /><i>xtd-msg-error, xtd-msg-warning,xtd-msg-info</i></li>
                                                                        <li>Les données XML/JSON renvoyées par le web service SOAP sont transmises sans modification dans le corps de la requête </li>
                                                                    </ul>
                                                                </ul>
                                                            </ul>
                                                            <h4>Format de l'URL</h4>
                                                            <p><span style="font-family: 'Courier new';">http://host:port/xtend/ajax/x3sol/x3folder/xtdsite/type/id[/méthode][?Paramètres]</span>
                                                            </p>
                                                            <p>Méthode HTTP POST ou GET</p>
                                                            <p><b>x3sol</b>
                                                                <br />&#160;&#160;&#160; Code solution X3</p>
                                                            <p><b>x3folder</b>
                                                                <br />&#160;&#160;&#160; Code dossier X3</p>
                                                            <p><b>xtdsite</b>
                                                                <br />&#160;&#160;&#160; Code site XTEND</p>
                                                            <p><b>type</b>
                                                                <br />&#160;&#160;&#160; <b>INT</b> pour l'appel d'une <a href="GESAYI.htm">interface</a> XTEND<br />&#160;&#160;&#160; <b>SCRIPT</b> pour l'appel d'un <a href="GESAY_ADV_SCRIPTING.htm">script server</a> XTEND</p>
                                                            <p><b>id</b>
                                                                <br />&#160;&#160;&#160; Code de l'interface<br />&#160;&#160;&#160; ou<br />&#160;&#160;&#160; Chemin d'accès du script par rapport au répertoire des scripts serveur du site XTEND</p>
                                                            <p><b>méthode</b>
                                                                <br />&#160;&#160;&#160; Code de la méthode de l'objet X3<br />&#160;&#160;&#160;<b> QUERY, R</b> Read, <b>S</b> Save, <b>M</b> Modify,<b>D</b> Delete</p>
                                                            <p><b>Paramètres</b>
                                                                <br />&#160;&#160;&#160; Query string qui peut contenir:</p>
                                                            <ul>
                                                                <ul>
                                                                    <li>Les champs clés d'un objet X3</li>
                                                                    <li>Les paramètres d'une liste gauche</li>
                                                                    <li>Les options JSON via la clé _JSONOPT si elles ne sont pas passées dans les paramètres données </li>
                                                                </ul>
                                                            </ul>
                                                            <h5>Exemples</h5>
                                                            <p><u>Script</u>
                                                                <br /><span style="font-family: 'Courier new';">&#160;&#160;&#160; http://host/xtend/ajax/SOLPAIE/PAIE/FDBTEST/SCRIPT/ajaxTest1.js</span>
                                                            </p>
                                                            <p><u>Sous-programme<br /></u>&#160;&#160;&#160; <span style="font-family: 'Courier new';">http://host/xtend/ajax/SOLPAIE/PAIE/FDBTEST/INT/AXTDLOGIN</span></p>
                                                            <p><u>Objet X3 - Read</u>
                                                                <br />&#160;&#160;<span style="font-family: 'Courier new';">&#160; http://host/xtend/ajax/SOLPAIE/PAIE/FDBTEST/INT/OBJAYZ/R?FRMCOD=0901000002<br />&#160;&#160;&#160; &amp;_JSONOPT=%7B%22OPTIONS%22%5B%22nogroups%22%7D</span></p>
                                                            <p><u>Liste gauche objet X3<br /></u>&#160;&#160;<span style="font-family: 'Courier new';">&#160; http://host/xtend/ajax/SOLPAIE/PAIE/FDBTEST/INT/OBJAYZ/QUERY?_COUNT=10&amp;FRMCOD=09*<br />&#160;&#160;&#160; &amp;_JSONOPT=%7B%22OPTIONS%22%5B%22nogroups%22%7D</span></p>
                                                            <h4>Envoie des données</h4>
                                                            <p>Les paramètres de type données autre que ceux de la query string sont passés dans le <b>corps</b> de la requête HTTP.</p>
                                                            <p>Le format des paramètres d'appel d'une interface XTEND sont donnés par le ContentType de la requête HTTP:</p>
                                                            <ul>
                                                                <li><span style="font-family: 'Courier new';">application/json</span>
                                                                    <br /><i>La structure des données doit être conforme aux format attendu</i>
                                                                </li>
                                                                <li><span style="font-family: 'Courier new';">application/xml</span>
                                                                    <br /><i>Les données XML doivent être conforme aux format attendu</i>
                                                                </li>
                                                                <li><span style="font-family: 'Courier new';">application/x-www-form-urlencoded</span>
                                                                    <br /><i>Dans ce cas on considère que la liste des champs/valeurs constitue un objet JSON conforme au format attendu</i> </li>
                                                            </ul>
                                                            <p>Le <b>ContentType</b> par défaut est <span style="font-family: 'Courier new';">application/json.</span></p>
                                                            <p>Le format des données pour l'appel d'un script serveur est obligatoirement <span style="font-family: 'Courier new';">application/json</span>.</p>
                                                            <h4>Résultat</h4>
                                                            <p>Lors de l'appel d'une interface XTEND on peut demander un format de retour XML (application/xml) ou JSON (application/json) en valorisant le Header HTTP dédié xtd-Accept.</p>
                                                            <p>Le mime-type par défaut est <span style="font-family: 'Courier new';">application/xml</span>.</p>
                                                            <p>La requête renvoie les paramètres du sous-programme ou les données de l'objet X3 au format demandé.</p>
                                                            <p>Le format des données renvoyé par l'appel d'un script serveur est libre.</p>
                                                            <h4>Messages applicatifs</h4>
                                                            <p>Les messages applicatifs sont renvoyés dans trois headers HTTP spécifiques.</p>
                                                            <h5>xtd-msg-error</h5>
                                                            <p>Contient les messages d'erreur</p>
                                                            <h5>xtd-msg-warning</h5>
                                                            <p>Contient les messages warning</p>
                                                            <h5>xtd-msg-info</h5>
                                                            <p>Contient les messages d'information</p>
                                                            <p><b>Une erreur applicative X3 est traitée comme une exception</b>
                                                            </p>
                                                            <h4>Exceptions</h4>
                                                            <p>Les<b> erreurs applicatives X3</b> et erreurs de compilation/exécution des scripts serveur sont renvoyées sous le forme d'une <b>erreur</b><b>HTTP de code 600</b>.</p>
                                                            <p>Les <b>exception JAVA</b> sont renvoyées sous le forme d'une erreur <b>HTTP de code 500</b>.</p>
                                                            <p>Le <b>corps de la requête</b> contient une description (ContentType=text/plain) de l'erreur qui dépend du type d'exception.</p>
                                                            <p><b>Dans le cas d'une erreur X3 le header HTTP xtd-msg-error contient les messages d'erreur</b> </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-mc-conditions="Other.Production only">
                                                <div id="feedback-survey">
                                                    <div class="feedback-question">
                                                        <h4>Did you find this helpful?</h4>
                                                        <p>
                                                            <button class="feedback-button feedback-yes" title="Yes, this article was helpful." alt="Yes, this article was helpful.">Yes</button>&#160;<button class="feedback-button feedback-no" title="No, this article wasn't helpful." alt="No, this article wasn't helpful.">No</button></p>
                                                    </div>
                                                    <div class="feedback-reason no">
                                                        <hr />
                                                        <div class="highlightBox">
                                                            <h4>Sorry about that</h4>
                                                            <p>Why wasn't this helpful? (check all that apply)</p>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option1" value="Couldn't find what I was looking for" data-analytics-label="Could not find" />
                                                                <label for="option1">Couldn't find what I was looking for</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option2" value="Instructions confusing or unclear" data-analytics-label="Confusing or unclear" />
                                                                <label for="option2">Instructions confusing or unclear</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option3" value="Instructions didn't work" data-analytics-label="Did not work" />
                                                                <label for="option3">Instructions didn't work</label>
                                                            </div>
                                                            <div class="feedback-reason no-thanks">
                                                                <p><b>Thanks for your feedback.</b>
                                                                </p>
                                                                <h4>Want to tell us more?</h4>
                                                                <p>Send an email to our authors to leave your feedback.</p>
                                                                <!--email_off-->
                                                                <p><a href="mailto:Sage200TechnicalAuthors@sage.com?subject=Sage 200 feedback" id="feedbackEmailLink" title="Tell us if there's a problem with the information on this page." alt="Tell us if there's a problem with the information on this page." class="sageButton">Email our authors</a>
                                                                </p>
                                                                <!--/email_off-->
                                                                <p>Sorry, but we can't provide technical support from this email address. If you need assistance, then please contact our support team directly.</p>
                                                            </div>
                                                        </div>
                                                        <div id="get-in-touch" class="highlightBox colour-dark-1">
                                                            <h4>Need support?</h4>
                                                            <p>You can contact our support team on <b>0845 111 5555</b>, 9am-5pm Monday-Friday.</p>
                                                        </div>
                                                    </div>
                                                    <div class="feedback-reason yes-thanks">
                                                        <hr />
                                                        <h4>Great!</h4>
                                                        <p>Thanks for taking the time to give us some feedback.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="sage-layout-topic-panel">
                                            <div class="menu-topic-container" id="menu-on-page">
                                                <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 1280px)" class="nocontent menu _Skins_Sage_Menu_Topic_TopNav mc-component">
                                                    <li><a href="#WebservicesREST">Web services REST</a>
                                                    </li>
                                                    <ul>
                                                        <li><a href="#Introduction">Introduction</a>
                                                        </li>
                                                        <li><a href="#RappelsurleswebservicesSOAPX3">Rappel sur les web services SOAP X3</a>
                                                        </li>
                                                        <li><a href="#WebservicesRESTXTEND">Web services REST XTEND</a>
                                                        </li>
                                                    </ul>
                                                </ul>
                                            </div>
                                        </div>
                                    </section>
                                    <button class="go-to-top">
                                        <!-- icon and label are inserted -->
                                    </button>
                                    <section class="sage-footer colour-dark-1" id="footer" role="contentinfo">
                                        <div class="row">
                                            <div class="small-6 medium-3 columns">
                                                <h5>Site links</h5>
                                                <p><a href="../Sitemap.htm" class="MCXref xref">Sitemap</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage links</h5>
                                                <p><a href="https://my.sage.co.uk/public/help.aspx" target="_blank" class="external">Sage Support Hub</a>
                                                </p>
                                                <p><a href="https://communities.sage.co.uk/product_support_community/" class="external" target="_blank" title="Your place to get product support from other customers and Sage experts" alt="Your place to get product support from other customers and Sage experts">Product support community</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/gdpr/" class="external" target="_blank">General Data Protection Regulation</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/legal/" class="external" target="_blank">Legal information</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Page info</h5>
                                                <p>Page updated: <span class="mc-variable Dates.DateFileSaved variable">23 janvier 2024</span></p>
                                                <!-- script moves last published date to here -->
                                                <div id="last-published-footer">
                                                </div>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage media</h5>
                                                <p><a href="https://www.facebook.com/sageuk" target="_blank" alt="Find us on Facebook" title="Find us on Facebook"><i class="fa fa-lg fa-facebook" aria-hidden="true"></i></a>&#160;
						<a href="https://www.linkedin.com/company/sage-software" target="_blank" alt="Find us on LinkedIn" title="Find us on LinkedIn"><i class="fa fa-lg fa-linkedin" aria-hidden="true"></i></a>&#160;
						<a href="https://twitter.com/sageuk/" target="_blank" alt="Find us on Twitter" title="Find us on Twitter"><i class="fa fa-lg fa-twitter" aria-hidden="true"></i></a>&#160;
						<a href="https://www.youtube.com/user/SageUKOfficial" target="_blank" alt="Find us on YouTube" title="Find us on YouTube"><i class="fa fa-lg fa-youtube" aria-hidden="true"></i></a></p>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- Skin type scripts -->
                                    <script type="text/javascript" src="../Resources/Scripts/SideNav-template.js" data-mc-conditions="Other.HTML5-SideNav">
                                    </script>
                                    <!-- Google Analytics -->
                                    <div data-mc-conditions="Other.Production only">
                                        <!-- Google analytics script -->
                                        <!-- Copy and paste full HTML of tracking code here for Global site tag (gtag.js) -->
                                        <!-- Remember to edit 'async' parameter to read async="" -->
                                        <!-- Analytics for events -->
                                        <script type="text/javascript" src="../Resources/Scripts/google-analytics-events.js">
                                        </script>
                                    </div>
                                    <!-- cookies -->
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.js">
                                    </script>
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.config.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>