<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="fr-fr" xml:lang="fr-fr" class="_Skins_Sage_Skin_SideNav" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="author" content="ADONIX" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="keywords" content="procédure, migration, version" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="description" content="Procédures de migration" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="module" content="Géode GX" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="robots" content="all" xmlns="http://www.w3.org/1999/xhtml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" /><title>Procédures de migration</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/Sage.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/Stylesheets/font-awesome.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: #000000 url('../../Skins/Default/Stylesheets/Images/60x60_globe_white-on-transparent_icon.png') no-repeat center center;
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Retour" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Passer au contenu principal</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Compte</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Paramètres</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Déconnexion</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Afficher le volet de navigation" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../Home.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Compte</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Paramètres</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Déconnexion</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Champ de recherche" placeholder="Rechercher" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filtrer&#160;:</span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Filtre de recherche" title="Tous les fichiers" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">Tous les fichiers</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Rechercher" role="button" tabindex="0"><span class="invisible-label">Démarrer la recherche</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <script type="text/javascript">/*<![CDATA[*/$(document).ready(function(){
			$("#selectlang").appendTo("div.central-account-wrapper");
		});/*]]>*/</script>
                                    <div id="selectlang" class="headerlang">
                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_Language_toggle mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                            <div class="button-group-container-left">
                                                <button class="button needs-pie select-language-button" title="Changer de langue">
                                                    <div>
                                                        <div role="img" class="button-icon-wrapper" aria-label="Changer de langue">
                                                            <div class="button-icon"> </div>
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="sage-header-title">
                                        <img id="sage-header-logo" src="../Resources/Images/Sage_logo_green.svg" alt="Sage" /><span id="sage-header-product-name"><span id="sage-header-product"><span class="mc-variable Sage-Product.ProductName variable">X3 Warehousing</span></span></span>
                                    </div>
                                    <section class="sage-topic-body sage-layout-two-columns">
                                        <div class="sage-layout-topic-main">
                                            <div role="main" id="mc-main-content">
                                                <div id="container" xmlns="http://www.w3.org/1999/xhtml">
                                                    <div id="pageHeader">
                                                        <h1 class="g1" id="Procéduresdemigration" data-magellan-target="Procéduresdemigration"><span>Procédures de migration</span>
                                                        </h1>
                                                    </div>
                                                    <div id="intro">
                                                        <div id="presentation">
                                                            <body>
                                                                <p>Ce document décrit les procédures de migration mises en place dans Sage X3 Warehousing.</p>
                                                                <div>Plusieurs méthodes sont possibles.</div>
                                                                <ul>
                                                                    <li>Pour une solution 140 ou V5 : Migrez votre solution en V6 (patch 6 minimum), puis migrez ensuite votre solution de V6 en V12.</li>
                                                                    <li>Pour une solution V6 : Installez la V12, puis intégrez tous les patchs existants dans son dossier <b>GX</b>.<br />Dans ce cas, suivez les procédures de migration optimisées décrites ci-dessous.</li>
                                                                </ul>
                                                            </body>
                                                        </div>
                                                    </div>
                                                    <div id="supportingText">
                                                        <div class="stdBloc"><a id="MIS_30_10"></a>
                                                            <h2 class="g1" id="Principalesétapesdelamigration" data-magellan-target="Principalesétapesdelamigration">Principales étapes de la migration</h2>
                                                            <p>
                                                            </p>
                                                            <body>
                                                                <p>Les étapes à suivre pour migrer un dossier pour passer d'une version majeure à une autre sont les suivantes :</p>
                                                                <ol>
                                                                    <li value="1">Les contrôles pré-migration dans le dossier d'origine. Ces contrôles peuvent être réalisés sans que l'exploitation de&#160;Sage X3 Warehousing ne soit arrêtée.</li>
                                                                    <li value="2">L'installation de la version 12 dans un environnement dédié, ou la mise à jour d'un environnement existant.</li>
                                                                    <li value="3">L'extraction des données à migrer du dossier d'origine, suivie de la réintégration de ces données (l'exploitation doit alors être arrêtée et reprendra lorsque la migration sera terminée). L'extraction des données se fait au format "plat" pour les petits dossiers, et par l'utilisation d'outils d'extraction de base de données dès que la volumétrie est plus conséquente.</li>
                                                                    <li value="4">La revalidation du dossier dans l'environnement de la version 12. Vous pouvez segmenter cette revalidation en plusieurs étapes, par le biais du paramétrage de plans de migration. Si le dossier n'est pas très volumineux, la définition de plans de migration n'est pas forcément utile. Elle l'est dès que vous souhaitez paralléliser les traitements de basculement (pour bénéficier de la puissance d'un serveur multi-processeur) et contrôler leur enchaînement en ayant des points de reprise.</li>
                                                                    <li value="5">Les contrôles post-migration. Il s'agit essentiellement de la vérification et de l'adaptation de paramétrages.</li>
                                                                </ol>
                                                                <p>La suite de la documentation décrit l'ensemble des étapes.</p>
                                                            </body>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_40_10"></a>
                                                            <h2 class="g1" id="Etapesprémigration" data-magellan-target="Etapesprémigration">Etapes pré-migration</h2>
                                                            <p>
                                                            </p>
                                                            <body>
                                                                <p>Les étapes de pré-migration sont lancées sur l'environnement de départ, et peuvent être étalées dans le temps, avant la migration&#160;à proprement parler. Elles ne nécessitent en effet pas d'arrêt d'exploitation.</p>
                                                                <p>Vérifiez d'abord que le dossier d'origine est au niveau de patch minimum nécessaire pour pouvoir entreprendre une migration. Ce niveau, qui peut être affiché via le menu <b>? &gt; A propos</b>, doit être au moins en patch 6 pour une version 6. Il n'y a aucun prérequis pour une migration en V11 ou V12.</p>
                                                            </body>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_60_10"></a>
                                                            <h2 class="g1" id="Copiedesdonnéesetajustementdesparamètresdossier" data-magellan-target="Copiedesdonnéesetajustementdesparamètresdossier">Copie des données et ajustement des paramètres dossier</h2>
                                                            <p>
                                                            </p>
                                                            <body>
                                                                <p>Cette étape correspond au début du basculement. A ce stade, l'exploitation opérationnelle de la solution doit être arrêtée : elle reprendra lorsque la migration sera terminée.</p>
                                                                <p>On peut distinguer quatre phases dans cette étape :</p>
                                                                <ol>
                                                                    <li value="1">Extraction des données du dossier à migrer :</li>
                                                                    <ul>
                                                                        <li>par extraction des données au format "plat" pour les petits dossiers. Pour cela, utilisez la fonction d'<span style="color: #0000ff;"><a href="DOSEXTRA.htm">extraction</a></span> qui crée les fichiers dans le répertoire <b>SVG</b> par défaut.</li>
                                                                        <li>par extraction de base de données dès que la volumétrie est plus conséquente (le format dépendant alors de la base et de l'outil utilisé).</li>
                                                                    </ul>
                                                                    <li value="2">Copie des fichiers du dossier à migrer dans la solution V12.</li>
                                                                    <li value="3">Création d'un dossier copiant l'arborescence du dossier initial dans le nouvel environnement V12, et import des données exportées dans le nouvel environnement.</li>
                                                                    <li value="4">Création de la fiche dossier dans l'environnement V12. Si l'import est fait par la console, la fiche dossier est créée automatiquement, mais si l'import a été fait par des outils de base de données, vous devez créer la fiche dossier manuellement après l'import.</li>
                                                                </ol>
                                                                <p>
                                                                    <img src="../Resources/Images/SEEINFO.png" alt="SEEINFO" /> <span style="color: #bf7f00;">Vous pouvez regrouper ces étapes en une seule. Utilisez pour cela </span><span style="color: #bf7f00;">l'assistant d'import distant proposé dans la console de configuration SAFE X3.</span></p>
                                                                <p>
                                                                    <img src="../Resources/Images/SEEWARNING.png" alt="SEEWARNING" /><span style="color: #bf0000;"> Si la procédure doit être relancée à partir de l'import des données dans le dossier de migration, vous devez lancer le traitement <b>TRTMIGDEL</b> pour nettoyer les tables stockant l'état de la migration.</span>
                                                                </p><span style="color: #bf7f00;"><span style="color: #000000;"><p>Si vous utilisez la fonction d'import de la console, le procédure est la suivante:</p><ol><li value="1">Lancez la console.</li><li value="2">Placez-vous sur la solution souhaitée et affichez l'écran <b>Dossiers</b>.</li><li value="3">Cliquez sur <b>Import</b> (dans la barre d'outils de l'écran), une fenêtre apparaît.</li><li value="4">Choisissez le nom du dossier à importer et le répertoire contenant les données à importer (<b>SVG</b> si ce répertoire a été utilisé pour réaliser l'extraction), puis renseignez les autres champs.</li><li value="5">Lancez l'import en cliquant sur <b>OK</b>.</li></ol></span></span>
                                                                <p><span style="color: #bf7f00;"><span style="color: #000000;">Avant la revalidation des dossiers, vous devez obligatoirement ajuster la valeur des codes activité dans la fiche dossier. Ceci met ces paramétrages en conformité avec la licence, par exemple pour mettre en œuvre de nouvelles fonctionnalités contrôlées par de nouveaux codes activités. </span></span><span style="color: #bf7f00;"><span style="color: #000000;"></span>La modification de la fiche dossier, ou sa création, se fait en vous connectant dans le dossier <b>Superviseur</b>.<br />Vous ne pouvez pas déclencher la revalidation des dossiers sans cette mise à jour. Un message d'erreur le rappelle dès le lancement de la validation.</span><span style="color: #000000;"></span>
                                                                </p>
                                                            </body>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_70_10"></a>
                                                            <h2 class="g1" id="Revalidationdedossier" data-magellan-target="Revalidationdedossier">Revalidation de dossier</h2>
                                                            <div class="links">
                                                                <ul>
                                                                    <li><a href="#MIS_70_20">Grandes étapes de la revalidation</a>
                                                                    </li>
                                                                    <li><a href="#MIS_70_30">Utilisation de plans de migration</a>
                                                                    </li>
                                                                    <li><a href="#MIS_70_40">Déroulement des opérations dans un plan de migration</a>
                                                                    </li>
                                                                    <li><a href="#MIS_70_50">Purge finale des tables de mouvement</a>
                                                                    </li>
                                                                    <li><a href="#MIS_70_60">Exemple de séquencement sur la migration des flux</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <p>
                                                            </p>
                                                            <body>
                                                                <p>La revalidation de dossier transforme la structure du dictionnaire X3, puis des tables de paramétrage, puis des tables de données de la version antérieure pour l'amener au niveau de la dernière mise à jour V12, en transférant au passage les données. Cliquez sur le bouton <a href="ADSVAL.htm">Validation </a>depuis la gestion de dossiers pour déclencher la revalidation.</p>
                                                                <p>Elle réalise la migration superviseur et fonctionnelle du dossier, en comparant le dictionnaire de la nouvelle version et le dictionnaire de la version à migrer.</p>
                                                                <p>
                                                                    <img src="../Resources/Images/SEEWARNING.png" alt="SEEWARNING" keeps="true" realloc="SEEWARNING" /> <span style="color: #bf0000;"></span><span style="color: #bf0000;"></span></p>
                                                            </body><a id="MIS_70_20"></a>
                                                            <h2 class="g1" id="Grandesétapesdelarevalidation" data-magellan-target="Grandesétapesdelarevalidation">Grandes étapes de la revalidation</h2>
                                                            <p>
                                                            </p>
                                                            <body>
                                                                <p>La revalidation de dossier enchaîne les étapes suivantes sur le dossier à migrer :</p>
                                                                <ol>
                                                                    <li value="1">Purge de certaines tables temporaires ou de cumul dont la reconstitution sera faite dans des étapes ultérieures. Les tables superviseur concernées par cette purge sont les suivantes :<ul><li><b>ALSTRD</b></li><li><b>ALISTER</b></li><li><b>AWRKLOG</b></li><li><b>AWRKLOGIND</b></li><li><b>AWRKLOGMES</b></li><li><b>ATMPTRA</b></li></ul></li>
                                                                    <li value="2">Migration de l'enveloppe, c'est-à-dire du dictionnaire de données et des tables du superviseur nécessaires au fonctionnement de base (connexion, gestion des utilisateurs, environnement de développement et de paramétrage minimal). A partir du moment où cette migration est faite, une connexion est théoriquement possible, même si les tables contenant les données applicatives de flux sont pour le moment vides.</li>
                                                                    <li value="3">Migration fonctionnelle : pour chaque table dont la structure change, la procédure effectue les changements nécessaires, le cas échéant en donnant des valeurs par défaut idoines, par des procédures enchaînées en étapes et en phases. C'est la partie longue de la migration, car elle dépend du volume de données à migrer. </li>
                                                                    <li value="4">Traitement post-migration (ce sont essentiellement des resynchronisations de tables de cumuls). Vous pouvez différer certaines de ces étapes, et reprendre l'exploitation, mais avec un fonctionnement dégradé du progiciel dans la phase intermédiaire. Vous devrez avoir passé ces étapes pour que la migration soit considérée comme terminée.</li>
                                                                    <li value="5">Suppression finale des tables temporaires. Cette phase est manuelle et peut, pour des raisons de sécurité, être différée tant que vous n'êtes pas absolument sûr que la totalité des données de flux a été correctement migrée.</li>
                                                                </ol>
                                                            </body><a id="MIS_70_30"></a>
                                                            <h2 class="g1" id="Utilisationdeplansdemigration" data-magellan-target="Utilisationdeplansdemigration">Utilisation de plans de migration</h2>
                                                            <p>
                                                            </p>
                                                            <body>
                                                                <p>Cette migration fonctionnelle peut être très longue lorsque le dossier est très volumineux. En outre, certaines des tables mises à jour sont potentiellement indépendantes, et pourraient donc être migrées en parallèle, tirant ainsi parti des architectures multi-processeurs pour accélérer cette phase.</p>
                                                                <p>Pour permettre d'ordonnancer au mieux cette migration, vous pouvez définir <b>avant</b> de lancer la validation de données un <a href="AMOULIN.htm">plan de migration</a> personnalisé. Ce plan de migration est décrit par la fonction nommée <a href="GESAM3.htm">procédure de migration</a> (appelée depuis le dossier superviseur). Cette fonction permet de définir les étapes, phases, et procédures de la migration fonctionnelle et superviseur. Plus précisément, un plan de migration correspond à une définition des paramètres précis de la migration (dossier concerné, nombre de procédures pouvant être parallélisées, politique d'enchaînement des tâches, état d'exécution). Un plan de migration est créé par recopie de l'ensemble des éléments actifs de la procédure de migration. Cet ensemble complet de procédures est fourni en standard, permettant d'enchaîner de façon exhaustive les traitements réalisés par le progiciel standard dans la phase de migration.</p>
                                                                <p>Il est possible, à ce stade, de définir des procédures spécifiques moyennant l'écriture de traitements complémentaires conformément à la méthodologie définie dans l'<a href="MIG_TRT.htm">annexe suivante</a>. Ces procédures spécifiques seront insérées entre les procédures standard de façon appropriée.</p>
                                                                <p>Dès lors qu'un plan de migration a été défini, vous pouvez, depuis ce plan, procéder à son lancement, à son interruption temporaire, à la reprise de son exécution, à la visualisation de son état d'avancement.</p>
                                                                <p>Lorsqu'un dossier est d'une volumétrie raisonnable, dont la migration ne nécessite pas de planification particulière, il est inutile de créer un plan de migration. En effet, en l'absence de plan de migration défini, l'opération de validation du dossier va créer automatiquement un plan de migration. Ce plan de migration aura pour code le code du dossier, sauf si ce code correspond déjà à un plan de migration qui ne soit pas dans le statut <b>En attente</b>. Si cela était le cas, le plan serait créé avec un code prédéfini sous la forme <b>MIGmmddM##</b>, <b>mm</b> et <b>dd </b> étant les numéros du mois et du jour de lancement, <b>##</b> étant un numéro séquentiel.</p>
                                                                <p>Par contre, si vous souhaitez personnaliser les options d'enchaînement de migration, vous pouvez créer un plan de migration dont le code correspond obligatoirement au nom du dossier. Cette création sera faite dans le dossier superviseur <b>avant le lancement de la validation de dossier</b>. Dès lors qu'un tel plan de migration existe avec le statut <b>En attente</b>, il sera utilisé pour la migration fonctionnelle du dossier.</p>
                                                                <p>
                                                                    <img src="../Resources/Images/SEEINFO.png" alt="SEEINFO" /> <span style="color: #bf7f00;"></span><span style="color: #bf7f00;"></span></p>
                                                            </body><a id="MIS_70_40"></a>
                                                            <h2 class="g1" id="Déroulementdesopérationsdansunplandemigration" data-magellan-target="Déroulementdesopérationsdansunplandemigration">Déroulement des opérations dans un plan de migration</h2>
                                                            <p>
                                                            </p>
                                                            <body>
                                                                <p>Un plan de migration est caractérisé par un code dossier et quatre paramètres :</p>
                                                                <ul>
                                                                    <li>un intitulé indicatif,</li>
                                                                    <li>le nombre de procédures&#160;susceptibles d'être lancées simultanément. Ce nombre constitue un maximum possible. Seules des procédures parallélisables seront lancées simultanément. Attention, ce nombre est limité par le nombre de tâches batch susceptibles d'être exécutées simultanément (défini dans la fonction de <a href="ABATPAR.htm">paramétrage du serveur batch</a>), lui-même limité par la licence d'utilisation,</li>
                                                                    <li>un indicateur spécifiant si les procédures doivent être lancées automatiquement en s'enchaînant selon la logique définie par le plan. Si ce n'est pas le cas, vous devrez faire l'enchaînement des procédures décrites dans le plan manuellement,</li>
                                                                    <li>un indicateur signalant si les procédures <b>post-migration</b> doivent être enchaînées à la migration elle-même. Ces opérations sont caractérisées ci-dessous.</li>
                                                                </ul>
                                                                <p>Si le plan de migration est créé par défaut à la revalidation du dossier, il est créé avec les valeurs :</p>
                                                                <ul>
                                                                    <li><b>Nombre de tâches simultanées </b>à la valeur du paramètre <b>NBRTACSIM</b> ou, s'il n'existe pas, à <b>2</b>,</li>
                                                                    <li><b>Enchaînement automatique</b> à <b>Oui,</b></li>
                                                                    <li><b>Opérations post-migration</b> à <b>Oui</b>.</li>
                                                                </ul>
                                                                <p>Vous pouvez modifier ces valeurs depuis la fonction de contrôle du plan de migration.</p>
                                                                <br />
                                                                <p>Dans l'écran associé au plan de migration, vous retrouvez la liste ordonnée des procédures du plan. Des boutons permettent de contrôler globalement l'exécution du plan :</p>
                                                                <ul>
                                                                    <li>en lançant son exécution,</li>
                                                                    <li>en suspendant le lancement de nouvelles procédures,</li>
                                                                    <li>en interrompant toutes les procédures en cours,</li>
                                                                    <li>en relançant son exécution.</li>
                                                                </ul>
                                                                <p>Chaque ligne du plan matérialise une étape de l'exécution, caractérisée par :</p>
                                                                <ul>
                                                                    <li>le code de la procédure et son intitulé,</li>
                                                                    <li>l'étape et la phase dont fait partie la procédure,</li>
                                                                    <li>le module fonctionnel auquel est rattachée la procédure,</li>
                                                                    <li>le rang d'exécution.</li>
                                                                </ul>
                                                                <p>Les étapes de la migration permettent de découper la migration fonctionnelle.&#160;Si une procédure liée à une phase donnée n'est pas terminée, vous ne pouvez pas lancer les phases suivantes. Les phases sont rattachées aux étapes suivantes :</p>
                                                                <ol>
                                                                    <li value="1">L'étape d'initialisation est une étape préliminaire qui s'exécute en tout premier. Elle n'est pas utilisée à ce jour et permet à des procédures spécifiques de s'exécuter avant la migration en elle-même.</li>
                                                                    <li value="2">L'étape de tronc commun permet de migrer des données utilisées par les étapes suivantes.</li>
                                                                    <li value="3">L'étape <b>module</b> permet de réaliser les migrations liées à chaque module fonctionnel. Une opération de cette étape est associée à un module fonctionnel : cette association est purement documentaire, et ne contraint pas l'exécution. Ainsi, des migrations de données liées à des modules différents peuvent être exécutées en parallèle si elles sont dans la même phase. Leur lancement se fera dans l'ordre des modules, puis des rangs d'exécution.</li>
                                                                    <li value="4">L'étape <b>post-migration</b> permet de réaliser des opérations de synchronisation ou des mises à jour secondaires dont l'exécution n'est pas obligatoire pour recommencer à fonctionner en mode au moins dégradé. Vous pouvez l'utiliser, par exemple, pour différer des migrations de données anciennes. Notez toutefois que, même si elle n'est pas obligatoire pour reprendre l'exploitation, elle devra être réalisée ultérieurement pour que l'état d'un dossier soit considéré comme complètement migré. Ces opérations post-migration sont lancées par défaut dans un plan de migration, mais peuvent être débrayées. Elles sont listées dans un <a href="../FCT/TRTMIG_X3.htm#MIS_50_10">paragraphe dédié </a>de l'annexe décrivant les procédures de migration.</li>
                                                                </ol>
                                                                <p>Dans une étape, vous retrouvez des procédures unitaires organisées en phases et en rangs.</p>
                                                                <p>Deux procédures définies dans la même phase sont réputées être exécutables simultanément, et doivent donc être indépendantes. L'affectation d'une procédure standard à une phase donnée ne peut pas être changée. Tant que toutes les&#160;procédures d'une phase ne sont pas terminées, vous ne pouvez pas lancer la phase suivante.</p>
                                                                <p>L'ordre de rang est simplement un ordre préférentiel de lancement, mais vous pouvez le changer, y compris pour des procédures&#160;standard,&#160;lors de la définition du plan.</p>
                                                            </body><a id="MIS_70_50"></a>
                                                            <h2 class="g1" id="Purgefinaledestablesdemouvement" data-magellan-target="Purgefinaledestablesdemouvement">Purge finale des tables de mouvement</h2>
                                                            <p>
                                                            </p>
                                                            <body>
                                                                <p>Cette phase est manuelle. Elle est déclenchée par l'exécution du traitement <b>TRTMIGDEL</b> depuis la fonction d'exécution de traitement. Son exécution provoque la suppression de toutes les tables portant le code activité <b>MIG</b>.</p>
                                                                <p><b style="color: rgb(191, 0, 0);font-size: 12pt;">Cette phase est irréversible. Assurez-vous au préalable que les traitements de migration se sont bien déroulés.</b>
                                                                </p>
                                                                <p>Conserver les tables temporaires dans le dossier&#160;n'est pas&#160;un obstacle à la reprise normale de l'exploitation. Il est donc possible de garder ces tables en ligne pendant quelques semaines d'exploitation. Vous pourrez ainsi, en cas de problème rencontré&#160;après la migration, disposer des données d'origine à des fins de comparaison ou d'analyse.</p>
                                                            </body><a id="MIS_70_60"></a>
                                                            <h2 class="g1" id="Exempledeséquencementsurlamigrationdesflux" data-magellan-target="Exempledeséquencementsurlamigrationdesflux">Exemple de séquencement sur la migration des flux</h2>
                                                            <p>
                                                            </p>
                                                            <body>
                                                                <p>Soient les opérations suivantes :</p>
                                                                <ul>
                                                                    <li>dans l'étape <b>initialisation</b>, 7 opérations :</li>
                                                                    <ul>
                                                                        <li><b>IN1</b>, <b>IN2</b> dans la phase 1 (de rangs 3 et 7),</li>
                                                                        <li><b>IN3</b> et <b>IN4</b>, <b>IN5</b> et <b>IN6</b> dans la phase 2 (et de rangs successifs 1 3, 5 9),</li>
                                                                        <li><b>IN7</b> dans la phase 3,</li>
                                                                    </ul>
                                                                    <li>dans l'étape <b>tronc commun</b>, 6 opérations :</li>
                                                                    <ul>
                                                                        <li><b>TC1</b>, <b>TC2</b>, <b>TC3</b>, toutes les 3 dans la phase 1, avec des rangs 3, 6, 9,</li>
                                                                        <li><b>TC4</b> dans la phase 2,</li>
                                                                        <li><b>TC5</b> et <b>TC6</b> dans la phase 3,</li>
                                                                    </ul>
                                                                    <li>dans l'étape <b>module</b>, 5 opérations :</li>
                                                                    <ul>
                                                                        <li>l'étape <b>MO1</b>, dans le module <b>Comptabilité, </b>avec la phase 2 et le rang 1,</li>
                                                                        <li>les étapes <b>MO2</b> et <b>MO3</b>, dans le module <b>Stocks</b>, dans les phases respectives 1 et 2, avec les rangs respectifs 1 et 2,</li>
                                                                        <li>les étapes <b>MO4</b> et <b>MO5</b>, dans le module <b>Ventes</b>, avec les phases respectives 1 et 2, avec des rangs 1,</li>
                                                                        <li>les étapes <b>MO6</b> et <b>MO7</b>, dans le module <b>Achats</b>, avec les phases respectives 1 et 5, avec des rangs 1.</li>
                                                                    </ul>
                                                                </ul>
                                                                <p>Si vous lancez le plan de migration avec un enchaînement des tâches, et un nombre maximum de deux procédures tournant simultanément, l'enchaînement peut être le suivant :</p>
                                                                <ol>
                                                                    <li value="1">Les procédures <b>IN1</b> et <b>IN2</b> sont lancées dans cet ordre.</li>
                                                                    <li value="2">Si la procédure <b>IN2</b> se termine la première. Tant que la procédure <b>IN1</b> n'est pas terminée, aucune autre procédure ne sera lancée, car les procédures suivantes sont dans une phase ou une étape de rang supérieur.</li>
                                                                    <li value="3">Lorsque la procédure <b>IN1</b> est finie, les procédures <b>IN3</b> et <b>IN4</b> seront lancées dans l'ordre.</li>
                                                                    <li value="4">Si la procédure <b>IN4</b> se termine avant la procédure <b>IN3</b>, la procédure <b>IN5</b> sera lancée. Si elle se termine avant que la procédure <b>IN3</b> ne soit terminée, la procédure <b>IN6</b> sera lancée et tournera en même temps que la procédure <b>IN3</b> continue.</li>
                                                                    <li value="5">Lorsque les procédures <b>IN3</b> et <b>IN6</b> seront terminées toutes les deux (et seulement à ce moment là), l'étape d'initialisation sera terminée.</li>
                                                                    <li value="6">Les procédures de la première phase de l'étape <b>Tronc commun</b> peuvent alors se lancer : tout d'abord les procédures <b>TC1</b> et <b>TC2</b>, puis <b>TC3</b>, qui se lancera dès qu'une des deux procédures précédentes aura été terminée. Attendez que les trois procédures <b>TC1</b>, <b>TC2</b>, <b>TC3</b> soient toutes terminées pour lancer <b>TC4</b>, qui tournera seule puisqu'il n'y a pas d'autre procédure dans cette phase. Vous pouvez ensuite lancer <b>TC5</b> et <b>TC6</b> qui tourneront en parallèle.</li>
                                                                    <li value="7">Lorsque les procédures <b>TC5</b> et <b>TC6</b> sont toutes les deux terminées, vous pouvez passer aux tâches de l'étape modules.</li>
                                                                    <li value="8">Lancez d'abord les procédures <b>MO2</b>, puis <b>MO6</b> (dans l'ordre, ces procédures tournant en parallèle); puis, dès que l'une des procédures <b>MO2</b> et <b>MO6</b> sera terminée, la procédure <b>MO4</b>, qui est la suivante dans l'ordre phase/module/rang, sera lancée en parallèle avec celles des procédures <b>MO2</b> et <b>MO6</b> qui n'est pas terminée.</li>
                                                                    <li value="9">Attendez ensuite que toutes les procédures précédentes soient finies, puis lancez les procédures <b>MO1</b> et <b>MO3</b>, procédures de la phase 2. Lorsqu'une des deux au moins est terminée, lancez <b>MO5</b>. Puis attendez que toutes la tâches précédentes soient terminées.</li>
                                                                    <li value="10">Lancez alors <b>MO7</b>, qui est la seule dans la phase 5.</li>
                                                                </ol>
                                                            </body>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_80_10"></a>
                                                            <h2 class="g1" id="Vérificationpostmigration" data-magellan-target="Vérificationpostmigration">Vérification post-migration</h2>
                                                            <p>
                                                            </p>
                                                            <body>
                                                                <p>Dès que la revalidation de dossier est terminée, le dossier est accessible sans restriction pour son utilisation. Il peut l'être de façon restreinte si certaines opérations post-migration ont été différées.</p>
                                                                <p>Il vous reste à vérifier et à adapter certains paramétrages fonctionnels.</p>
                                                            </body>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-mc-conditions="Other.Production only">
                                                <div id="feedback-survey">
                                                    <div class="feedback-question">
                                                        <h4>Did you find this helpful?</h4>
                                                        <p>
                                                            <button class="feedback-button feedback-yes" title="Yes, this article was helpful." alt="Yes, this article was helpful.">Yes</button>&#160;<button class="feedback-button feedback-no" title="No, this article wasn't helpful." alt="No, this article wasn't helpful.">No</button></p>
                                                    </div>
                                                    <div class="feedback-reason no">
                                                        <hr />
                                                        <div class="highlightBox">
                                                            <h4>Sorry about that</h4>
                                                            <p>Why wasn't this helpful? (check all that apply)</p>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option1" value="Couldn't find what I was looking for" data-analytics-label="Could not find" />
                                                                <label for="option1">Couldn't find what I was looking for</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option2" value="Instructions confusing or unclear" data-analytics-label="Confusing or unclear" />
                                                                <label for="option2">Instructions confusing or unclear</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option3" value="Instructions didn't work" data-analytics-label="Did not work" />
                                                                <label for="option3">Instructions didn't work</label>
                                                            </div>
                                                            <div class="feedback-reason no-thanks">
                                                                <p><b>Thanks for your feedback.</b>
                                                                </p>
                                                                <h4>Want to tell us more?</h4>
                                                                <p>Send an email to our authors to leave your feedback.</p>
                                                                <!--email_off-->
                                                                <p><a href="mailto:Sage200TechnicalAuthors@sage.com?subject=Sage 200 feedback" id="feedbackEmailLink" title="Tell us if there's a problem with the information on this page." alt="Tell us if there's a problem with the information on this page." class="sageButton">Email our authors</a>
                                                                </p>
                                                                <!--/email_off-->
                                                                <p>Sorry, but we can't provide technical support from this email address. If you need assistance, then please contact our support team directly.</p>
                                                            </div>
                                                        </div>
                                                        <div id="get-in-touch" class="highlightBox colour-dark-1">
                                                            <h4>Need support?</h4>
                                                            <p>You can contact our support team on <b>0845 111 5555</b>, 9am-5pm Monday-Friday.</p>
                                                        </div>
                                                    </div>
                                                    <div class="feedback-reason yes-thanks">
                                                        <hr />
                                                        <h4>Great!</h4>
                                                        <p>Thanks for taking the time to give us some feedback.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="sage-layout-topic-panel">
                                            <div class="menu-topic-container" id="menu-on-page">
                                                <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 1280px)" class="nocontent menu _Skins_Sage_Menu_Topic_TopNav mc-component">
                                                    <li><a href="#Proc%C3%A9duresdemigration">Procédures de migration</a>
                                                    </li>
                                                    <ul>
                                                        <li><a href="#Principales%C3%A9tapesdelamigration">Principales étapes de la migration</a>
                                                        </li>
                                                        <li><a href="#Etapespr%C3%A9migration">Etapes pré-migration</a>
                                                        </li>
                                                        <li><a href="#Copiedesdonn%C3%A9esetajustementdesparam%C3%A8tresdossier">Copie des données et ajustement des paramètres dossier</a>
                                                        </li>
                                                        <li><a href="#Revalidationdedossier">Revalidation de dossier</a>
                                                        </li>
                                                        <li><a href="#Grandes%C3%A9tapesdelarevalidation">Grandes étapes de la revalidation</a>
                                                        </li>
                                                        <li><a href="#Utilisationdeplansdemigration">Utilisation de plans de migration</a>
                                                        </li>
                                                        <li><a href="#D%C3%A9roulementdesop%C3%A9rationsdansunplandemigration">Déroulement des opérations dans un plan de migration</a>
                                                        </li>
                                                        <li><a href="#Purgefinaledestablesdemouvement">Purge finale des tables de mouvement</a>
                                                        </li>
                                                        <li><a href="#Exempledes%C3%A9quencementsurlamigrationdesflux">Exemple de séquencement sur la migration des flux</a>
                                                        </li>
                                                        <li><a href="#V%C3%A9rificationpostmigration">Vérification post-migration</a>
                                                        </li>
                                                    </ul>
                                                </ul>
                                            </div>
                                        </div>
                                    </section>
                                    <button class="go-to-top">
                                        <!-- icon and label are inserted -->
                                    </button>
                                    <section class="sage-footer colour-dark-1" id="footer" role="contentinfo">
                                        <div class="row">
                                            <div class="small-6 medium-3 columns">
                                                <h5>Site links</h5>
                                                <p><a href="../Sitemap.htm" class="MCXref xref">Sitemap</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage links</h5>
                                                <p><a href="https://my.sage.co.uk/public/help.aspx" target="_blank" class="external">Sage Support Hub</a>
                                                </p>
                                                <p><a href="https://communities.sage.co.uk/product_support_community/" class="external" target="_blank" title="Your place to get product support from other customers and Sage experts" alt="Your place to get product support from other customers and Sage experts">Product support community</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/gdpr/" class="external" target="_blank">General Data Protection Regulation</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/legal/" class="external" target="_blank">Legal information</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Page info</h5>
                                                <p>Page updated: <span class="mc-variable Dates.DateFileSaved variable">23 janvier 2024</span></p>
                                                <!-- script moves last published date to here -->
                                                <div id="last-published-footer">
                                                </div>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage media</h5>
                                                <p><a href="https://www.facebook.com/sageuk" target="_blank" alt="Find us on Facebook" title="Find us on Facebook"><i class="fa fa-lg fa-facebook" aria-hidden="true"></i></a>&#160;
						<a href="https://www.linkedin.com/company/sage-software" target="_blank" alt="Find us on LinkedIn" title="Find us on LinkedIn"><i class="fa fa-lg fa-linkedin" aria-hidden="true"></i></a>&#160;
						<a href="https://twitter.com/sageuk/" target="_blank" alt="Find us on Twitter" title="Find us on Twitter"><i class="fa fa-lg fa-twitter" aria-hidden="true"></i></a>&#160;
						<a href="https://www.youtube.com/user/SageUKOfficial" target="_blank" alt="Find us on YouTube" title="Find us on YouTube"><i class="fa fa-lg fa-youtube" aria-hidden="true"></i></a></p>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- Skin type scripts -->
                                    <script type="text/javascript" src="../Resources/Scripts/SideNav-template.js" data-mc-conditions="Other.HTML5-SideNav">
                                    </script>
                                    <!-- Google Analytics -->
                                    <div data-mc-conditions="Other.Production only">
                                        <!-- Google analytics script -->
                                        <!-- Copy and paste full HTML of tracking code here for Global site tag (gtag.js) -->
                                        <!-- Remember to edit 'async' parameter to read async="" -->
                                        <!-- Analytics for events -->
                                        <script type="text/javascript" src="../Resources/Scripts/google-analytics-events.js">
                                        </script>
                                    </div>
                                    <!-- cookies -->
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.js">
                                    </script>
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.config.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>