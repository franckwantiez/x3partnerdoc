<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="pt-pt" xml:lang="pt-pt" class="_Skins_Sage_Skin_SideNav" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml" />
        <meta charset="utf-8" />
        <meta name="description" content="Certificate Installation" />
        <meta name="module" content="Platform" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" /><title> Certificate Installation
</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/Sage.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/Stylesheets/font-awesome.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: #000000 url('../../Skins/Default/Stylesheets/Images/60x60_globe_white-on-transparent_icon.png') no-repeat center center;
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../Resources/TableStyles/NormalRows.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <script type="text/javascript">/*<![CDATA[*/


function onload(){
	window.focus();
	window[window.history.pushState ? "onpopstate" : "onhashchange"] = function(event){ windows.focus(); };
}


/*]]>*/</script>
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Voltar" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Ir para conteúdo principal</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Conta</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Definições</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Terminar sessão</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Mostrar painel de navegação" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../Home.htm" alt="Logótipo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Conta</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Definições</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Terminar sessão</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Campo de pesquisa" placeholder="Pesquisar" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filtro:</span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Filtro de pesquisa" title="Todos os ficheiros" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">Todos os ficheiros</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Pesquisar" role="button" tabindex="0"><span class="invisible-label">Enviar pesquisa</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <script type="text/javascript">/*<![CDATA[*/$(document).ready(function(){
			$("#selectlang").appendTo("div.central-account-wrapper");
		});/*]]>*/</script>
                                    <div id="selectlang" class="headerlang">
                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_Language_toggle mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                            <div class="button-group-container-left">
                                                <button class="button needs-pie select-language-button" title="Alterar idioma">
                                                    <div>
                                                        <div role="img" class="button-icon-wrapper" aria-label="Alterar idioma">
                                                            <div class="button-icon"> </div>
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="sage-header-title">
                                        <img id="sage-header-logo" src="../Resources/Images/Sage_logo_green.svg" alt="Sage" /><span id="sage-header-product-name"><span id="sage-header-product"><span class="mc-variable Sage-Product.ProductName variable">X3 Warehousing</span></span></span>
                                    </div>
                                    <section class="sage-topic-body sage-layout-two-columns">
                                        <div class="sage-layout-topic-main">
                                            <div role="main" id="mc-main-content">
                                                <h1 id="CertificateInstallation" data-magellan-target="CertificateInstallation"> Certificate Installation
</h1>
                                                <!-- Public -->
                                                <p>The trusted connection between node servers and Sage X3 servers is based on signed certificates. This document explains how the certificates must be set up.</p>
                                                <ul>
                                                    <li><a href="#introduction-about-certificates">Introduction to certificates</a>
                                                    </li>
                                                    <li><a href="#simplified-certificate-procedure">Simplified certificate procedure</a>
                                                    </li>
                                                    <li><a href="#complete-generation-procedure">Complete generation procedure</a>
                                                    </li>
                                                    <li><a href="#appendix-detailed-generation-procedure"> Appendix: detailed generation procedure</a>
                                                    </li>
                                                </ul>
                                                <h1 id="Introductiontocertificates" data-magellan-target="Introductiontocertificates"><a id="introduction-about-certificates">Introduction to certificates</a>
                                                </h1>
                                                <h2 id="Generalprinciples" data-magellan-target="Generalprinciples">General principles</h2>
                                                <p>In public key cryptography, the <b>public key</b> can be distributed to many people while the <b>private key</b> should be kept private. Only the holder of the private key can decrypt data that has been encrypted using the public key.</p>
                                                <p>You can compute the <b>digital signature</b> of data using the private key. Anyone who has the public key can verify the digital signature, and thus make sure that the data has not been changed. It is almost impossible to change data without changing the signature, or to compute a valid signature without the private key.</p>
                                                <p>The private key is very sensitive and it is usually encrypted using a <b>passphrase</b> (similar to a password but more complicated). You can only use the private key if you know the passphrase.</p>
                                                <p>A <b>certificate</b> is a bundle containing a public key, a digital signature and some additional data. Certificates always involve two parties:</p>
                                                <ul>
                                                    <li><b>The subject</b> (a person or organization), who provides the public key and most of the additional data.</li>
                                                    <li><b>The issuer</b>, who essentially seals the data with a digital signature.</li>
                                                </ul>
                                                <p>Certificates contain:</p>
                                                <ul>
                                                    <li>information about the issuer and the subject of the certificate,</li>
                                                    <li>an expiration date,</li>
                                                    <li>the subject's public key,</li>
                                                    <li>the issuer's digital signature to verify that the certificate is not fake.</li>
                                                </ul>
                                                <p>The certificate allows you to make sure that the subject of the certificate has the corresponding private key.</p>
                                                <p>This diagram summarizes the components that are set up for certificate management:</p>
                                                <p>
                                                    <img src="../Resources/Images/images_certificate_principles.jpg" />
                                                </p>
                                                <h2 id="Certificatesmanagement" data-magellan-target="Certificatesmanagement">Certificates management</h2>
                                                <h2 id="Mastercertificate" data-magellan-target="Mastercertificate">Master certificate</h2>
                                                <p>The first step is to create a master certificate (or CA certificate). It is used as a certification authority (the issuer and subject are the same) and it identifies a domain of trust for your company or organization.</p>
                                                <p>For stronger security, the certificate must be generated on a secure server, and the private key must <b>never</b> be transferred. The master certificate, however, can be transferred on different node.js servers as illustrated in the diagram below:</p>
                                                <p>
                                                    <img src="../Resources/Images/images_certificate_master.jpg" />
                                                </p>
                                                <p>In this diagram, you can see that only one master certificate exists, and that the corresponding private key is kept safe on a master secured server while the certificate is distributed on each node.js server.</p>
                                                <h2 id="nodejscertificate" data-magellan-target="nodejscertificate">node.js certificate</h2>
                                                <p>The second step is to create a private and a public key, as well as a certificate for each node.js server. They are generated using the master certificate and the master private key. The <b>issuer</b> is the certification authority and the <b>subject</b> is the node.js server. </p>
                                                <p>This step secures the connections to Sage X3 and it can also secure the connection between node.js servers. Every time a connection request is sent from a node.js server to a Sage X3 server, encrypted data is sent. The Sage X3 server can identify the server that connects using the public key and ensure the authentication. This is why there are as many certificates as there are node.js servers.</p>
                                                <p>This corresponds to the following diagram:</p>
                                                <p>
                                                    <img src="../Resources/Images/images_certificate_syracuse.jpg" />
                                                </p>
                                                <p>In this diagram, you can see that there are as many certificates and private keys as there are node.js servers. The private key and certificate remain on the node.js server, while the public key is distributed to the Sage X3 servers. The Sage X3 servers then receive a connection from the corresponding node.js server. </p>
                                                <p>Note that the Sage X3 servers will only get the public key, without the certificate itself or the private key.</p>
                                                <h1 id="Simplifiedcertificateprocedure" data-magellan-target="Simplifiedcertificateprocedure"><a id="simplified">Simplified certificate procedure</a>
                                                </h1>
                                                <h2 id="Overview" data-magellan-target="Overview">Overview</h2>
                                                <p>While it is impossible to completely automate the generation and distribution of certificates and keys for security reasons, there is a simplified method that allows an automation of the installation. </p>
                                                <p>This method was designed for cases where a unique node.js server is installed on the network.</p>
                                                <p>Note that:</p>
                                                <ul>
                                                    <li>The node.js server generates the CA certificate and private key.</li>
                                                    <li>The node.js certificate, and the public and private keys are also generated on this server.</li>
                                                    <li>If an additional check box communicating that the Sage X3 server is located on a server accessible through the network is selected, the public key is copied automatically. Otherwise, the transfer will have to be done manually after running the procedure.</li>
                                                </ul>
                                                <p>If you want a separate server to create the certificates in a very secured environment, run the <a href="#complete-generation-procedure">complete generation procedure</a> instead.</p>
                                                <h2 id="Keygenerationprocedure" data-magellan-target="Keygenerationprocedure"><a id="keygeneration"></a>Key generation procedure</h2>
                                                <p>The key generation takes place during software installation. </p>
                                                <ol>
                                                    <li value="1">Follow the installation procedure until you reach step 9:<br /><img src="../Resources/Images/images_install_9.jpg" /><br />
 Change the path where the certificate will be stored, if necessary.</li>
                                                    <li value="2">Select an option for the certificate and click <b>Next</b>.</li>
                                                    <li value="3">If you selected <b><i>Simplified certificate installation for a single server</i></b>:<br /><img src="../Resources/Images/images_install_10.jpg" /><br /><ol style="list-style-type: lower-alpha;"><li value="1">Enter a passphrase for the private key of the certification authority and another for the server certificate.<br /></li><li value="2">Enter them a second time in the <b>Verification</b> fields.<br />
  Make sure that the passphrases use a mix of digits, lower and upper case letters, as well as special characters.<br /><b>Caution:</b> Make sure you memorize these passphrases as there is no way to recover them.<br /></li><li value="3">Click <b>Next</b>.</li><li value="4">Enter the required information about the issuer:<br /><img src="../Resources/Images/images_install_11.jpg" /><br /><b>Caution:</b> When entering a value in the <b>Days of validity</b> field, keep in mind that you will have to create new certificates and distribute them at the end of the duration selected. Make sure you choose the best compromise between security and convenience.</li><li value="5">Click <b>Next</b></li><li value="6">Enter the name of the server and select the folder where the certificate tool is installed.<br /><img src="../Resources/Images/images_install13-22a.jpg" /></li><li value="7">Select <b><i>Specify a Sage X3 Runtime path and install certificates</i></b> if a single physical server hosts the node.js server and the Sage X3 runtime, or <b><i>Specify a Sage X3 webservices server path and install certificates</i></b> if applicable.</li><li value="8">Click <b>Browse</b> and select the correct path if you have selected any of these two options so that the public key is automatically copied in the correct folder:<br /><img src="../Resources/Images/images_install13-22b.jpg" /></li><li value="9">Click <b>Next</b>.</li></ol></li>
                                                    <li value="4">If you selected <b><i>Use an existing certificate</i></b>, enter the certificate information.<br />
 Click <b>Next</b>.<br /><img src="../Resources/Images/images_install_9a.jpg" /></li>
                                                    <li value="5">Follow the rest of the installation procedure.</li>
                                                </ol>
                                                <h1 id="Completegenerationprocedure" data-magellan-target="Completegenerationprocedure"><a id="complete-generation-procedure">Complete generation procedure</a>
                                                </h1>
                                                <p>The key generation process consists in:</p>
                                                <ul>
                                                    <li>Generating the certificates</li>
                                                    <li>Distributing the certificates to the node.js servers</li>
                                                    <li>Distributing the public keys to the Sage X3 server</li>
                                                </ul>
                                                <h2 id="Generatingthecertificates" data-magellan-target="Generatingthecertificates">Generating the certificates</h2>
                                                <p><strong>Pre-requisites:</strong>
                                                </p>
                                                <ul>
                                                    <li>You need a secure computer (without Internet access, if possible). This computer does not need to be part of the node.js cluster.</li>
                                                    <li>Java 7 must be installed on the computer.</li>
                                                </ul>
                                                <p>To generate the certificates:</p>
                                                <ol>
                                                    <li value="1">Copy the contents of the "<i>bin/cert_gen</i>" folder of a node.js installation into a file system folder of the computer.</li>
                                                    <li value="2">Open a cmd prompt and enter the following command:<br /><code>java -jar certgen.jar</code><br /><b>Note:</b> You need to have write access to the folder and subfolders.<br /> 
  The program creates subfolders "private" (for the private key of the generated certificate authority) and "output" (for all other certificates, server private keys, and public keys).</li>
                                                    <li value="3">If you are running this program for the first time, enter the data that will be used to sign all certificates.</li>
                                                    <li value="4">Create a certificate for each server on which node.js runs.<br />
The name must be the hostname of the node.js server (the same name as the output of the "hostname" command). It will be automatically converted to lowercase.</li>
                                                    <li value="5">Enter the server name of the TCP connections.<br />
It must be the server name or the IP address on which the server can be reached by TCP from all other node.js servers.<br />
 If you generate the certificates on a computer that has a network connection to the node.js servers, you can automatically transfer the certificates if you have already copied the CA certificate to each server.</li>
                                                </ol>
                                                <p>For a complete list of program options, refer to the <a href="#appendix-detailed-generation-procedure">appendix</a>. </p>
                                                <p>At the end of the process, the output subfolder contains the following files:</p>
                                                <ul>
                                                    <li>"<i>ca.cacrt</i>", the certificate of the generated certification authority</li>
                                                    <li>For each server:
  <ul><li>A "<i>.crt</i>" file containing the certificate</li><li>A "<i>.key</i>" file containing the private key</li><li>A "<i>.pem</i>" file containing the corresponding public key which is used by Sage X3 servers for communication with the server.<br />
  Note that characters "$", "." and "@" are replaced with "_" in the name of the ".pem" file.</li></ul><p>The name is always the hostname of the server in lowercase.</p></li>
                                                    <br />
                                                </ul>
                                                <h2 id="Distributingthecertificatestothenodejsservers" data-magellan-target="Distributingthecertificatestothenodejsservers"><a id="distributing-to-node"></a>Distributing the certificates to the node.js servers</h2>
                                                <ol>
                                                    <li value="1">Locate the folder created by the setup process for the certificates on each server. Go to the subfolder named after the server name.<br />
 Under Unix, this subfolder is only accessible by the user running the node.js process.</li>
                                                    <li value="2">Copy files "<i>ca.cacrt</i>" in this subfolder.</li>
                                                    <li value="3">If you do not want to transfer the certificate, private key, and passphrase using the certificate generation tool, copy the "<i>.key</i>" and "<i>.crt</i>" files named after the server name in this subfolder manually.</li>
                                                    <li value="4">In the node.js installation folder, locate batch file "<i>passphrase.cmd</i>" or shell script "<i>passphrase.sh</i>"<br />
Invoke either of these files with one parameter (either the passphrase of the private key) from the command prompt.<br />
 This sets and encrypts the passphrase, and checks the certificate and private key.<br />
 You can check your settings by invoking the passphrase file with special parameter "<i>-check</i>".<br /><b>Note:</b> It is not possible to set "<i>-check</i>" as a passphrase for a server key. A passphrase must also include at least four characters.</li>
                                                    <li value="5">Once this is done, start the administration application.</li>
                                                    <li value="6">In the <b>Hosts</b> entity, make sure that all hosts have the "OK" status and that the <b>security</b> check box is selected. </li>
                                                </ol>
                                                <h2 id="DistributingthepublickeystotheSageX3server" data-magellan-target="DistributingthepublickeystotheSageX3server">Distributing the public keys to the Sage X3 server</h2>
                                                <p>Each node.js server has to authenticate against each Sage X3 server it invokes. There are two possibilities:</p>
                                                <p>If <u>the x3server entity has certificates that are declared</u>, you have to copy the public key file (with a "<i>.pem</i>" extension) for the certificates into the <b>keys</b> subfolder of the Sage X3 runtime. You also have to copy this file in the <b>    \data \KEYSTORE \WEBSERVER \</b> subfolder if the webservice ADC server is installed.</p>
                                                <p>This applies to certificates that were not manually installed for node.js servers. You can also generate new certificates by using the certificate generation tool and install them on all node.js servers by adding a new instance of the certificate entity. </p>
                                                <p>If <u>the x3server entity has no certificates declared</u>, you have to copy all public keys of the node.js servers (all "<i>.pem</i>" files of the output folder of the certificate generation tool) into the <b>keys</b> subfolder of the Sage X3 runtime. You also have to copy these files in the <b>\data \KEYSTORE \WEBSERVER \</b> subfolder if the webservice ADC server is installed.</p>
                                                <p>This step must be performed each time you add a new node.js server.</p>
                                                <p>We can illustrate this last option by using an example where you have two node servers (A and B), and two Sage X3 servers (1 and 2). If you want the Sage X3 server 1 to accept connections from both node.js servers (A and B), and Sage X3 server 2 to accept connections only from node.js server A, the deployment policy is summarized in the following table, where:</p>
                                                <ul>
                                                    <li><b>yes</b> means that the file must be installed.</li>
                                                    <li><b>yes/transfer</b> means that the file must be installed unless you use the certificate generation tool to transfer this data.</li>
                                                    <li><b>no</b> means that the file must not be installed.</li>
                                                    <li><b>never</b> means that installing the corresponding file would create a critical security breach.</li>
                                                    <li><b>generated</b> means that the file is generated there and should remain for certificate evolution purposes only.</li>
                                                    <li><b>available</b> means that the file is generated there and must remain there.</li>
                                                </ul>
                                                <table style="mc-table-style: url('../Resources/TableStyles/NormalRows.css');" class="TableStyle-NormalRows" cellspacing="0">
                                                    <tr class="TableStyle-NormalRows-Body-Body2">
                                                        <th rowspan="2" width="20%" class="TableStyle-NormalRows-BodyE-Column1-Body2">Type of file</th>
                                                        <th colspan="5" class="TableStyle-NormalRows-BodyD-Column1-Body2">Installed on</th>
                                                    </tr>
                                                    <tr class="TableStyle-NormalRows-Body-Body1">
                                                        <th class="TableStyle-NormalRows-BodyE-Column1-Body1">Secured CA server</th>
                                                        <th class="TableStyle-NormalRows-BodyE-Column1-Body1">node.js server A</th>
                                                        <th class="TableStyle-NormalRows-BodyE-Column1-Body1">node server B</th>
                                                        <th class="TableStyle-NormalRows-BodyE-Column1-Body1">Sage X3 server 1</th>
                                                        <th class="TableStyle-NormalRows-BodyD-Column1-Body1">Sage X3 server 2</th>
                                                    </tr>
                                                    <tr class="TableStyle-NormalRows-Body-Body2">
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">CA certificate</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">available</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">yes</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">yes</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">no</td>
                                                        <td class="TableStyle-NormalRows-BodyD-Column1-Body2">no</td>
                                                    </tr>
                                                    <tr class="TableStyle-NormalRows-Body-Body1">
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">CA private key</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">available</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">never</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">never</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">never</td>
                                                        <td class="TableStyle-NormalRows-BodyD-Column1-Body1">never</td>
                                                    </tr>
                                                    <tr class="TableStyle-NormalRows-Body-Body2">
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">Certificate for server A</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">generated</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">yes/transfer</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">no</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">no</td>
                                                        <td class="TableStyle-NormalRows-BodyD-Column1-Body2">no</td>
                                                    </tr>
                                                    <tr class="TableStyle-NormalRows-Body-Body1">
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">Server A private key</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">generated</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">yes/transfer</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">never</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">never</td>
                                                        <td class="TableStyle-NormalRows-BodyD-Column1-Body1">never</td>
                                                    </tr>
                                                    <tr class="TableStyle-NormalRows-Body-Body2">
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">Server A public key</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">generated</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">no</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">no</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">yes</td>
                                                        <td class="TableStyle-NormalRows-BodyD-Column1-Body2">yes</td>
                                                    </tr>
                                                    <tr class="TableStyle-NormalRows-Body-Body1">
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">Certificate for server B</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">generated</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">no</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">yes/transfer</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">no</td>
                                                        <td class="TableStyle-NormalRows-BodyD-Column1-Body1">no</td>
                                                    </tr>
                                                    <tr class="TableStyle-NormalRows-Body-Body2">
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">Server B private key</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">generated</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">never</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">yes/transfer</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body2">never</td>
                                                        <td class="TableStyle-NormalRows-BodyD-Column1-Body2">never</td>
                                                    </tr>
                                                    <tr class="TableStyle-NormalRows-Body-Body1">
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">Server B public key</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">generated</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">no</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">no</td>
                                                        <td class="TableStyle-NormalRows-BodyE-Column1-Body1">yes</td>
                                                        <td class="TableStyle-NormalRows-BodyD-Column1-Body1">no</td>
                                                    </tr>
                                                </table>
                                                <h1 id="AppendixDetailedgenerationprocedure" data-magellan-target="AppendixDetailedgenerationprocedure"><a id="appendix-detailed-generation-procedure"></a>Appendix: Detailed generation procedure</h1>
                                                <p>Certificates, private keys, and their passphrases are very sensitive data that cannot be stored in the database. Instead, it is kept in a folder of the local file system with limited access rights. The encrypted passphrases are kept in a separate file in the same folder.</p>
                                                <p>On customer site, the administrator generates a private key and a self-signed certificate which acts as the certification authority. For each server in the cluster, a certificate and a private key are generated in such a way that the certificate can act as a server certificate for HTTPS. The certificates are signed using the previously generated self-signed certificate. </p>
                                                <h2 id="Generatingcertificates" data-magellan-target="Generatingcertificates">Generating certificates</h2>
                                                <p>The administrator uses a command line tool to generate the certificates. The tool is independent from the node.js installation folders and must be run on a separate computer. The following is a list of possible use cases for this tool:</p>
                                                <ul>
                                                    <li>The tool can be used with or without command line parameters, and it can fetch the missing data from the console if the "<i>-batch</i>' switch is not set. </li>
                                                    <li>If the "<i>-batch</i>" switch is set, there is no input from the console and an error is displayed when data is missing. This switch is recommended when you use the tool within batch files.</li>
                                                    <li>You can generate the certificate, public key, and private key files and copy them manually to the node.js servers. This is the most secure option because you can generate the certificates on a computer that is not part of any network. However, if there is a network connection from the computer in which the tool runs to the node.js servers, it may be easier because the tool can transfer the server certificate, private key, and passphrase to a node.js server using HTTP requests with encrypted data. </li>
                                                </ul>
                                                <p>For the last option, the CA certificate must have been manually copied to the node.js servers so that the node.js servers can make sure they can trust the data. Alternatively, you can add a "<i>-notransfer</i>" switch to the invocation of the tool to switch off all transfer options. </p>
                                                <p>When node.js cannot be reached, the tool stops with an error message. It you set the "<i>-wait</i>" option with a positive number, the tool will try to connect to this port several times for the number of seconds specified. If you set the "<i>-port</i>" switch with a positive number, the tool will transfer the data to the node.js server, even in batch mode.</p>
                                                <h2 id="FirstInvocation" data-magellan-target="FirstInvocation">First Invocation</h2>
                                                <p>When the tool is started for the first time, it creates an <b>output</b> folder and a <b>private</b> folder as explained in <a href="#complete-generation-procedure">Complete generation procedure</a>. This separation reduces the risk of copying the CA private key unintentionally.</p>
                                                <p>The tool will also generate the certificate and private key of the certification authority. All other actions will be rejected. To do this, it needs:</p>
                                                <ul>
                                                    <li>The subject distinguished name of the CA certificate, either interactively or behind the command line parameter "<i>-dn</i>". The distinguished name must follow the AVA format for distinguished names according to <a href="http://www.ietf.org/rfc/rfc4514.txt">IETF</a>. </li>
                                                    <li>The passphrase of the CA private key, either interactively or behind the command line parameter "<i>-capass</i>".</li>
                                                    <li>The number of days the certificate should stay valid starting from the current time, either interactively or behind the command line parameter "<i>-days</i>".</li>
                                                    <li>Optional: the port of the node.js server to which the server certificate should be transferred via encrypted HTTP requests, either interactively by entering a positive port number or behind the command line parameter "<i>-port</i>". This only works when the server already has the CA certificate.</li>
                                                </ul>
                                                <p>When the CA certificate is available, the user can perform a number actions. If the corresponding command line parameter is not given, the action will be asked interactively. Note that the CA passphrase will only be prompted once when you do several actions within one session of the program.</p>
                                                <h2 id="Creatinganewservercertificatecommandlineparametercreate" data-magellan-target="Creatinganewservercertificatecommandlineparametercreate">Creating a new server certificate (command line parameter "<i>-create</i>")</h2>
                                                <p>This action requires:</p>
                                                <ul>
                                                    <li>The computer name of the server, interactively or as a last command line parameter.</li>
                                                    <li>The passphrase of the private key for the server certificate, interactively or behind a "<i>-pass</i>" parameter.</li>
                                                    <li>The passphrase of the private key for the CA certificate, interactively or behind a "<i>-capass</i>" parameter.</li>
                                                    <li>The server name as it should be used from other servers in TCP connections, either interactively, as the common name of a distinguished name behind the "<i>-dn</i>" parameter, or as a value behind the "<i>-cn</i>" parameter. The default value is the computer name. The other parts of the distinguished name will be used from the CA certificate unless the "<i>-dn</i>" parameter is given.</li>
                                                    <li>The number of days the certificate should stay valid starting from the current time, either interactively or behind the command line parameter "<i>-days</i>". By default, it is the same as the validity of the CA certificate.</li>
                                                </ul>
                                                <p><b>Note:</b> Unless the "<i>-notransfer</i>" switch is set, you will be prompted for the port of a node.js server. If you enter a valid positive port number, the data will be transferred to that server using encrypted HTTP requests.</p>
                                                <h2 id="Renewingthevalidityofthecertificatecommandlineparameterrenewcert" data-magellan-target="Renewingthevalidityofthecertificatecommandlineparameterrenewcert">Renewing the validity of the certificate (command line parameter "<i>-renew-cert</i>")</h2>
                                                <p>This action generates a new certificate with the same subject but a different validity. It requires:</p>
                                                <ul>
                                                    <li>The computer name of the server, interactively or as a last command line parameter.</li>
                                                    <li>The passphrase of the private key for the CA certificate, interactively or behind a "<i>-capass</i>" parameter.</li>
                                                    <li>The number of days the certificate should stay valid starting from the current time, either interactively or behind the command line parameter "<i>-days</i>". By default, it is the same as the current validity of the certificate.</li>
                                                </ul>
                                                <p><b>Note:</b> Unless the "<i>-notransfer</i>" switch is set, you will be prompted for the port of a node.js server. If you enter a valid positive port number, the data will be transferred to that server using encrypted HTTP requests.</p>
                                                <h2 id="Renewingthevalidityofallcertificatescommandlineparameterrenewallcerts" data-magellan-target="Renewingthevalidityofallcertificatescommandlineparameterrenewallcerts">Renewing the validity of all certificates (command line parameter "<i>-renew-all-certs</i>")</h2>
                                                <p>This action changes the validity of the CA certificate and all server certificates in a single action. It requires:</p>
                                                <ul>
                                                    <li>The passphrase of the private key for the CA certificate, interactively or behind a "<i>-capass</i>" parameter.</li>
                                                    <li>The number of days the certificate should stay valid starting from the current time, either interactively or behind the command line parameter "<i>-days</i>". By default, it is the same as the current validity of the certificate.</li>
                                                </ul>
                                                <p><b>Note:</b> Unless the "<i>-notransfer</i>" switch is set, you will be prompted for each port of node.js servers, one after the other. If you enter a valid positive port number, the data, including the new CA certificate, will be transferred to that server. This does not work in batch mode.</p>
                                                <h2 id="Generatinganewprivatekeycommandlineparameterrenewkey" data-magellan-target="Generatinganewprivatekeycommandlineparameterrenewkey">Generating a new private key (command line parameter "<i>-renew-key</i>")</h2>
                                                <p>This action generates a new pair of public and private keys, and generates a new certificate with the same subject and validity, but containing the new public key. When this is applied to the CA certificate, it automatically signs all server certificates with the new key. It requires:</p>
                                                <ul>
                                                    <li>The computer name of the server or an empty name for the CA certificate, interactively or as a last command line parameter.</li>
                                                    <li>The passphrase of the new private key, interactively or behind a "<i>-pass</i>" parameter. When the CA certificate key is changed, the "<i>-capass</i>" parameter should be used instead.</li>
                                                    <li>For server certificates only, the passphrase of the existing private key for the CA certificate, interactively or behind a "<i>-capass</i>" parameter.</li>
                                                </ul>
                                                <p><b>Note:</b> Unless the "<i>-notransfer</i>" switch is set, you will be prompted for the port of a node.js server. If you enter a valid positive port number, the data will be transferred to that server using encrypted HTTP requests. When you change the key of the CA certificate, you will be prompted for each port of the node.js servers, one after the other. If you enter a valid positive port number, the data, including the new CA certificate, will be transferred to that server. This does not work in batch mode.</p>
                                                <h2 id="Changingthesubjectofthecertificatecommandlineparameterchangename" data-magellan-target="Changingthesubjectofthecertificatecommandlineparameterchangename">Changing the subject of the certificate (command line parameter "<i>-change-name</i>")</h2>
                                                <p>This action changes the subject of the certificate without changing the validity. If applied to the CA certificate, it changes the issuer of all CA certificates and signs them again. When the subject of the certificate is identical to the issuer (except for the common name), the subject (except for the common name) will also be changed. It requires:</p>
                                                <ul>
                                                    <li>The computer name of the server or an empty name for the CA certificate, interactively or as a last command line parameter.</li>
                                                    <li>The passphrase of the private key for the CA certificate, interactively or behind a "<i>-capass</i>" parameter.</li>
                                                    <li>The number of days the certificate should stay valid starting from the current time, either interactively or behind the command line parameter "<i>-days</i>". By default, it is the same as the current validity of the certificate.</li>
                                                    <li>The new distinguished name of the subject. You can enter this interactively (with the old name being the default), using the parameter "<i>-cn</i>" to set a new common name, or using the parameter "<i>-dn</i> to set a new distinguished name. The distinguished name must follow the AVA format for distinguished names according to <a href="http://www.ietf.org/rfc/rfc4514.txt">IETF</a>. For server certificates, you will only be prompted for the new common name (name of the server as it is used in TCP connections), and for the CA certificate you will be prompted for all parts of the common name.</li>
                                                </ul>
                                                <p><b>Note:</b> Unless the "<i>-notransfer</i>" switch is set, you will be prompted for the port of a node.js server. If you enter a valid positive port number, the data will be transferred to that server. When you change the key of the CA certificate, you will be prompted for all ports of the node.js servers, one after the other. If you enter a valid positive port number, the data, including the new CA certificate, will be transferred to that server. This does not work in batch mode.</p>
                                                <h2 id="Showingthecontentsofthecertificatecommandlineparametershow" data-magellan-target="Showingthecontentsofthecertificatecommandlineparametershow">Showing the contents of the certificate (command line parameter "<i>-show</i>")</h2>
                                                <p>This action shows the subject and issuer distinguished names, and the start and end date of the certificate validity. It requires the computer name of the server or an empty name for the CA certificate, interactively or as a last command line parameter.</p>
                                                <h2 id="Showingthecontentsofallcertificatescommandlineparametershowall" data-magellan-target="Showingthecontentsofallcertificatescommandlineparametershowall">Showing the contents of all certificates (command line parameter "<i>-show-all</i>")</h2>
                                                <p>This action shows the subject and issuer distinguished names, and the start and end date of the validity for all certificates. It does not require any further data.</p>
                                                <h2 id="Deletingdataforaservercommandlineparameterdelete" data-magellan-target="Deletingdataforaservercommandlineparameterdelete">Deleting data for a server (command line parameter "<i>-delete</i>")</h2>
                                                <p>This action deletes the certificate, public key file (for the Sage X3 server) and the private key file from the output directory. The CA certificate cannot be deleted in this manner. It requires the computer name of the server, interactively or as a last command line parameter.</p>
                                                <h2 id="Transferringcertificateandprivatekeycommandlineparametertransfer" data-magellan-target="Transferringcertificateandprivatekeycommandlineparametertransfer">Transferring certificate and private key (command line parameter "<i>-transfer</i>")</h2>
                                                <p>This action is only available if the "<i>-notransfer</i>" switch is not set. It will transfer the corresponding certificate, private key, and passphrase to the appropriate server, provided these files are in the <b>output</b> folder. It requires:</p>
                                                <ul>
                                                    <li>The computer name of the server or an empty name for the CA certificate, interactively or as a last command line parameter.</li>
                                                    <li>The passphrase of the private key for the server certificate, interactively or behind a "<i>-pass</i>" parameter.</li>
                                                    <li>The passphrase of the private key for the CA certificate, interactively or behind a "<i>-capass</i>" parameter.</li>
                                                    <li>The port of the node.js server, interactively or behind a "<i>-port</i>" parameter.</li>
                                                </ul>
                                                <h2 id="Settingthepassphrasefortheprivatekeyonanodejsserver" data-magellan-target="Settingthepassphrasefortheprivatekeyonanodejsserver">Setting the passphrase for the private key on a node.js server</h2>
                                                <p>This is only necessary when you do not use the certificate generation tool to transfer the passphrase. It is done using the "<i>passphrase.cmd</i>" batch file or the "<i>passphrase.sh</i>" shell script (as described in <a href="#distributing-to-node">Distributing the certificates to the node.js servers</a>). This action encrypts the password of the generated private key on the server depending on the user (for example, on MS Windows using CryptProtectData). When it is invoked without further parameters, it checks the validity of the certificates. Otherwise, it sets and encrypts the passphrase.</p>
                                                <h2 id="Detailsabouttheencryptedtransferofcertificatedata" data-magellan-target="Detailsabouttheencryptedtransferofcertificatedata">Details about the encrypted transfer of certificate data</h2>
                                                <p>The certificate generation tool makes two requests to the node.js server. One for a Diffie-Hellman key exchange, and another one to transfer the data, encrypted with the common secret Diffie-Hellman key and signed with the private CA key. The tool authenticates using the private CA key and the node.js server authenticates using the public CA key. The reachability by the server name is set as the subject common name in the server certificate.</p>
                                                <h2 id="Structureofthecertificatefolder" data-magellan-target="Structureofthecertificatefolder">Structure of the certificate folder</h2>
                                                <p>The setup generates a special folder for certificates and keys, and writes its path to the "<i>nodelocal.js</i>" file.</p>
                                                <p>In the certificate folder, there is a subfolder with the computer name in lower case containing the following files:</p>
                                                <ul>
                                                    <li>"<i>ca.cacrt</i>": Certificate of the generated certification authority. There may be other certificates of certification authorities with the extension <i>.cacrt</i>.</li>
                                                    <li>"<i>[server-name].crt</i>": Certificate of the server. There may be other certificates with the extension <i>.crt</i>.</li>
                                                    <li>"<i>[server-name].key</i>": Private key file of the server. There may be other private key files with the extension <i>.key</i>.</li>
                                                    <li>"<i>[server-name].pwd</i>": File with the encrypted passphrases for all private keys of that server.</li>
                                                </ul>
                                                <p><b>Note:</b> The purpose of the subfolder within the certificate directory is to avoid problems when the administrator chooses to install everything on a network drive. In such a case, the certificates of the different servers have to be stored within the same folder. The subfolder and its files' access rights must be limited to the operating system user under which the node.js processes will run.</p>
                                                <h2 id="Certificateentity" data-magellan-target="Certificateentity">Certificate entity</h2>
                                                <p>The entity for certificates (<b>Administration &gt; Certificates &gt; Certificates</b>) and CA certificates (<b>Administration &gt; Certificates &gt; Certificates of Certification Authorities</b>) contain the metadata for the certificates and private keys:</p>
                                                <ul>
                                                    <li>A <b>logical name</b>, consisting of lower case letters, underscore, and dot. It acts as the key value that will be the computer name for the administrator-generated server certificates and private keys. It also acts as the CA for the administrator-generated certification authority.</li>
                                                    <li>If the certificate is administrator-generated, a <b>marker</b> has been manually installed at setup time. It cannot be changed using the GUI.</li>
                                                    <li>The <b>checksum of the certificate</b> (not for the administrator-generated certificates) to ensure integrity. It is a hidden field.</li>
                                                    <li><b>Validity of the certificates</b>.</li>
                                                    <li><b>Distinguished names of issuer and subject</b>.</li>
                                                </ul>
                                                <p>The certificate entity also contains:</p>
                                                <ul>
                                                    <li>A flag if a private key has been uploaded for that certificate.</li>
                                                    <li>An upload field for the certificate, but only the checksum of the certificate will be stored in the database.</li>
                                                    <li>An upload field for the private key.</li>
                                                    <li>An input field for the passphrase that will <b>not</b> be stored in the database.</li>
                                                </ul>
                                                <p>Some certificates are only useful for one server (for example, SSL server certificate). The corresponding instance of the host entity is placed as a related instance to the certificate instance. When there is no instance, the certificate is stored on all hosts and is transferred to servers where the certificate is missing during startup. This applies when new servers are added to the cluster, for example.</p>
                                                <p>The fields for the certificate, the private key, and the passphrase are input fields only. However, you can update the certificate alone and leave the private key unchanged. The following consistency checks will be done:</p>
                                                <ul>
                                                    <li>The certificate and private key have the correct PEM format.</li>
                                                    <li>The passphrase matches the private key.</li>
                                                    <li>The certificate matches the private key. This check is done on a server that has all the data, and not only the data which has been entered on screen. As a result, this check also occurs when the user uploads a certificate alone since the private key has already been uploaded.</li>
                                                </ul>
                                                <p>The instances of the certificate entity and the CA certificate entity (which correspond to the administrator-generated certificates) will be marked as read-only.</p>
                                                <br />
                                            </div>
                                            <div data-mc-conditions="Other.Production only">
                                                <div id="feedback-survey">
                                                    <div class="feedback-question">
                                                        <h4>Did you find this helpful?</h4>
                                                        <p>
                                                            <button class="feedback-button feedback-yes" title="Yes, this article was helpful." alt="Yes, this article was helpful.">Yes</button>&#160;<button class="feedback-button feedback-no" title="No, this article wasn't helpful." alt="No, this article wasn't helpful.">No</button></p>
                                                    </div>
                                                    <div class="feedback-reason no">
                                                        <hr />
                                                        <div class="highlightBox">
                                                            <h4>Sorry about that</h4>
                                                            <p>Why wasn't this helpful? (check all that apply)</p>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option1" value="Couldn't find what I was looking for" data-analytics-label="Could not find" />
                                                                <label for="option1">Couldn't find what I was looking for</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option2" value="Instructions confusing or unclear" data-analytics-label="Confusing or unclear" />
                                                                <label for="option2">Instructions confusing or unclear</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option3" value="Instructions didn't work" data-analytics-label="Did not work" />
                                                                <label for="option3">Instructions didn't work</label>
                                                            </div>
                                                            <div class="feedback-reason no-thanks">
                                                                <p><b>Thanks for your feedback.</b>
                                                                </p>
                                                                <h4>Want to tell us more?</h4>
                                                                <p>Send an email to our authors to leave your feedback.</p>
                                                                <!--email_off-->
                                                                <p><a href="mailto:Sage200TechnicalAuthors@sage.com?subject=Sage 200 feedback" id="feedbackEmailLink" title="Tell us if there's a problem with the information on this page." alt="Tell us if there's a problem with the information on this page." class="sageButton">Email our authors</a>
                                                                </p>
                                                                <!--/email_off-->
                                                                <p>Sorry, but we can't provide technical support from this email address. If you need assistance, then please contact our support team directly.</p>
                                                            </div>
                                                        </div>
                                                        <div id="get-in-touch" class="highlightBox colour-dark-1">
                                                            <h4>Need support?</h4>
                                                            <p>You can contact our support team on <b>0845 111 5555</b>, 9am-5pm Monday-Friday.</p>
                                                        </div>
                                                    </div>
                                                    <div class="feedback-reason yes-thanks">
                                                        <hr />
                                                        <h4>Great!</h4>
                                                        <p>Thanks for taking the time to give us some feedback.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="sage-layout-topic-panel">
                                            <div class="menu-topic-container" id="menu-on-page">
                                                <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 1280px)" class="nocontent menu _Skins_Sage_Menu_Topic_TopNav mc-component">
                                                    <li><a href="#CertificateInstallation"> Certificate Installation
</a>
                                                    </li>
                                                    <li><a href="#Introductiontocertificates">Introduction to certificates</a>
                                                    </li>
                                                    <ul>
                                                        <li><a href="#Generalprinciples">General principles</a>
                                                        </li>
                                                        <li><a href="#Certificatesmanagement">Certificates management</a>
                                                        </li>
                                                        <li><a href="#Mastercertificate">Master certificate</a>
                                                        </li>
                                                        <li><a href="#nodejscertificate">node.js certificate</a>
                                                        </li>
                                                    </ul>
                                                    <li><a href="#Simplifiedcertificateprocedure">Simplified certificate procedure</a>
                                                    </li>
                                                    <ul>
                                                        <li><a href="#Overview">Overview</a>
                                                        </li>
                                                        <li><a href="#Keygenerationprocedure">Key generation procedure</a>
                                                        </li>
                                                    </ul>
                                                    <li><a href="#Completegenerationprocedure">Complete generation procedure</a>
                                                    </li>
                                                    <ul>
                                                        <li><a href="#Generatingthecertificates">Generating the certificates</a>
                                                        </li>
                                                        <li><a href="#Distributingthecertificatestothenodejsservers">Distributing the certificates to the node.js servers</a>
                                                        </li>
                                                        <li><a href="#DistributingthepublickeystotheSageX3server">Distributing the public keys to the Sage X3 server</a>
                                                        </li>
                                                    </ul>
                                                    <li><a href="#AppendixDetailedgenerationprocedure">Appendix: Detailed generation procedure</a>
                                                    </li>
                                                    <ul>
                                                        <li><a href="#Generatingcertificates">Generating certificates</a>
                                                        </li>
                                                        <li><a href="#FirstInvocation">First Invocation</a>
                                                        </li>
                                                        <li><a href="#Creatinganewservercertificatecommandlineparametercreate">Creating a new server certificate (command line parameter "-create")</a>
                                                        </li>
                                                        <li><a href="#Renewingthevalidityofthecertificatecommandlineparameterrenewcert">Renewing the validity of the certificate (command line parameter "-renew-cert")</a>
                                                        </li>
                                                        <li><a href="#Renewingthevalidityofallcertificatescommandlineparameterrenewallcerts">Renewing the validity of all certificates (command line parameter "-renew-all-certs")</a>
                                                        </li>
                                                        <li><a href="#Generatinganewprivatekeycommandlineparameterrenewkey">Generating a new private key (command line parameter "-renew-key")</a>
                                                        </li>
                                                        <li><a href="#Changingthesubjectofthecertificatecommandlineparameterchangename">Changing the subject of the certificate (command line parameter "-change-name")</a>
                                                        </li>
                                                        <li><a href="#Showingthecontentsofthecertificatecommandlineparametershow">Showing the contents of the certificate (command line parameter "-show")</a>
                                                        </li>
                                                        <li><a href="#Showingthecontentsofallcertificatescommandlineparametershowall">Showing the contents of all certificates (command line parameter "-show-all")</a>
                                                        </li>
                                                        <li><a href="#Deletingdataforaservercommandlineparameterdelete">Deleting data for a server (command line parameter "-delete")</a>
                                                        </li>
                                                        <li><a href="#Transferringcertificateandprivatekeycommandlineparametertransfer">Transferring certificate and private key (command line parameter "-transfer")</a>
                                                        </li>
                                                        <li><a href="#Settingthepassphrasefortheprivatekeyonanodejsserver">Setting the passphrase for the private key on a node.js server</a>
                                                        </li>
                                                        <li><a href="#Detailsabouttheencryptedtransferofcertificatedata">Details about the encrypted transfer of certificate data</a>
                                                        </li>
                                                        <li><a href="#Structureofthecertificatefolder">Structure of the certificate folder</a>
                                                        </li>
                                                        <li><a href="#Certificateentity">Certificate entity</a>
                                                        </li>
                                                    </ul>
                                                </ul>
                                            </div>
                                        </div>
                                    </section>
                                    <button class="go-to-top">
                                        <!-- icon and label are inserted -->
                                    </button>
                                    <section class="sage-footer colour-dark-1" id="footer" role="contentinfo">
                                        <div class="row">
                                            <div class="small-6 medium-3 columns">
                                                <h5>Site links</h5>
                                                <p><a href="../Sitemap.htm" class="MCXref xref">Sitemap</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage links</h5>
                                                <p><a href="https://my.sage.co.uk/public/help.aspx" target="_blank" class="external">Sage Support Hub</a>
                                                </p>
                                                <p><a href="https://communities.sage.co.uk/product_support_community/" class="external" target="_blank" title="Your place to get product support from other customers and Sage experts" alt="Your place to get product support from other customers and Sage experts">Product support community</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/gdpr/" class="external" target="_blank">General Data Protection Regulation</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/legal/" class="external" target="_blank">Legal information</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Page info</h5>
                                                <p>Page updated: <span class="mc-variable Dates.DateFileSaved variable">26 fevereiro 2024</span></p>
                                                <!-- script moves last published date to here -->
                                                <div id="last-published-footer">
                                                </div>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage media</h5>
                                                <p><a href="https://www.facebook.com/sageuk" target="_blank" alt="Find us on Facebook" title="Find us on Facebook"><i class="fa fa-lg fa-facebook" aria-hidden="true"></i></a>&#160;
						<a href="https://www.linkedin.com/company/sage-software" target="_blank" alt="Find us on LinkedIn" title="Find us on LinkedIn"><i class="fa fa-lg fa-linkedin" aria-hidden="true"></i></a>&#160;
						<a href="https://twitter.com/sageuk/" target="_blank" alt="Find us on Twitter" title="Find us on Twitter"><i class="fa fa-lg fa-twitter" aria-hidden="true"></i></a>&#160;
						<a href="https://www.youtube.com/user/SageUKOfficial" target="_blank" alt="Find us on YouTube" title="Find us on YouTube"><i class="fa fa-lg fa-youtube" aria-hidden="true"></i></a></p>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- Skin type scripts -->
                                    <script type="text/javascript" src="../Resources/Scripts/SideNav-template.js" data-mc-conditions="Other.HTML5-SideNav">
                                    </script>
                                    <!-- Google Analytics -->
                                    <div data-mc-conditions="Other.Production only">
                                        <!-- Google analytics script -->
                                        <!-- Copy and paste full HTML of tracking code here for Global site tag (gtag.js) -->
                                        <!-- Remember to edit 'async' parameter to read async="" -->
                                        <!-- Analytics for events -->
                                        <script type="text/javascript" src="../Resources/Scripts/google-analytics-events.js">
                                        </script>
                                    </div>
                                    <!-- cookies -->
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.js">
                                    </script>
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.config.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>