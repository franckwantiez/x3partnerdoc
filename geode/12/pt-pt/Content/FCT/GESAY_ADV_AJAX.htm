<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="pt-pt" xml:lang="pt-pt" class="_Skins_Sage_Skin_SideNav" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="author" content="ADONIX" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="keywords" content="" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="description" content="Livraria AJAX" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="module" content="[Supervisor]" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="robots" content="all" xmlns="http://www.w3.org/1999/xhtml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" /><title>Livraria AJAX</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/Sage.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/Stylesheets/font-awesome.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: #000000 url('../../Skins/Default/Stylesheets/Images/60x60_globe_white-on-transparent_icon.png') no-repeat center center;
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link rel="stylesheet" type="text/css" media="all" href="../Resources/Images/ADXHelp_main.css" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Voltar" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Ir para conteúdo principal</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Conta</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Definições</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Terminar sessão</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Mostrar painel de navegação" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../Home.htm" alt="Logótipo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Conta</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Definições</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Terminar sessão</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Campo de pesquisa" placeholder="Pesquisar" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filtro:</span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Filtro de pesquisa" title="Todos os ficheiros" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">Todos os ficheiros</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Pesquisar" role="button" tabindex="0"><span class="invisible-label">Enviar pesquisa</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <script type="text/javascript">/*<![CDATA[*/$(document).ready(function(){
			$("#selectlang").appendTo("div.central-account-wrapper");
		});/*]]>*/</script>
                                    <div id="selectlang" class="headerlang">
                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_Language_toggle mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                            <div class="button-group-container-left">
                                                <button class="button needs-pie select-language-button" title="Alterar idioma">
                                                    <div>
                                                        <div role="img" class="button-icon-wrapper" aria-label="Alterar idioma">
                                                            <div class="button-icon"> </div>
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="sage-header-title">
                                        <img id="sage-header-logo" src="../Resources/Images/Sage_logo_green.svg" alt="Sage" /><span id="sage-header-product-name"><span id="sage-header-product"><span class="mc-variable Sage-Product.ProductName variable">X3 Warehousing</span></span></span>
                                    </div>
                                    <section class="sage-topic-body sage-layout-two-columns">
                                        <div class="sage-layout-topic-main">
                                            <div role="main" id="mc-main-content">
                                                <div id="container" xmlns="http://www.w3.org/1999/xhtml">
                                                    <div id="pageHeader">
                                                        <h1 class="g1" id="LivrariaAJAX" data-magellan-target="LivrariaAJAX"><span>Livraria AJAX</span>
                                                        </h1>
                                                    </div>
                                                    <div id="supportingText">
                                                        <div class="stdBloc"><a id="MIS_20_10"></a>
                                                            <h2 class="g1" id="Introdução" data-magellan-target="Introdução">Introdução</h2>
                                                            <p>A livraria AJAX está baseada sobre <b>prototype.js.</b> </p>
                                                            <p>Ela está constituida dos ficheiros seguintes que são carregados aiutomaticamente no navegador via o token <span style="font-family: 'Courier new';"><b>&lt;script adx="ALIBJS"&gt;&lt;/script&gt;</b></span>:</p>
                                                            <h5>prototype.js</h5>
                                                            <p>Livraria protótipo versão 1.6.0.3</p>
                                                            <h5>XtendAjax.js</h5>
                                                            <p>Gestão dos pedidos AJAX com destino do servidor XTEND</p>
                                                            <h5>XtendAjaxFlash.js</h5>
                                                            <p>Gestão dos pedidos AJAX para os componentes FLASH X3</p>
                                                            <h5>XtendAjaxMsgs.js</h5>
                                                            <p>Gestão dos pedidos AJAX para afixação das mensagens utilizador no navegador.</p>
                                                            <p>Via a função JavaScript <span style="font-family: 'Courier new';">xtdAlert(messId,p1,P2,P3,P4)</span></p>
                                                            <h5>XtendAjaxScripts.js</h5>
                                                            <p>Gestão dos pedidos AJAX para a chamada dos scripts server</p>
                                                            <h5>XtendAjaxWsvc.js</h5>
                                                            <p>Gestão dos pedidos AJAX para a chamada das interfaces XTEND (web services X3).</p>
                                                            <h5>XtendAjaxDom.js</h5>
                                                            <p>Utilitário para a gestão de um DOM XML</p>
                                                            <h5>XtendAjaxUtils.js</h5>
                                                            <p>Utilitários diversos</p>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_30_10"></a>
                                                            <h2 class="g1" id="XTENDAJAXrequest" data-magellan-target="XTENDAJAXrequest">XTENDAJAX.request</h2>
                                                            <p />
                                                            <h4>Principio</h4>
                                                            <p>A chamada de pedido AJAX está assincrono o que significa que após o envio do pedido HTTP versus o programa chamador não obtem resposta do servidor.</p>
                                                            <p>A resposta chega ao objetivo de um "certo tempo" cujo não o domina.</p>
                                                            <p>É apenas quando o objeto HTTPREQUEST recebe a resposta que chama uma função JavaScript CallBack para tratar o resultado.</p>
                                                            <p>Em standard a função CallBack não contém que a resposta HTTP como parâmetro e não permite de encontrar o contexto de chamada do pedido.</p>
                                                            <p>A classe <b>XTENDAJAX.request</b>  da livraria  <b>XtendAjax.js</b> sobrecarga a classe  <b>Ajax.Request</b> da livraria protótipo no objetivo em facilitar a utilizaação e de permitir um acesso ao contexto de chamada na função CallBack.</p>
                                                            <p><span style="font-family: 'Courier new';">XTENDAJAX.request=Class.create(Ajax.Request,{<br />&#160;&#160;&#160; <b>inicializa</b>: função(<b>aCaller</b>,<b>url</b>,<b>aContentType</b>,<b>aReturnedType</b>,<b>params</b>)<br />&#160;&#160;&#160; {&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; // Tratamento específico <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; // Chamada do pedido Ajax de prototype.js<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; $super(url,options);<br />&#160;&#160;&#160; },</span>
                                                            </p>
                                                            <h5>aCaller</h5>
                                                            <p>Objet appelant (voir § suivant)</p>
                                                            <h5>url</h5>
                                                            <p>Url de chamada do web service REST XTEND</p>
                                                            <h5>aContentType</h5>
                                                            <p>ContentType dos dados enviados - null autorizado</p>
                                                            <ul>
                                                                <li>application/xml<br />-&gt; params contient une String XML</li>
                                                                <li>application/json<br />-&gt; params contém uma String JSON</li>
                                                                <li>application/x-www-form-urlencoded<br />-&gt; params contient un Hash ($H prototype.js)</li>
                                                            </ul>
                                                            <h5>aReturnedType</h5>
                                                            <p>ContentType dos dados enviados - null autorizado</p>
                                                            <h5>Param.</h5>
                                                            <p>Dados enviados no corpo do pedido - null autorizado</p>
                                                            <p><b>Todas as classes e funções são anexadas ao objeto XTENDAJAX.</b>
                                                            </p>
                                                            <h4>Objeto chamador</h4>
                                                            <p>É o objecto que chama o pedido e que gera o contexto de chamada cujo se terá necessidade para tratar a resposta.</p>
                                                            <p>Este objeto deve implementar os métodos seguintes para tratar as diferentes listas da resposta.</p>
                                                            <p><span style="font-family: 'Courier new';">&#160;&#160;&#160; //------------------------------------------------<br />&#160;&#160;&#160; //Chamada se HTTP estatuto é igual = 200<br />&#160;&#160;&#160; //resposta : Classe Ajax.Response<br />&#160;&#160;&#160; <b>onSuccess</b>:function(response){<br />&#160;&#160;&#160; <br />&#160;&#160;&#160; },<br />&#160;&#160;&#160; //------------------------------------------------<br />&#160;&#160;&#160; //Chamada se HTTP estatuto é diferente de 200<br />&#160;&#160;&#160; //pedido&#160;&#160; : Classe Ajax.Request<br />&#160;&#160;&#160; //exceção: String ou&#160;classe Error<br />&#160;&#160;&#160; <b>onFailure</b>:function(request, exception){<br />&#160;&#160;&#160; <br />&#160;&#160;&#160; },<br />&#160;&#160;&#160; //------------------------------------------------<br />&#160;&#160;&#160; //Chamada sobre exceção JavaScript<br />&#160;&#160;&#160; //pedido&#160;&#160; : Classe Ajax.Request<br />&#160;&#160;&#160; <b>onException</b> :function(response,headerJSON){<br />&#160;&#160;&#160; <br />&#160;&#160;&#160; }</span>
                                                            </p>
                                                            <p>As funções <b>onFailure</b> e <b>onException</b> são facultativas.</p>
                                                            <p>Se o objeto chamador não os implementa as funções de afixação <b>XTENDAJAX.displayException</b> e <b>XTENDAJAX.displayFailure</b> serão chamados.</p>
                                                            <h5>Exemplos:</h5>
                                                            <p>O exemplo a seguir cchama o web service REST identificado pelo paâmetro aURL com os dados aData e afixa a resposta.</p>
                                                            <p><span style="font-family: 'Courier new';">var wClassCaller=Class.create({<br />&#160;&#160;&#160; <b>onSuccess</b>:function(response){<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; response.xtdDisplay();<br />&#160;&#160;&#160; },<br />&#160;&#160;&#160; <b>call</b>:function(aURL,aData){<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; new XTENDAJAX.request(this,aURL,null,null,aData);<br />&#160;&#160;&#160; }<br />});<br />var wURL="http://ecfdalbopro:28980/xtend/ajax/SOLPAIE/PAIE/FDBTEST/INT/XTDLOGIN";<br />var wInput={<br />&#160;&#160;&#160; _JSONOPT:{OPTIONS:"nogroups"},<br />&#160;&#160;&#160; AXUSERCODE:"DIS001",<br />&#160;&#160;&#160; AXPWD:"adonix"<br />};<br />new wClassCaller().call(wURL,wInput);</span>
                                                            </p>
                                                            <p>Na prática utiliza-se as classes da classe <span style="font-family: 'Courier new';"><b>XTENDWSVC.classCallerSpg</b></span> da livraria <span style="font-family: 'Courier new';"><b>XtendAjaxWsvc.js</b></span> que facilitam o cálculo de url e a manipulação dos dados.</p>
                                                            <h4>Objet "response"</h4>
                                                            <p>O parâmetro <b>resposta</b> está instanciado a partir da classe <span style="font-family: 'Courier new';">Ajax.response</span> à qual se acrescentou os métodos especificos para manipular a resposta do servidor XTEND (<span style="font-family: 'Courier new';">XTENDAJAX.xtdExtendResponse</span>). </p>
                                                            <p><span style="font-family: 'Courier new';">{<br />&#160;&#160;&#160; //-------------------------------------------------<br />&#160;&#160;&#160; // Afixa o conteúdo da resposta ao formato texto (XTENDAJAX.msgBox)<br />&#160;&#160;&#160; <b>xtdDisplay</b>:function(),<br />&#160;&#160;&#160; //-------------------------------------------------<br />&#160;&#160;&#160; // Quadro que contém as mensagens de erro<br />&#160;&#160;&#160;<b> xtdMsgErr:,</b><br />&#160;&#160;&#160; // Reenvia verdade se a resposta comporta um erro aplicativo X3<br />&#160;&#160;&#160;<b> xtdHasX3Error</b>:function(),<br />&#160;&#160;&#160; //-------------------------------------------------<br />&#160;&#160;&#160; // Quadro que contém as mensagens warning<br />&#160;&#160;&#160; <b>xtdMsgWarning:,</b><br />&#160;&#160;&#160; //-------------------------------------------------<br />&#160;&#160;&#160; // Quadro que contém as mensagens de informação<br />&#160;&#160;&#160; <b>xtdMsgInfo:,</b><br />&#160;&#160;&#160; //-------------------------------------------------<br />&#160;&#160;&#160; // Quadro que contém todas as mensagens<br />&#160;&#160;&#160; <b>xtdMsgAll:,</b><br />&#160;&#160;&#160; //-------------------------------------------------<br />&#160;&#160;&#160; // ContenType de la réponse<br />&#160;&#160;&#160; <b>xtdContentType:,</b><br />&#160;&#160;&#160; //-------------------------------------------------<br />&#160;&#160;&#160; // True si ContentType=text/plain<br />&#160;&#160;&#160; <b>xtdIsText</b>:function()<b>,</b><br />&#160;&#160;&#160; //-------------------------------------------------<br />&#160;&#160;&#160; // True si ContentType=text/html<br />&#160;&#160;&#160;<b> xtdIsHtml</b>:function(),<br />&#160;&#160;&#160; //-------------------------------------------------<br />&#160;&#160;&#160; // True si ContentType=application/xml<br />&#160;&#160;<b>&#160; xtdIsXml</b>:function(),<br />&#160;&#160;&#160; //-------------------------------------------------<br />&#160;&#160;&#160; // True si ContentType=application/json<br />&#160;&#160;<b>&#160; xtdIsJson:</b>function(),<br />&#160;&#160;&#160; <br />&#160;&#160;&#160; /*------------------ Réponse XML ------------------*/<br />&#160;&#160;&#160; //Avalia a resposta e reenvia um DOM XML (ver XtendAjaxDom.js)<br />&#160;&#160;&#160; <b>xtdEvalXML,</b><br />&#160;&#160;&#160; //Contient le DOM XML créé par xtdEvalXML<br />&#160;&#160;&#160; <b>xtdResponseXML:,</b><br />&#160;&#160;&#160; <br />&#160;&#160;&#160; /*------------------ Reposta JSON------------------*/<br />&#160;&#160;&#160; //Avalia a resposta e reenvia um objeto JSON que representa a resposta<br />&#160;&#160;&#160; <b>xtdEvalJSON</b>:function(),<br />&#160;&#160;&#160; //Contém o objeto JSON criado por xtdEvalJSON<br />&#160;&#160;&#160; <b>xtdResponseJSON:,</b><br />&#160;&#160;&#160; //Reenvia un Hash ($H) criado a partir de um quadro de chaves e de valores<br />&#160;&#160;&#160; <b>xtdHash</b>:function(aKeyArray,aValArray),<br />&#160;&#160;&#160; <br />&#160;&#160;&#160; /*------- Resposta WEB SERVICE SOUS-PROGRAMME -------*/<br />&#160;&#160;&#160; //Avalia a resposta a um sub-programa<br />&#160;&#160;&#160; //-&gt; Acrescenta os métodos específicos<br />&#160;&#160;&#160; <b>xtdEvalJSONSpg</b>:function(),<br />&#160;&#160;&#160; //Reenvia o valor do parâmetro AXPAR<br />&#160;&#160;&#160; <b>AXPAR</b>:function(aCode),<br />&#160;&#160;&#160; //Reenvia o valor do parâmetro AXPAR como um inteiro<br />&#160;&#160;&#160; <b>AXPARInt</b>:function(aCode,aDefValue),<br />&#160;&#160;&#160; <br />&#160;&#160;&#160; /*------ Resposta SOUS-PROGRAMME ACCES DONNEES -------*/&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160; //Avalia a resposta a um web service sub-programa acesso dados<br />&#160;&#160;&#160; //-&gt; Acréscimo os métodos específicos<br />&#160;&#160;&#160; <b>xtdEvalJSONSpgAccess</b>:function(),<br />&#160;&#160;&#160; //Número de registos pedidos <br />&#160;&#160;&#160; <b>askedRecords</b>:function(),<br />&#160;&#160;&#160; //Número total de records<br />&#160;&#160;&#160; <b>totalRecords</b>:function(),<br />&#160;&#160;&#160; //Número de records reenviados<br />&#160;&#160;&#160; <b>returnedRecords</b>:function(),<br />&#160;&#160;&#160; //Rang (1-N) do primeiro registo<br />&#160;&#160;&#160; <b>startRank</b>:function(),<br />&#160;&#160;&#160; //Verdade se existem registos seguintes - Falso se paginação terminada<br />&#160;&#160;&#160; <b>hasNext</b>:function(),<br />&#160;&#160;&#160; <br />&#160;&#160;&#160; /*--------- Resposta WEB SERVICE OBJET X3 ----------*/<br />&#160;&#160;&#160; //Avalia a resposta a um web service objet X3<br />&#160;&#160;&#160; //-&gt; Acrescenta os métodos específicos<br />&#160;&#160;&#160; <b>xtdEvalJSONObject</b>:function(),<br />&#160;&#160;&#160; //Grupo técnico ADXTEC<br />&#160;&#160;&#160; <b>adxADXTEC</b>:function(aField),<br />&#160;&#160;&#160; //Timestamp de objet X3<br />&#160;&#160;&#160; <b>adxTimeStamp</b>:function(),<br />&#160;&#160;&#160; //UserCode X3 que modificaou um objeto em último<br />&#160;&#160;&#160; <b>adxUser</b>:function(),<br />}</span>
                                                            </p>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_40_10"></a>
                                                            <h2 class="g1" id="Webservicesinterface" data-magellan-target="Webservicesinterface">Web services interface</h2>
                                                            <p />
                                                            <h4>Introdução</h4>
                                                            <p>A livraria <b>XtendAjaxWsvc.js</b> coloca à disposição do programador um conjunto de clase para facilitar a chamada das <a href="GESAY_ADV_REST.htm">web services REST</a> d'XTEND de tipo <a href="GESAYI.htm">interface</a>.</p>
                                                            <p style="MARGIN: 0cm 0cm 0pt;"><span style="COLOR: black;">O pedido AJAX desencadeia a execução de um web service identificado pela ficha interface e trata diretamente o resultado. O servidor XTEND não faz que chamar o <a href="GESAY_GEN_WSVC.htm">web service X3</a> e reenvia a resposta.</span> </p>
                                                            <p>Todas as classes e funções são anexadas ao objeto  <b>XTENDWSVC</b></p>
                                                            <h4>Utilitários</h4>
                                                            <p><span style="font-family: 'Courier new';">/*----------------- TESTES -----------------*/<br />//Chamada ao interface aInterfaceId com os dados aXmlData<br />// Afixa o resultado<br /><b>testSpgXML:</b>function(aInterfaceId,aXmlData),<br />//---------------------------------------------<br />//Chamada interface aInterfaceId com os dado aJSONData<br />// Afixa o resultado<br /><b>testSpgJSON:</b>function(aInterfaceId,aJSONData),</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*----------------- CALL ESTÁTICA -----------------*/<br />//Chamada de interface sob programa aInterfaceId com os dados aData<br />//As funções CallBack statiques são pasadas em parâmetro <br /><b>runSpg</b>:function(aInterfaceId,aData,onSuccess,onFailure),<br />//---------------------------------------------<br />//Idem runSpg com os dados JSON em devolução<br /><b>runSpgJSON</b>:function(aInterfaceId,aData,onSuccess,onFailure),<br />//---------------------------------------------<br />//Idem runSpg com os dados XML em retorno<br /><b>runSpgXML</b>:function(aInterfaceId,aData,onSuccess,onFailure),</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*----------------- PARAMETROS DE CHAMADA -----------------*/<br />//Reenvia um objeto parâmetro de base XTENDWSVC.classParam<br />//aJSONOptions : opções JSON (facultativo)<br /><b>newParam</b>:function (aJSONOptions),<br />//---------------------------------------------<br />//Reenvia um objeto parâmetro para a chamada de um web service objeto X3<br />//Classe XTENDWSVC.newParamXtdObject<br />//aTimeStampX3 : O timestamp X3 de objeto (facultativo)<br /><b>newParamXtdObject</b>:function (aTimeStampX3,aJSONOptions),<br />//---------------------------------------------<br />//Reenvia um objeto parâmetro para uma opção de chamada de um web service sub-programa<br />//Classe XTENDWSVC.classParamXtdSpg<br /><b>newParamXtdSpg</b>:function (aJSONOptions),<br />//---------------------------------------------<br />//Reenvia um objeto parâmetro para a chamada de em sub-programa "acesso aos dados"<br />//Classe XTENDWSVC.classParamXtdSpgAccess<br />//aNbLines : número máximo de registos pedidos<br />//aStartAt : fila do 1º registo<br /><b>newParamXtdSpgAccess</b>:function (aNbLines,aStartAt,aJSONOptions),<br />//---------------------------------------------<br />//Reenvia um objeto parâmetro para a chamada de uma lista de esquerda X3<br />//Classe Hash (quadro chave/valor)<br />//aNbLinesReturned : número de linhas pedidas<br /><b>newParamQuery</b>:function(aNbLinesReturned,aJSONOPtions),<br />//---------------------------------------------<br />//Reenvia um objeto parâmetro de tipo chave<br />//Classe Hash (quadro chave/valor)<br /><b>newParamRead</b>:function(aJSONOPtions),<br />//---------------------------------------------<br />//Verifica que aHash está bem parametrizada por um query<br />//Presença da chave "_COUNT" que contém o número de linhas pedidas<br /><b>checkQueryParam</b>:function(aHash,aReturnedCount),</span>
                                                            </p>
                                                            <h4>Classes parâmetros</h4>
                                                            <h5>XTENDWSVC.classParam</h5>
                                                            <p>Classe de bases dos parâmetros.</p>
                                                            <p><span style="font-family: 'Courier new';">XTENDWSVC.classParam=Class.create({<br />&#160;&#160;&#160; /---------------------------------------<br />&#160;&#160;&#160; //aJSONOptions : Opções JSON <br /><b>inicializa</b>: function(aJSONOptions),<br />&#160;&#160;&#160; /---------------------------------------<br />&#160;&#160;&#160; //Reenvia as opções JSON<br />&#160;&#160;&#160; <b>opções</b>:function(),<br />&#160;&#160;&#160; /---------------------------------------<br />&#160;&#160;&#160; //Acrescenta um parâmetro aCode avec la valeur aCode<br />&#160;&#160;&#160; <b>add</b>:function(aCode,aValue),<br />&#160;&#160;&#160; /---------------------------------------<br />&#160;&#160;&#160; //Reenvia o valor do parâmetro aCode<br />&#160;&#160;&#160; <b>get</b>:function(aCode)<br />)}</span>
                                                            </p>
                                                            <h5>XTENDWSVC.classParamXtdSpg</h5>
                                                            <p>Classe de parâmetros de chamada de um web service sub-programa que herda de XTENDWSVC.classParam.</p>
                                                            <p><span style="font-family: 'Courier new';">XTENDWSVC.classParamXtdSpg=Class.create(XTENDWSVC.classParam,{<br />&#160;&#160;&#160; /---------------------------------------<br />&#160;&#160;&#160; //aJSONOptions : Opções JSON <br /><b>inicializa</b>: function(OptionsJSON),<br />&#160;&#160;&#160; /---------------------------------------<br />&#160;&#160;&#160; //Acrescenta um parâmetro AXPAR<br />&#160;&#160;&#160; <b>addAXPAR</b>:function(aCode,aValue)&#160;&#160;&#160;&#160; <br />});</span>
                                                            </p>
                                                            <h5>XTENDWSVC.classParamXtdSpgAccess</h5>
                                                            <p>Classe de parâmetros de chamada de um web service sub-programa de "tipo de dados" que herda de XTENDWSVC.classParamXtdSpgAccess</p>
                                                            <p><span style="font-family: 'Courier new';">XTENDWSVC.classParamXtdSpgAccess=Class.create(XTENDWSVC.classParamXtdSpg,{<br />&#160;&#160;&#160; /---------------------------------------<br />&#160;&#160;&#160; //aJSONOptions : Options JSON<br />&#160;&#160;&#160; //aNbLines : número máximo de registos pedidos<br />//aStartAt : fila do 1º registo<br />     //Atualiza os parâmetros '$REC_STARTAT','$TOTAL_COUNT','$RET_COUNT','$HAS_NEXT'<br />&#160;&#160;&#160; <b>inicializa</b>: function(aNbLines,aStartAt,aJSONOptions),<br />});</span>
                                                            </p>
                                                            <h5>XTENDWSVC.classParamObject</h5>
                                                            <p>Classe de paramètre d'appel d'un web service objet X3 qui hérite de XTENDWSVC.classParam.</p>
                                                            <p><span style="font-family: 'Courier new';">XTENDWSVC.classParamObject=Class.create(XTENDWSVC.classParam,{<br />&#160;&#160;&#160; /---------------------------------------<br />&#160;&#160;&#160; //aJSONOptions : Options JSON<br />&#160;&#160;&#160; //aTimeStampX3 : String - TimeStamp de objeto X3 (pode ser nula ou vazia)<br />&#160;&#160;&#160; //Acréscimo o parâmetro WW_MODSTAMP no grupo ADXTEC com o valor aTimeStamp<br />&#160;&#160;&#160; <b>inicializa</b>: function(aTimeStampX3,aJSONOptions),<br />});</span>
                                                            </p>
                                                            <h4>Classe XTENDWSVC.classJsonOpt</h4>
                                                            <p>Classe que representa as opções JSON.</p>
                                                            <p><span style="font-family: 'Courier new';">//---------------------------------------<br />//Ativa a opção noGroups<br /><b>noGroups</b>:function(),<br />//---------------------------------------<br />//Ativa a opção noRows<br /><b>noRows</b>:function(),<br />//---------------------------------------<br />//Ativa a opção noLabels<br /><b>noLabels</b>:function(),<br />//---------------------------------------<br />//Ativa a opção noClobs<br /><b>noClobs</b>:função(),<br />/---------------------------------------<br />//Atualiza a lista dos grupos a excluir<br />//aValue : String or Array of string<br /><b>excludeGrp</b>:function(aValue),<br />//---------------------------------------<br />//Atualiza a lista de grupos a incluir<br /><b>includeGrp</b>:function(aValue),<br />//---------------------------------------<br />//Atualiza a lista dos campos a excluir<br /><b>excludeFld</b>:function(aValue),<br />//---------------------------------------<br />//Atualiza a lista dos campos a incluir<br /><b>includeFld</b>:function(aValue),</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*------------- EXEMPLO -------------*/<br />var wOpts=new XTENDWSVC.classJsonOpt().noGroups().includeFld(["SOHNUM""ITMREF","QTY"]);</span>
                                                            </p>
                                                            <h4>Classe XTENDWSVC.classCaller</h4>
                                                            <p>Trata-se da classe de base utilizada para chamar um web service REST.</p>
                                                            <p><b>Por defeito esta classe não permite colocar vários pedidos simultaneamente e bloca as tentativas de chamadas múltiplas.</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*---------------- MÉTODOS PRINCIPAIS ----------------*/<br />//Construtor<br />//aInterfaceId : ID de interface XTEND<br />//Facultativo&#160;&#160; : pode passar as funções CallBack estáticos em parâmetro<br />//				se não implementado na classe<br />//			-&gt;		 aInterfaceId,onSuccess,onFailure,onException<br /><b>inicializa</b>:function(aInterfaceId),<br />//-------------------------------------------------------<br />//Verifica se a chamada em curso e desencadeada o envio do pedido<br />//aUrl&#160;&#160;&#160;&#160;&#160;&#160;&#160; :		 Url do serviço<br />//aData&#160;&#160;&#160;&#160;&#160;&#160; : Dados<br />//aConten Tipo : ContentType<br /><b>exec</b>:function(aUrl,aData ,aContenType), </span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*-------- MÉTODO CALLBACK A SOBRECARREGAR OBRIGATORIAMENTE ----------*/<br />// HTTP STATUS=200<br />// !! O método filhos deve chamar $super (resposta) para posicionar<br />// o indicador de chamada a falso.<br /><b>onSuccess</b>:function(resposta),</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*--------- METODO CALLBACK A SOBRECARREGAR EVENTUALMENTE ----------*/<br />// EXCEPTION JAVASCRIPT<br />//Por defeito este método afixa a excepção<br />// !! O método filhos deve chamar $super(request,exception,true) <br />//&#160;&#160;&#160; para posicionar o indicador de chamada&#160;a falso sem afixar o resultado<br /><b>onException</b>:function(request,exception,aIsOverriden),<br />//-------------------------------------------------------<br />// HTTP STATUS!=200<br />//Por defeito este método afixa a causa de erro<br />// !! O método filhos deve chamar $super(request,headerJSON,true) <br />//&#160;&#160;&#160; para posicionar o indicador de chamada a falso sem afixar o resultado<br /><b>onFailure</b>:function(response,headerJSON,aIsOverriden),</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*--------------------- FORMATOS --------------------*/<br />//Fixa aplicação/json como tipo de dados em retorno<br />//Tipo por defeito<br /><b>setReturnJSON</b>:function(),<br />//-------------------------------------------------------<br />//Fixa aplicação como tipo de dados em retorno<br /><b>setReturnXML</b>:function(),<br />//-------------------------------------------------------<br />//Verdade se os dados XML em retorno<br /><b>returnXML</b>:function(),<br />//-------------------------------------------------------<br />//Verdade se dados JSON em devolução<br /><b>returnJSON</b>:function(),</span>
                                                            </p>
                                                            <p>
                                                                <br /><span style="font-family: 'Courier new';">/*--------------------- DIVERSOS ---------------------*/<br />//posto efetivamente o pedido versus o servidor se sem chamada em curso<br /><b>sendRequest</b>:function(aUrl,aDataObject,aContenType)<br />//-------------------------------------------------------<br />//Reenvia o id de interface<br /><b>getId</b>:function(),</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*------------- GESTÃO CHAMADAS MÚLTIPLAS -------------*/<br />//A sobrecarregar se pretende desbloquar as chamadas múltiplas<br />//aBusy : Verdade se chamada em curso<br />//Reenvio para autorizar a chamada de web service<br /><b>doSendRequest</b>:function(aBusy),<br />//-------------------------------------------------------<br />//Atualização indicador de ocupação<br /><b>setBusy</b>:function(aYes),<br />//-------------------------------------------------------<br />//Verdade se chamada em curso<br />isBusy:function(),</span>
                                                            </p>
                                                            <h4>Classe XTENDWSVC.classCallerSpg</h4>
                                                            <p>Trata-se da classe de base utilizada para chamar um web service REST sub-programa</p>
                                                            <p><span style="font-family: 'Courier new';">XTENDWSVC.classCallerSpg=Class.create(XTENDWSVC.classCaller,{<br />&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; //Construtor<br />&#160;&#160;&#160; <b>inicialização</b>:function(aInterfaceId),<br />&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; //Exécute la requête avec les données aData<br />&#160;&#160;&#160; //Valeur autorisée pour aData<br />&#160;&#160;&#160; // -null ou undefined -&gt; this.exec()<br />&#160;&#160;&#160; // -String -&gt; this.exec(aString,'text/plain') <br />&#160;&#160;&#160; // -Hash&#160;&#160; -&gt; this.runFORMENCODED(aData) <br />&#160;&#160;&#160; // -Autre&#160; -&gt; this.runJSON(Object.toJSON(aData)) <br />&#160;&#160;&#160; <b>run</b>:function(aData), <br />&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; //Exécute la requête avec les données XML aXML<br />&#160;&#160;&#160; <b>runXML</b>:function(aXML),<br />&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; //Exécute la requête avec les données JSON aJSON<br />&#160;&#160;&#160; // JSON : String JSON ou objeto JavaScript (classe parâmetro)<br />&#160;&#160;&#160; <b>runJSON</b>:function(aJSON),&#160;&#160;&#160; <br />&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; //Executa o pedido com o quadro de chaves/valores aHash<br />&#160;&#160;&#160; //aHash representa o conteúdo de um formulário &lt;form&gt;<br />&#160;&#160;&#160; <b>runFORMENCODED</b>:function(aHash),<br />});</span>
                                                            </p>
                                                            <h5>Exemplos:</h5>
                                                            <p>O exemplo a seguir chamada de interface XTDLOGIN do estabelecimento corrente e afixa a resposta.</p>
                                                            <p><b>Call Sub-Programa</b> </p>
                                                            <p><span style="font-family: 'Courier new';">var wClassCaller=Class.create(XTENDWSVC.classCallerSpg,{<br />&#160;&#160; //Construtor facultativo se não há outros parâmetros que aInterfaceId<br />&#160;&#160; <b>initializa</b>:function($super,aInterfaceId){<br />&#160;&#160;&#160;&#160;&#160; $super(aInterfaceId);<br />&#160;&#160; },<br />&#160;&#160; //Método obrigatório para tratar a resposta<br />&#160;&#160;<b>onSuccess</b>:function(resposta){<br />&#160;&#160;&#160;&#160;&#160; responstae.xtdDisplay();<br />&#160;&#160; }<br />});<br />var wJSONOpts=new XTENDWSVC.classJsonOpt().noGroups();<br />var wParams=new XTENDWSVC.classParamXtdSpg(wJSONOpts);<br />wParams.add("AXUSERCODE","DIS001");<br />wParams.add("AXPWD","adonix");<br />new wClassCaller("XTDLOGIN").run(wParams);</span>
                                                            </p>
                                                            <p><b>Resultado</b>
                                                            </p>
                                                            <p>URL :<br /><span style="font-family: 'Courier new';">http://ecfdalbopro:28980/xtend/ajax/SOLPAIE/PAIE/FDBTEST/INT/XTDLOGIN</span></p>
                                                            <p>Contente-Tipo :<br /><span style="font-family: 'Courier new';">aplicação/json;charset=utf-8</span></p>
                                                            <p>X3 INFORMAÇÃO MENSAGENS :<br /><span style="font-family: 'Courier new';">Você está bem conectado com o código utilizador DIS001</span></p>
                                                            <p><span style="font-family: 'Courier new';">{<br />"AXUSERCODE":"DIS001",<br />"AXPWD":"adonix",<br />"AXUSERPROF":"B2B",<br />"AX3SOL":["SOLPAIE","X3V5","XTENDV2"],<br />"AX3FLDR":["PAIE","X3TESTV5","DEMOFRA"],<br />"AX3LANG":["FRA","FRA","FRA"],<br />"AX3USER":["XTEND","JPJ1","OG"],<br />"AX3PWD":["adonix","",""],<br />"AXLOGCOD":["NAME","FIRSTNAME","EMAIL","PHONE"],<br />"AXLOGVAL":["DAL BO","Frédéric","</span><span style="font-family: 'Courier new';">frdal@sage.com","00102030405</span><span style="font-family: 'Courier new';">"],<br />"SHIPADR1":["Sage Lyon new","Sage MGE","Sage PARIS"],<br />"SHIPCITY":["LYON","Echirolles","PARIS"],<br />"SHIPZIP":["69443","38130","75834"]<br />}</span>
                                                            </p>
                                                            <h4>Classe XTENDWSVC.classCallerObject</h4>
                                                            <p>Trata-se da classe de base utilizada para chamar um web service REST objet X3.</p>
                                                            <p><span style="font-family: 'Courier new';">XTENDWSVC.classCallerObject=Class.create(XTENDWSVC.classCaller,{<br />&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; //Construtor<br />&#160;&#160;&#160; <b>inicializa</b>:function(aInterfaceId),<br />&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; //Méthode save<br />&#160;&#160;&#160; //aData : Dados ao formato JSON ou XML<br /><b>actCreate</b>: função (aData),<br />  //-------------------------------------------------------<br />   //Método Read<br /> Hash que contém as chaves de objeto<br />&#160;&#160;&#160; <b>actRead</b>:function(aHashKeys),<br />&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; //Método&#160;apagar<br />&#160;&#160;&#160; //aHashKeys : Hash que contém as chaves de objeto<br />&#160;&#160;&#160; <b>actDelete</b>:function(aHashKeys),<br />&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; //Método&#160;modificar<br />&#160;&#160;&#160; //aHashKeys : Hash que contém as chaves de objeto<br />&#160;&#160;&#160; //aData&#160;&#160;&#160;&#160; : Dados ao formato JSON ou XML<br /><b>actUpdate</b>: função (aHashKeys,aData),<br />    //-------------------------------------------------------<br />  //Ação de code aCode<br />   //aCode : Código de ação<br />    //aHashKeys : Hash que contém as chaves de objecto<br /><b>actOtherKey</b>: function(aCode,aHashKeys),<br />  //-------------------------------------------------------<br />//Ação de código aCode<br />    //aCode&#160;&#160;&#160;&#160; : Código da ação<br />&#160;&#160;&#160; //aData&#160;&#160;&#160;&#160; : Dados ao formato JSON ou XML<br />&#160;&#160;&#160; <b>actOtherData</b>:function(aCode,aData),<br />&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; //Ação query lista esquerda<br />&#160;&#160;&#160; //aHashKeys&#160;&#160;&#160;&#160;&#160; : Hash que contém as chaves para a seleção<br />&#160;&#160;&#160; //aReturnedCount : Opcional - Número de linhas pedidos <br /><b>actQuery</b> : function(aHashKeys,aReturnedCount),<br />});</span>
                                                            </p>
                                                            <h5>Exemplos:</h5>
                                                            <p>O exemplo a seguir chamada de interface objeto X3 OBJAYZ (objeto AYZ) do estaebelecimento em criação e afixa a resposta.</p>
                                                            <p><b>Call Objet</b> </p>
                                                            <p><span style="font-family: 'Courier new';">var wClassCaller=Class.create(XTENDWSVC.classCallerObject,{<br />&#160; <b>onSuccess</b>:function(response){<br />&#160;&#160;&#160; response.xtdDisplay();<br />&#160; }<br />});<br />var wJSONOpts=new XTENDWSVC.classJsonOpt().noGroups();<br />var wParams=new XTENDWSVC.classParamObject(null,wJSONOpts);<br />wParams.add("TTL","Título do formulário");<br />wParams.add("MAICOD","</span><span style="font-family: 'Courier new';">frdal@sage.com</span><span style="font-family: 'Courier new';">");<br />wParams.add("CMT","Comentário");<br />new wClassCaller("OBJAYZ").actCreate(wParams);</span>
                                                            </p>
                                                            <p><b>Resultado</b>
                                                            </p>
                                                            <p>URL :<br /><span style="font-family: 'Courier new';">http://ecfdalbopro:28980/xtend/ajax/SOLPAIE/PAIE/FDBTEST/INT/OBJAYZ/S</span></p>
                                                            <p>Content-Type :<br /><span style="font-family: 'Courier new';">application/json;charset=utf-8</span></p>
                                                            <p>X3 INFORMAÇÃO MENSAGENS :<br /><span style="font-family: 'Courier new';">Formulário criado</span></p>
                                                            <p><span style="font-family: 'Courier new';">{<br />"FRMCOD":"0902000005",<br />"FCYCOD":"FDBTEST",<br />"ZFCYCOD":"Estab.de teste fdalbo",<br />"TYP":"OTH",<br />"ZTYP":"Diversos",<br />"STATUT":"1",<br />"STATUT_LBL":"A tratar",<br />"TTL":"Título do formulário",<br />"MAICOD":"</span><span style="font-family: 'Courier new';">frdal@sage.com</span><span style="font-family: 'Courier new';">",<br />"CREDAT":"20090227",<br />"CREHEURE":"184431",<br />"CMT":"Comentário",<br />"PARCOD":[],<br />"PARVAL":[],<br />"WW_MODSTAMP":"000000000000",<br />"WW_MODUSER":""<br />}</span>
                                                            </p>
                                                            <p /><span style="font-family: 'Courier New';"></span>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_50_10"></a>
                                                            <h2 class="g1" id="Webservicesscript" data-magellan-target="Webservicesscript">Web services script</h2>
                                                            <p />
                                                            <h4>Introdução</h4>
                                                            <p>A livraria <b>XtendAjaxWsvc.js</b> coloca à disposição do programador um conjunto de clase para facilitar a chamada das web services REST de tipo  <a href="GESAY_ADV_SCRIPTING.htm">script serveur</a>. </p>
                                                            <p>O scipt que se executa sobre o servisor XTEND acede ao contaxto da sessão via interface <b>IXtdAjaxScriptContext</b>. </p>
                                                            <h4>Classe XTENDSCRIPTS.classCaller</h4>
                                                            <p>Trata-se da classe de base utilizada para chamar um web service script serveur.</p>
                                                            <p>Esta classe funciona segundo o mesmo princípio que os web services interface mas os parâmetros que passam ao script servidor são livres,</p>
                                                            <p>São lidos via a função <b>XTD_CTX.getHttpBody</b> e o conteúdo está interpretado pelo script ele mesmo. </p>
                                                            <p>Assim, o formato da resposta reenviada está livre</p>
                                                            <p>É a função print que escreve directamente os dados (String) num buffer que será reenviado versus o cliente.</p>
                                                            <p>A função  <b>XTD_CTX.setHttpContenType</b> permite gerar o ContentType da resposta.</p>
                                                            <p>Por exemplo, o script para reenviar do HTML que será inserido dinamicamente na página.</p>
                                                            <h5>Métodos</h5>
                                                            <p><span style="font-family: 'Courier new';">/*---------------- MÉTODOS PRINCIPAIS ----------------*/<br />//Construtor<br />//aScriptId : Caminho relativo do script por relação à raíz dos scripts<br />//Facultativo : pode-se passar as funções CallBack estáticas em parâmetro<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; se não implementada na classe<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; -&gt; aScriptId,onSuccess,onFailure,onException<br /><b>inicializa</b>:function(aScriptId), <br />//-------------------------------------------------------<br />//Executa os scripts com aParams como parâmetro<br />//O conteúdo de aParams está livre e depende do script chamado<br /><b>run</b>:function(aParams),&#160; </span>
                                                            </p>
                                                            <p>
                                                                <br /><span style="font-family: 'Courier new';">/*-------- MÉTODO CALLBACK A SOBRECAREGAR OBRIGATORIAMENTE ----------*/<br />// HTTP STATUS=200<br />// !! O método filhos deve chamar $super (resposta) para posicionar<br />// o indicador de chamada a falso.<br /><b>onSuccess</b>:function(resposta),</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*--------- METODO CALLBACK A SOBRECARREGAR EVENTUALMENTE ----------*/<br />// EXCEPTION JAVASCRIPT<br />//Por defeito este método afixa a excepção<br />// !! O método filhos deve chamar $super(request,exception,true) <br />//&#160;&#160;&#160; para posicionar o indicador de chamada&#160;a falso sem afixar o resultado<br /><b>onException</b>:function(request,exception,aIsOverriden),<br />//-------------------------------------------------------<br />// HTTP STATUS!=200<br />//Por defeito este método afixa a causa de erro<br />// !! O método filhos deve chamar $super(request,headerJSON,true) <br />//&#160;&#160;&#160; para posicionar o indicador de chamada a falso sem afixar o resultado<br /><b>onFailure</b>:function(response,headerJSON,aIsOverriden),</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*------------- GESTÃO CHAMADAS MÚLTIPLAS -------------*/<br />//A sobrecarregar se pretende desbloquar as chamadas múltiplas<br />//aBusy : Verdade se chamada em curso<br />//Reenvio verdade para autorizar a chamada de web service<br /><b>doSendRequest</b>:function(aBusy),<br />//-------------------------------------------------------<br />//Atualização indicador de ocupação<br /><b>setBusy</b>:function(aYes),<br />//-------------------------------------------------------<br />//Verdade se chamada em curso<br /><i>isBusy</i>:function(),</span>
                                                            </p>
                                                            <h4>Class XTENDSCRIPTS.classUpdater</h4>
                                                            <p>Esta classe permite atualizar um elemento do DOM HTML (div, span...) à recepção da resposta do web service se este reenvia uma resposta <span style="font-family: 'Courier new';"> HTML text/html</span>.</p>
                                                            <p><span style="font-family: 'Courier new';">XTENDSCRIPTS.classUpdater=Class.create(XTENDSCRIPTS.classCaller,{</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; //Construtor<br />&#160;&#160;&#160; //aScriptId&#160;&#160;&#160; : Path do script servidor<br />   //aUpdateId&#160;&#160;&#160; : ID do elemento do DOM a atualizar<br />   //aClearBefore : Verdade para apagar o conteúdo de aUpdateId antes envio do pedido<br /><b>inicializa</b>: function(aScriptId,aUpdateId,aClearBefore),<br />&#160;&#160;&#160; <br />&#160;&#160;&#160; //-------------------------------------------------------<br />&#160;&#160;&#160; // Executa o script com aParams como parâmetro<br />&#160;&#160;&#160; <b>run</b>:function(aParams),<br />});</span>&#160;&#160;&#160;&#160; </p>
                                                            <h5>Exemplos:</h5>
                                                            <p>Chamada de um script que lê 2 parâmetros P1 e P2 e reenvia o conteúdo dos parâmetros sob forma de um conteúdo HTML.</p>
                                                            <p><b>Script</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">//Inclui da livraria utilitários<br />#include "libs\xtdWsvc.js"</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">//Leitura dos dados enviados pelo cliente<br />// -&gt; Neste exemplo tratam-se de dados JSON<br />// -&gt; String ao formato : {P1:"Valor P1",P2:"Valor P2"}<br />//A função Eval cria um objeto JavaScrit à partir da String <br />var wInput=eval('('+XTD_CTX.getHttpBody()+')');</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">//Objeto utilitário para construir a resposta HTML<br />var wHtml=new XTENDWSVC.classHTMLBuffer;</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">//reenvia-se um HTML que contém os parâmetros escritos a negrito<br />wHtml.append("&lt;b&gt;P1=").append(wInput.P1).append("&lt;/b&gt;&lt;br&gt;");<br />wHtml.append("&lt;b&gt;P2=").append(wInput.P2).append("&lt;/b&gt;&lt;br&gt;");</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">//Registo da resposta<br />print(wHtml.html());</span>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">//Atualização do ContenType<br />XTD_CTX.setHttpContenType("text/html");</span>
                                                            </p>
                                                            <p><b>Chamada a partir da página HTML</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">&lt;Script&gt;<br />&#160; função callAjaxScript(aP1,aP2){<br />&#160;&#160;&#160; //Parâmetros<br />&#160;&#160;&#160; var wParams={P1:aP1,P2:aP2};<br />&#160;&#160;&#160; //ajaxTest3.js é o path do script<br />&#160;&#160;&#160; //idReponseScript é o id da div que afixa o resultado HTML<br />&#160;&#160;&#160; //verdade para apagar o conteúdo da div antes chamada do script<br />&#160;&#160;&#160; new XTENDSCRIPTS.classUpdater("ajaxTest3.js","idReponseScript",true).run(wParams);<br />&#160; }<br />&lt;/script&gt;<br />&lt;!--Botão para desencadear a chamada--&gt;<br />&lt;input type="button" value="callAjaxScript" onClick="javascript:callAjaxScript('Hello','world');"&gt;&lt;br&gt;<br />&lt;!--div para afixar o resultado--&gt;<br />&lt;div id="idReponseScript"&gt;&lt;/div&gt;</span>
                                                            </p>
                                                            <p><b>Resultado do pedido</b>
                                                            </p>
                                                            <p><b></b>
                                                            </p>
                                                            <p>
                                                                <img src="../Resources/Images/GESAY_ADV_AJAX_1.jpg" alt="GESAY_ADV_AJAX_1.jpg" keeps="true" realloc="GESAY_ADV_AJAX_1.jpg" />
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-mc-conditions="Other.Production only">
                                                <div id="feedback-survey">
                                                    <div class="feedback-question">
                                                        <h4>Did you find this helpful?</h4>
                                                        <p>
                                                            <button class="feedback-button feedback-yes" title="Yes, this article was helpful." alt="Yes, this article was helpful.">Yes</button>&#160;<button class="feedback-button feedback-no" title="No, this article wasn't helpful." alt="No, this article wasn't helpful.">No</button></p>
                                                    </div>
                                                    <div class="feedback-reason no">
                                                        <hr />
                                                        <div class="highlightBox">
                                                            <h4>Sorry about that</h4>
                                                            <p>Why wasn't this helpful? (check all that apply)</p>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option1" value="Couldn't find what I was looking for" data-analytics-label="Could not find" />
                                                                <label for="option1">Couldn't find what I was looking for</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option2" value="Instructions confusing or unclear" data-analytics-label="Confusing or unclear" />
                                                                <label for="option2">Instructions confusing or unclear</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option3" value="Instructions didn't work" data-analytics-label="Did not work" />
                                                                <label for="option3">Instructions didn't work</label>
                                                            </div>
                                                            <div class="feedback-reason no-thanks">
                                                                <p><b>Thanks for your feedback.</b>
                                                                </p>
                                                                <h4>Want to tell us more?</h4>
                                                                <p>Send an email to our authors to leave your feedback.</p>
                                                                <!--email_off-->
                                                                <p><a href="mailto:Sage200TechnicalAuthors@sage.com?subject=Sage 200 feedback" id="feedbackEmailLink" title="Tell us if there's a problem with the information on this page." alt="Tell us if there's a problem with the information on this page." class="sageButton">Email our authors</a>
                                                                </p>
                                                                <!--/email_off-->
                                                                <p>Sorry, but we can't provide technical support from this email address. If you need assistance, then please contact our support team directly.</p>
                                                            </div>
                                                        </div>
                                                        <div id="get-in-touch" class="highlightBox colour-dark-1">
                                                            <h4>Need support?</h4>
                                                            <p>You can contact our support team on <b>0845 111 5555</b>, 9am-5pm Monday-Friday.</p>
                                                        </div>
                                                    </div>
                                                    <div class="feedback-reason yes-thanks">
                                                        <hr />
                                                        <h4>Great!</h4>
                                                        <p>Thanks for taking the time to give us some feedback.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="sage-layout-topic-panel">
                                            <div class="menu-topic-container" id="menu-on-page">
                                                <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 1280px)" class="nocontent menu _Skins_Sage_Menu_Topic_TopNav mc-component">
                                                    <li><a href="#LivrariaAJAX">Livraria AJAX</a>
                                                    </li>
                                                    <ul>
                                                        <li><a href="#Introdu%C3%A7%C3%A3o">Introdução</a>
                                                        </li>
                                                        <li><a href="#XTENDAJAXrequest">XTENDAJAX.request</a>
                                                        </li>
                                                        <li><a href="#Webservicesinterface">Web services interface</a>
                                                        </li>
                                                        <li><a href="#Webservicesscript">Web services script</a>
                                                        </li>
                                                    </ul>
                                                </ul>
                                            </div>
                                        </div>
                                    </section>
                                    <button class="go-to-top">
                                        <!-- icon and label are inserted -->
                                    </button>
                                    <section class="sage-footer colour-dark-1" id="footer" role="contentinfo">
                                        <div class="row">
                                            <div class="small-6 medium-3 columns">
                                                <h5>Site links</h5>
                                                <p><a href="../Sitemap.htm" class="MCXref xref">Sitemap</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage links</h5>
                                                <p><a href="https://my.sage.co.uk/public/help.aspx" target="_blank" class="external">Sage Support Hub</a>
                                                </p>
                                                <p><a href="https://communities.sage.co.uk/product_support_community/" class="external" target="_blank" title="Your place to get product support from other customers and Sage experts" alt="Your place to get product support from other customers and Sage experts">Product support community</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/gdpr/" class="external" target="_blank">General Data Protection Regulation</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/legal/" class="external" target="_blank">Legal information</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Page info</h5>
                                                <p>Page updated: <span class="mc-variable Dates.DateFileSaved variable">23 janeiro 2024</span></p>
                                                <!-- script moves last published date to here -->
                                                <div id="last-published-footer">
                                                </div>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage media</h5>
                                                <p><a href="https://www.facebook.com/sageuk" target="_blank" alt="Find us on Facebook" title="Find us on Facebook"><i class="fa fa-lg fa-facebook" aria-hidden="true"></i></a>&#160;
						<a href="https://www.linkedin.com/company/sage-software" target="_blank" alt="Find us on LinkedIn" title="Find us on LinkedIn"><i class="fa fa-lg fa-linkedin" aria-hidden="true"></i></a>&#160;
						<a href="https://twitter.com/sageuk/" target="_blank" alt="Find us on Twitter" title="Find us on Twitter"><i class="fa fa-lg fa-twitter" aria-hidden="true"></i></a>&#160;
						<a href="https://www.youtube.com/user/SageUKOfficial" target="_blank" alt="Find us on YouTube" title="Find us on YouTube"><i class="fa fa-lg fa-youtube" aria-hidden="true"></i></a></p>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- Skin type scripts -->
                                    <script type="text/javascript" src="../Resources/Scripts/SideNav-template.js" data-mc-conditions="Other.HTML5-SideNav">
                                    </script>
                                    <!-- Google Analytics -->
                                    <div data-mc-conditions="Other.Production only">
                                        <!-- Google analytics script -->
                                        <!-- Copy and paste full HTML of tracking code here for Global site tag (gtag.js) -->
                                        <!-- Remember to edit 'async' parameter to read async="" -->
                                        <!-- Analytics for events -->
                                        <script type="text/javascript" src="../Resources/Scripts/google-analytics-events.js">
                                        </script>
                                    </div>
                                    <!-- cookies -->
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.js">
                                    </script>
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.config.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>