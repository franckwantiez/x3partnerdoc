<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="pt-pt" xml:lang="pt-pt" class="_Skins_Sage_Skin_SideNav" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="author" content="ADONIX" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="keywords" content="" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="description" content="Web services REST" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="module" content="[Supervisor]" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="robots" content="all" xmlns="http://www.w3.org/1999/xhtml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" /><title>Web services REST</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/Sage.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/Stylesheets/font-awesome.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: #000000 url('../../Skins/Default/Stylesheets/Images/60x60_globe_white-on-transparent_icon.png') no-repeat center center;
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link rel="stylesheet" type="text/css" media="all" href="../Resources/Images/ADXHelp_main.css" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Voltar" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Ir para conteúdo principal</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Conta</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Definições</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Terminar sessão</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Mostrar painel de navegação" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../Home.htm" alt="Logótipo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Conta</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Definições</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Terminar sessão</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Campo de pesquisa" placeholder="Pesquisar" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filtro:</span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Filtro de pesquisa" title="Todos os ficheiros" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">Todos os ficheiros</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Pesquisar" role="button" tabindex="0"><span class="invisible-label">Enviar pesquisa</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <script type="text/javascript">/*<![CDATA[*/$(document).ready(function(){
			$("#selectlang").appendTo("div.central-account-wrapper");
		});/*]]>*/</script>
                                    <div id="selectlang" class="headerlang">
                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_Language_toggle mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                            <div class="button-group-container-left">
                                                <button class="button needs-pie select-language-button" title="Alterar idioma">
                                                    <div>
                                                        <div role="img" class="button-icon-wrapper" aria-label="Alterar idioma">
                                                            <div class="button-icon"> </div>
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="sage-header-title">
                                        <img id="sage-header-logo" src="../Resources/Images/Sage_logo_green.svg" alt="Sage" /><span id="sage-header-product-name"><span id="sage-header-product"><span class="mc-variable Sage-Product.ProductName variable">X3 Warehousing</span></span></span>
                                    </div>
                                    <section class="sage-topic-body sage-layout-two-columns">
                                        <div class="sage-layout-topic-main">
                                            <div role="main" id="mc-main-content">
                                                <div id="container" xmlns="http://www.w3.org/1999/xhtml">
                                                    <div id="pageHeader">
                                                        <h1 class="g1" id="WebservicesREST" data-magellan-target="WebservicesREST"><span>Web services REST</span>
                                                        </h1>
                                                    </div>
                                                    <div id="supportingText">
                                                        <div class="stdBloc"><a id="MIS_20_10"></a>
                                                            <h2 class="g1" id="Introdução" data-magellan-target="Introdução">Introdução</h2>
                                                            <p>O servidor XTEND coloca à disposição dos programadores de aplicações AJAX dois tipos de web services REST que podem ser invocados diretamente a partir do navegador web por um pedido HTTP.</p>
                                                            <ul>
                                                                <li>Chamada de um web service SOAP X3 via um <a href="GESAYI.htm">interface</a> XTEND. </li>
                                                                <li>Chamada de um <a href="GESAY_ADV_SCRIPTING.htm">script serveur</a></li>
                                                            </ul>
                                                            <p>Estes serviços não estão acessíveis que às aplicações XTEND.</p>
                                                            <p>O motor não toma em conta que os pedidos REST que têm uma sessão XTEND assoicado via o cookie (ou para o parâmetro de URL) JSESSIONID.</p>
                                                            <p>Os serviços REST XTEND não estão disponíveis que sobre o servidor XTEND</p>
                                                            <p>Eles "encapsulam" a chamada dos web services SOAP X3</p>
                                                            <p>As estruturas dos dados REST trocadas pela passagem dos parâmetros (chaves e dados) e a devolução do resultado (dados e mensagens) são idênticos aquela dos serviços SOAP.</p>
                                                            <p>Apenas o protocolo de troca com o cliente é diferente. </p>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_30_10"></a>
                                                            <h2 class="g1" id="LembrançasobreoswebservicesSOAPX3" data-magellan-target="LembrançasobreoswebservicesSOAPX3">Lembrança sobre os web services SOAP X3</h2>
                                                            <p>Este parágrafo apresenta de maneira geral os <a href="GESAY_GEN_WSVC.htm">Web services SOAP X3</a> disponíveis assim que a estrutura de dados associados. </p>
                                                            <p>O conhecimento dos web service SOAP X3 está indispensável para utilizar os serviços REST de XTEND.</p>
                                                            <h4>Parâmetros de chamada</h4>
                                                            <h5>Parâmetros obrigatórios</h5>
                                                            <ul>
                                                                <li>O contexto de chamada <b><span style="font-family: 'Courier new';">CAdxCallContext callContext</span></b> <br />Contém as informações de login X3 e sobre a pool de conexão que vai tratar o pedido</li>
                                                                <li>O nome de publicação do web service  <b><span style="font-family: 'Courier new';">String publicName</span></b> definido no momento da publicação </li>
                                                            </ul>
                                                            <p><span style="font-family: 'Courier new';">public CAdxCallContext {<br />&#160;&#160;&#160; //Código língua X3<br />&#160;&#160;&#160; String codeLang;<br />&#160;&#160;&#160; //Código utilizador X3<br />&#160;&#160;&#160; String codeUser;<br />&#160;&#160;&#160; //Palavra chave X3<br />&#160;&#160;&#160; String password;<br />&#160;&#160;&#160; //Alias da "pool" de conexão sobre o servidor de web services<br />&#160;&#160;&#160; String poolAlias;<br />&#160;&#160;&#160; //Parâmetros de configuração (query string)<br />&#160;&#160;&#160; String requestConfig;<br />}</span>
                                                            </p>
                                                            <p>Os parâmetros <b>adxwss.optreturn=JSON/XML</b> da query <span style="font-family: 'Courier new';"><b>string requestConfig</b></span> indica o tipo de resultado (XML por defeito).  </p>
                                                            <p>O servidor de web service detecta automáticamente o formato XML ou JSON em entrada.</p>
                                                            <h5>Opções JSON</h5>
                                                            <p>O formato JSON propõe as opções para filtrar os dados reenviados pelo web service.</p>
                                                            <p>As opções são passadas :</p>
                                                            <ul>
                                                                <li>seja na query <b>string requestConfig</b> via o parâmertro <b>adxwss.optjson</b><br /><i>requestConfig=adxwss.optreturn=JSON&amp;adxwss.optjson={"OPTIONS":"noGoups"}</i></li>
                                                                <li>seja nos parâmetros JSON de objeto ou do sub-programa via o campo  <b>"_JSONOPT"</b><br /><i>Ver exemplo de parâmetros de chamada JSON</i> </li>
                                                            </ul>
                                                            <p>A opção JSON é um objeto JSON que comporta pelo menos um dos campos a seguir.<br /><span style="font-family: 'Courier new';">{ <br />&#160;&#160;&#160; OPÇÕES:["nolabels","noclobs","nogroups","norows"],<br />&#160;&#160;&#160; LANG:"FRA",<br />&#160;&#160;&#160; EXCLUDEGRP:["GRP1","GRP2"],<br />&#160;&#160;&#160; INCLUDEGRP:["GRP1","GRP2"],<br />&#160;&#160;&#160; EXCLUDEFLD:["FLD1","FLD2"],<br />&#160;&#160;&#160; INCLUDEFLD:["FLD1","FLD2"]<br />}</span></p>
                                                            <h5>OPÇÕES</h5>
                                                            <p><b>noGroups</b>
                                                                <br />&#160;&#160;&#160; Sem grupos de publicação em retorno<br />&#160;&#160;&#160; Cada parâmetro do sub-programa ou campo de objeto é um quadro de String.</p>
                                                            <p><b>noRows</b>
                                                                <br />&#160;&#160;&#160; Sem linhas no quadros com dim&gt;1<br />&#160;&#160;&#160; Cada parâmetro do sub-programa ou campo do objeto é um quadro de String</p>
                                                            <p><b>noLabels</b>
                                                                <br />&#160;&#160;&#160; Sem labels para os menus locais</p>
                                                            <p><b>noClobs</b>
                                                                <br />&#160;&#160;&#160; Os campos clob não são reenviados</p>
                                                            <p><i>O campo OPÇÃO aceita seja um quadro de parâmetro seja um único parâmetro (String)</i>
                                                            </p>
                                                            <p><b>EXCLUDEGRP</b>
                                                                <br />&#160;&#160;&#160; Exclui os grupos mencionados</p>
                                                            <p><b>INCLUDEGRP</b>
                                                                <br />&#160;&#160;&#160; Inclui os grupos contidos mencionados</p>
                                                            <p><b>EXCLUDEFLD</b>
                                                                <br />&#160;&#160;&#160; Exclui os campos mencionados</p>
                                                            <p><b>INCLUDEFLD</b>
                                                                <br />&#160;&#160;&#160; Inclui os campos mencionados</p>
                                                            <p><i>Os campos INCLUDE* e EXCLUDE* aceitam seja um quadro de Strings seja uma String</i>
                                                            </p>
                                                            <h5>Parâmetros chave de objeto X3</h5>
                                                            <p>O parâmetro <b><span style="font-family: 'Courier new';">CAdxParamKeyValue objectKeys</span></b> para os métodos dos objetos X3 que necessitam das chaves (Read/Query...). </p>
                                                            <p>Trata-se de um quadro codeChamp/valeur.</p>
                                                            <p><span style="font-family: 'Courier new';">public class CAdxParamKeyValue{<br />&#160;&#160;&#160; private String key;<br />&#160;&#160;&#160; private String value;<br />}</span>
                                                            </p>
                                                            <h5>Parâmetros dados</h5>
                                                            <p>O parâmetro <b>String objectXml</b> para um objeto X3 ou <b>String inputXml</b> contém os dados de objeto ou os parâmetros do sub-programa ao formato XML ou JSON.  </p>
                                                            <p>O formato JSON foi acrescentado para as necessidades das aplicações AJAX.</p>
                                                            <p>Exemplo de formato de chamada do web service de login AXTDLOGIN do estabelecimento ASAMPLE.</p>
                                                            <p><b>Param JSON</b>
                                                            </p>
                                                            <p>Opção JSON nos parâmetros de chamada : nogroups, norows<br /><span style="font-family: 'Courier new';">{<br />&#160;&#160;&#160; _JSONOPT:{OPTIONS:["nogroups", "norows"]},<br />&#160;&#160;&#160; AXPARCOD:["SITCOD", "USRLANG"],<br />&#160;&#160;&#160; AXPARVAL:["FDBTEST", "FRA"],<br />&#160;&#160;&#160; AXUSERCODE:"DIS001",<br />&#160;&#160;&#160; AXPWD:"adonix"<br />}</span></p>
                                                            <p><b>Param XML</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">&lt;PARAM&gt;<br />&#160;&#160;&#160; &lt;TAB ID="AX_PAR"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARCOD"&gt;SITCOD&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARVAL"&gt;FDBTEST&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARCOD"&gt;USRLANG&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARVAL"&gt;FRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&#160;&#160;&#160; &lt;GRP ID="AXLOG_PAR"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXUSERCODE"&gt;DIS001&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPWD"&gt;adonix&lt;/FLD&gt;<br />&#160;&#160;&#160; &lt;/GRP&gt;<br />&lt;/PARAM&gt;</span>
                                                            </p>
                                                            <h5>Estrutura parâmetro dados sub-programa</h5>
                                                            <p>Os campos <span style="font-family: 'Courier new';">&lt;FLD NAME="FieldName"&gt;</span> representam os parãmetros do sub-programa e seu anexamento ao grupo de publicação. </p>
                                                            <p>Os grupod de publicações são definidas na ficha Web service associado à ficha do sub-programa.</p>
                                                            <p>São representados pelos nós <span style="font-family: 'Courier new';">&lt;GRP ID="IdGroup"&gt;</span> para os parâmetros de dimensão 1 e <span style="font-family: 'Courier new';">&lt;TAB ID="IdGroup"&gt;</span> para os parâmetros de dimenção &gt; 1.</p>
                                                            <p>Os nós &lt;LIN&gt; reagrupa os campos de um mesmo grupo quadro tendo o mesmo índice.</p>
                                                            <p>Os parâmetrosJSON retoma a mesma estrutura mas não é obrigado de utilizar os grupos de publicação</p>
                                                            <p><b>Sub Programa XML</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">&lt;PARAM&gt;<br />&#160;&#160;&#160; &lt;GRP ID=’GRP1’&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME=’CHAMP’&gt;Valeur&lt;/FLD&gt;<br />&#160;&#160;&#160; &lt;/GRP&gt;<br />&#160;&#160;&#160; &lt;TAB ID=’GRP2’&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME=’CHAMP1’&gt;Valeur1&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME=’CHAMP2’&gt;Valeur1&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME=’CHAMP1’&gt;Valeur1&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME=’CHAMP2’&gt;Valeur2&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&lt;/PARAM&gt;</span>
                                                            </p>
                                                            <p><b>Sub Programa JSON</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">/*--- Sem os grupos ---*/<br />{<br />&#160;&#160;&#160; CHAMP:"Valeur",<br />&#160;&#160;&#160; CHAMP1:["Valeur1","Valeur2"],<br />&#160;&#160;&#160; CHAMP2:["Valeur1","Valeur2"]<br />}<br />/*--- Com os grupos ---*/<br />{<br />&#160;&#160;&#160; GRP1:{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; CHAMP:"Valeur"<br />&#160;&#160;&#160; },&#160;&#160;&#160; <br />&#160;&#160;&#160; GRP2:[<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CHAMP1:"Valeur1",<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CHAMP2:"Valeur1"&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; },<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CHAMP1:"Valeur2",<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CHAMP2:"Valeur2"&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }<br />&#160;&#160;&#160; ]<br />}</span>
                                                            </p>
                                                            <h5>Estrutura parãemetro dados Objeto X3</h5>
                                                            <p>Mesma estrutura que os sub-programas mas os nomes de grupos são codificados em função do local do bloco no ecrã.</p>
                                                            <p>Em modo JSON não está obrigatório de especificar os nomes dos grupos.</p>
                                                            <p>É deixado ao programador a iniciativa de especificar o nome de umgrupo no caso onde se deseja utilizar um campo de objeto X3 cujo nome apenas não permite de identificar</p>
                                                            <p>Pode ter vários campos de mesmo nome num objeto X3</p>
                                                            <p><b>Exemplo para a encomenda SOH</b>
                                                                <br />&#160;&#160;&#160; SOH4_1 (linhas da encomenda) corresponde ao 1º bloco do 4º ecrã</p>
                                                            <p><b>Objeto XML</b> </p>
                                                            <p><span style="font-family: 'Courier new';">&lt;PARAM&gt;<br />&#160;&#160;&#160; &lt;GRP ID="SOH0_1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="BPCORD"&gt;DIS001&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SOHTYP"&gt;WEB&lt;/FLD&gt;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SALFCY"&gt;ASN&lt;/FLD&gt;<br />&#160;&#160;&#160; &lt;/GRP&gt;<br />&#160;&#160;&#160; &lt;GRP ID="SOH2_1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="STOFCY"&gt;ASN&lt;/FLD&gt;<br />&#160;&#160;&#160; &lt;/GRP&gt;<br />&#160;&#160;&#160; &lt;TAB ID="SOH4_1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="ITMREF"&gt;CUB100&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="QTY"&gt;50&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="ITMREF"&gt;CD100&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="QTY"&gt;10&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&lt;/PARAM&gt;</span>
                                                            </p>
                                                            <p><b>Objeto JSON</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">{<br />&#160;&#160;&#160; BPCORD:"DIS001",<br />&#160;&#160;&#160; SOHTYP:"WEB",<br />&#160;&#160;&#160; SALFCY:"ASN",<br />&#160;&#160;&#160; STOFCY:"ASN",<br />&#160;&#160;&#160; ITMREF:["CUB100","CD100"],<br />&#160;&#160;&#160; ITMREF:["50","10"]<br />}</span>
                                                            </p>
                                                            <h4>Serviços</h4>
                                                            <p><span style="font-family: 'Courier new';">/*--------------- Chamada de um SUB-PROGRAMA ---------------*/<br />public CAdxResultXml run(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; String inputXml) throws Exception;<br />&#160;&#160;&#160; <br />/*--------------- Chamada de um SUB-OBJET X3---------------*/<br />public CAdxResultXml save(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; String objectXml) throws Exception;<br />//------------------------------------------<br />public CAdxResultXml delete(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; CAdxParamKeyValue[] objectKeys) throws Exception;<br />//------------------------------------------<br />public CAdxResultXml read(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; CAdxParamKeyValue[] objectKeys) throws Exception;&#160;&#160; <br />//------------------------------------------<br />public CAdxResultXml query(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; CAdxParamKeyValue[] objectKeys,<br />&#160;&#160;&#160; int listSize) throws Exception;&#160; <br />//------------------------------------------<br />public CAdxResultXml modify(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; CAdxParamKeyValue[] objectKeys,<br />&#160;&#160;&#160; String objectXml) throws Exception; <br />//------------------------------------------<br />public CAdxResultXml actionObject(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; String actionCode,<br />&#160;&#160;&#160; CAdxParamKeyValue[] objectKeys) throws Exception; <br />//------------------------------------------<br />public CAdxResultXml actionObject(<br />&#160;&#160;&#160; CAdxCallContext callContext,<br />&#160;&#160;&#160; String publicName,<br />&#160;&#160;&#160; String actionCode<br />&#160;&#160;&#160; String objectXml) throws Exception; <br />}</span>
                                                            </p>
                                                            <h4>Resultado</h4>
                                                            <p>A chamada d um web service reenvia sempre um objeto resultado CAdxResultXml que contém :</p>
                                                            <ul>
                                                                <li>os dados de objeto ou parâmetros do sub-programa ao formato XML ou JSON<br /><i><b>String resultXml</b></i></li>
                                                                <li>as mensagens aplicação de tipo erro, aviso ou informação <br /><b><i>CAdxMessage messages</i></b></li>
                                                                <li>informações técnicas sobre a execução do sub-programa <br /><b><i>CAdxTechnicalInfos technicalInfos</i></b> </li>
                                                            </ul>
                                                            <p>Os erros aplicativos X3 não são reenviados como excepções.</p>
                                                            <p>O formato JSON ignora os parâmetros de tipo BLOB que contêm binário</p>
                                                            <p><span style="font-family: 'Courier new';">public class CAdxResultXml{<br />&#160;&#160;&#160; public CAdxMessage[] messages;<br />&#160;&#160;&#160; public String resultXml;<br />&#160;&#160;&#160; public int status;<br />&#160;&#160;&#160; public CAdxTechnicalInfos technicalInfos;<br /></span><span style="font-family: 'Courier new';">}<br />public class CAdxMessage {<br />&#160;&#160;&#160; public String message;<br />&#160;&#160;&#160; //"1":Information - "2":Warning - "3":Erro<br />&#160;&#160;&#160; public String type;<br />}</span>
                                                            </p>
                                                            <p>Exemplo de resultado seguinte à chamada do web service de login AXTDLOGIN do estabelecimento ASAMPLE.</p>
                                                            <p><b>Resultado JSON</b> </p>
                                                            <p>Opções JSON norows e nogroups</p>
                                                            <p>{<br />AXPARCOD:["SITCOD","USRLANG"],<br />AXPARVAL:["FDBTEST","FRA"]<br />AXUSERCODE:"DIS001",<br />AXPWD:"adonix",<br />AXUSERPROF:"B2B",<br />AX3SOL:["SOLPAIE","X3V5","XTENDV2"],<br />AX3FLDR:["PAIE","X3TESTV5","DEMOFRA"],<br />AX3LANG:["FRA","FRA","FRA"],<br />AX3USER:["XTEND","JPJ1","OG"],<br />AXLOGCOD:["NAME","FIRSTNAME","EMAIL","PHONE"],<br />AXLOGVAL:["DALBO","Frédéric","<span style="font-family: 'Courier new';">../FCT/mailto:fdb@sg.com","0001020304</span>"]<br />SHIPADR1:["Sage Lyon new","Sage MGE","Sage PARIS"],<br />SHIPCITY:["LYON","Echirolles","PARIS"],<br />SHIPZIP:["69443","38130","75834"]<br />}</p>
                                                            <p><b>Resultado XML</b>
                                                            </p>
                                                            <p><span style="font-family: 'Courier new';">&lt;RESULT&gt;<br />&#160;&#160;&#160; &lt;TAB DIM="20" ID="AX_PAR" SIZE="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARCOD" TYPE="Char"&gt;SITCOD&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARVAL" TYPE="Char"&gt;FDBTEST&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARCOD" TYPE="Char"&gt;USRLANG&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPARVAL" TYPE="Char"&gt;FRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&#160;&#160;&#160; &lt;GRP ID="AXLOG_PAR"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXUSERCODE" TYPE="Char"&gt;DIS001&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXPWD" TYPE="Char"&gt;adonix&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXUSERPROF" TYPE="Char"&gt;B2B&lt;/FLD&gt;<br />&#160;&#160;&#160; &lt;/GRP&gt;<br />&#160;&#160;&#160; &lt;TAB DIM="10" ID="AXLOG_X3" SIZE="3"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3SOL" TYPE="Char"&gt;SOLPAIE&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3FLDR" TYPE="Char"&gt;PAIE&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3LANG" TYPE="Char"&gt;FRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3USER" TYPE="Char"&gt;XTEND&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3SOL" TYPE="Char"&gt;X3V5&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3FLDR" TYPE="Char"&gt;X3TESTV5&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3LANG" TYPE="Char"&gt;FRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3USER" TYPE="Char"&gt;JPJ1&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="3"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3SOL" TYPE="Char"&gt;XTENDV2&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3FLDR" TYPE="Char"&gt;DEMOFRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3LANG" TYPE="Char"&gt;FRA&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AX3USER" TYPE="Char"&gt;OG&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&#160;&#160;&#160; &lt;TAB DIM="50" ID="AXLOG_RES" SIZE="4"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGCOD" TYPE="Char"&gt;NAME&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGVAL" TYPE="Char"&gt;DALBO&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGCOD" TYPE="Char"&gt;FIRSTNAME&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGVAL" TYPE="Char"&gt;Frédéric&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="3"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGCOD" TYPE="Char"&gt;EMAIL&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGVAL" TYPE="Char"&gt;fdb@sg.com&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="4"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGCOD" TYPE="Char"&gt;PHONE&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="AXLOGVAL" TYPE="Char"&gt;0001020304&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&#160;&#160;&#160; &lt;TAB DIM="20" ID="LOGINSHIP" SIZE="3"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="1"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPADR1" TYPE="Char"&gt;Sage Lyon new&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPCITY" TYPE="Char"&gt;LYON&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPZIP" TYPE="Char"&gt;69443&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="2"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPADR1" TYPE="Char"&gt;Sage MGE&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPCITY" TYPE="Char"&gt;Echirolles&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPZIP" TYPE="Char"&gt;38130&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;LIN NUM="3"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPADR1" TYPE="Char"&gt;Sage PARIS&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPCITY" TYPE="Char"&gt;PARIS&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FLD NAME="SHIPZIP" TYPE="Char"&gt;75834&lt;/FLD&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/LIN&gt;<br />&#160;&#160;&#160; &lt;/TAB&gt;<br />&lt;/RESULT&gt;</span>
                                                            </p>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_40_10"></a>
                                                            <h2 class="g1" id="WebservicesRESTXTEND" data-magellan-target="WebservicesRESTXTEND">Web services REST XTEND</h2>
                                                            <p />
                                                            <h4>Princípio de funcionamemento</h4>
                                                            <p>Eis as diferentes etapas de tratamento de um pedido REST:</p>
                                                            <p>1. Receção do pedido HTTP por servlet ajax do servidor XTEND</p>
                                                            <p>2. Pesquisa da sessão XTEND associado.</p>
                                                            <p><i>Via o cookie ou o parâmetro do pedido JSESSIONID</i>
                                                                <br />-&gt; Erro se nenhuma sessão não foi encontrada</p>
                                                            <p>3. Análise de URL para deduzir as coordenadas do estabelecimeto XTEND e o tipo de serviço</p>
                                                            <p><i>Vários estabelecimentos podem ser abertos simultâniamente por uma sessão XTEND</i>
                                                                <br />-&gt; Erro se estabelecimento não encontrado</p>
                                                            <p>4. Execução do script servidor ou chamada do web service SOAP X3 </p>
                                                            <h5>Tratamento do script servidor</h5>
                                                            <p>1. Leitura do caminho de acesso na URL</p>
                                                            <p>2. Leitura e compilação do script JavaScript</p>
                                                            <p>3. Execução do script</p>
                                                            <ul>
                                                                <ul>
                                                                    <ul>
                                                                        <li>O script tem a capacidade de aceder aos dados da sessão e de chamar os web services SOAP X3</li>
                                                                        <li>A instrução print do script está utilizado para reenviar a resposta (XML, JSON, HTML...) </li>
                                                                    </ul>
                                                                </ul>
                                                            </ul>
                                                            <h5>Tratamento da chamada do web service SOAP X3</h5>
                                                            <p>1. Leitura do codigo de interface XTEND em URL.</p>
                                                            <p><i>O interface faz referência a um web service SOAP</i>
                                                                <br />-&gt; Erro se interface não declarado no estabelecimento.</p>
                                                            <p>2. Constituição dos parâmetros de chamada.</p>
                                                            <ul>
                                                                <ul>
                                                                    <ul>
                                                                        <li>Os dados XML ou JSON são lidos no corpo do pedido.</li>
                                                                        <li>As chaves são lidas na "Query String"</li>
                                                                        <li>O tipo de resultado pede XML ou JSON é lido no "header" HTTP xtd-accept </li>
                                                                    </ul>
                                                                </ul>
                                                            </ul>
                                                            <p>3. Constituição do contexto de chamada do web service SOAP</p>
                                                            <ul>
                                                                <ul>
                                                                    <ul>
                                                                        <li>O ponto de entrada (URL) está dado pelo estabelecimento XTEND (Pool web service ou da interface)</li>
                                                                        <li>O código utilizador X3, Expressão de passe em língua são dados pela sessão XTEND </li>
                                                                    </ul>
                                                                </ul>
                                                            </ul>
                                                            <p>4. Chamada do web service SOAP</p>
                                                            <p>5. Constituição do resultado</p>
                                                            <ul>
                                                                <ul>
                                                                    <ul>
                                                                        <li>As mensagens transmitiram no cabeçalho HTTP<br /><i>xtd-msg-error, xtd-msg-warning,xtd-msg-info </i></li>
                                                                        <li>Os dados XML/JSON reenviadas pelo web service SOAP são transmitidos sem modificação no corpo do pedido. </li>
                                                                    </ul>
                                                                </ul>
                                                            </ul>
                                                            <h4>Formato de URL</h4>
                                                            <p><span style="font-family: 'Courier new';">http://host:port/xtend/ajax/x3sol/x3folder/xtdsite/type/id[/méthode][?Paramètres]</span>
                                                            </p>
                                                            <p>Método HTTP POST ou GET</p>
                                                            <p><b>x3sol</b>
                                                                <br />&#160;&#160;&#160; Código solução X3</p>
                                                            <p><b>x3folder</b>
                                                                <br />&#160;&#160;&#160; Código dossier X3</p>
                                                            <p><b>xtdsite</b>
                                                                <br />&#160;&#160;&#160; Código estabelecimento XTEND</p>
                                                            <p><b>type</b>
                                                                <br />&#160;&#160;&#160; <b>INT</b> para uma chamada de uma <a href="GESAYI.htm">interface</a> XTEND<br />&#160;&#160;&#160; <b>SCRIPT</b> para chamada de um <a href="GESAY_ADV_SCRIPTING.htm">script server</a> XTEND</p>
                                                            <p><b>id</b>
                                                                <br />&#160;&#160;&#160; Código de interface<br />&#160;&#160;&#160; ou<br />&#160;&#160;&#160; Caminho de acesso do script por relação ao directório dos scripts do servidor do estabelecimento XTEND.</p>
                                                            <p><b>método</b>
                                                                <br />&#160;&#160;&#160; Código do método de objecto X3<br />&#160;&#160;&#160;<b> QUERY, R</b> Read, <b>S</b> Save, <b>M</b> Modify,<b>D</b> Delete</p>
                                                            <p><b>Parâmetros</b>
                                                                <br />&#160;&#160;&#160; Query string que pode conter :</p>
                                                            <ul>
                                                                <ul>
                                                                    <li>Os campos chaves de um objeto X3</li>
                                                                    <li>Os parâmetros de uma lista esquerda</li>
                                                                    <li>As opções JSON via a chave _JSONOPT se eles não sao passados nos parâmetros dados. </li>
                                                                </ul>
                                                            </ul>
                                                            <h5>Exemples:</h5>
                                                            <p><u>Script</u>
                                                                <br /><span style="font-family: 'Courier new';">&#160;&#160;&#160; http://host/xtend/ajax/SOLPAIE/PAIE/FDBTEST/SCRIPT/ajaxTest1.js</span>
                                                            </p>
                                                            <p><u>Sub-programa<br /></u>&#160;&#160;&#160; <span style="font-family: 'Courier new';">http://host/xtend/ajax/SOLPAIE/PAIE/FDBTEST/INT/AXTDLOGIN</span></p>
                                                            <p><u>Objeto X3 - Read</u>
                                                                <br />&#160;&#160;<span style="font-family: 'Courier new';">&#160; http://host/xtend/ajax/SOLPAIE/PAIE/FDBTEST/INT/OBJAYZ/R?FRMCOD=0901000002<br />&#160;&#160;&#160; &amp;_JSONOPT=%7B%22OPTIONS%22%5B%22nogroups%22%7D</span></p>
                                                            <p><u>Lista esquerda objeto X3<br /></u>&#160;&#160;<span style="font-family: 'Courier new';">&#160; http://host/xtend/ajax/SOLPAIE/PAIE/FDBTEST/INT/OBJAYZ/QUERY?_COUNT=10&amp;FRMCOD=09*<br />&#160;&#160;&#160; &amp;_JSONOPT=%7B%22OPTIONS%22%5B%22nogroups%22%7D</span></p>
                                                            <h4>Envia os dados</h4>
                                                            <p>Os parâametros de tipo dados outro que aqueles da query string são passadas no  <b>corpo</b> do pedido HTTP.</p>
                                                            <p>O formato dos parâmetros de chamada de uma interface XTEND são dados para o ContentType do pedido HTTP:</p>
                                                            <ul>
                                                                <li><span style="font-family: 'Courier new';">aplicação/json</span>
                                                                    <br /><i>A estrutura dos dados deve ser conforme aos formato esperado</i>
                                                                </li>
                                                                <li><span style="font-family: 'Courier new';">application/xml</span>
                                                                    <br /><i>Os dados XML devem estar conforme aos formatos esperados</i>
                                                                </li>
                                                                <li><span style="font-family: 'Courier new';">application/x-www-form-urlencoded</span>
                                                                    <br /><i>Neste caso considera-se que a lista dos campos/valores constitui um objeto JSON conforme ao formato esperado</i> </li>
                                                            </ul>
                                                            <p>O <b>ContentType</b> por defeito está <span style="font-family: 'Courier new';">application/json.</span> </p>
                                                            <p>O formato dos dados para uma chamada de um script server está obrigatoriamente <span style="font-family: 'Courier new';">application/json</span>. </p>
                                                            <h4>Resultado</h4>
                                                            <p>No momento de chamada de uma interface XTEND pode-se pedir um formato de devolução XML (application/xml) ou JSON (application/json) em valorizando o cabeçalho HTTP dedicado xtd-Accept.</p>
                                                            <p>O mesmo tipo por defeito é <span style="font-family: 'Courier new';">application/xml</span>.</p>
                                                            <p>O pedido reenvia os parâmetros do sub-programa ou os dados do objecto X3 ao formato pedido.</p>
                                                            <p>O formato dos dados reenviado por chamada de um script está livre.</p>
                                                            <h4>Mensagens aplicativas</h4>
                                                            <p>As mensagens aplicativas são reenviadas nos três cabeçalhos HTTP específicos.</p>
                                                            <h5>xtd-msg-error</h5>
                                                            <p>Contém as mensagens de erro</p>
                                                            <h5>xtd-msg-warning</h5>
                                                            <p>Contem as mensagens de aviso (warning)</p>
                                                            <h5>xtd-msg-info</h5>
                                                            <p>Contém as mensagens de informação</p>
                                                            <p><b>Um erro aplicativo X3 está tratado como uma exceção.</b>
                                                            </p>
                                                            <h4>Exceções</h4>
                                                            <p>Os<b> erros aplicativos X3</b> e erros de compilação/execução dos scripts serveur são reenviados sob a forma de um <b>erro</b> <b>HTTP de código 600</b>.</p>
                                                            <p>As  <b>exceções JAVA</b> são reenviadas sob a forma de um erro  <b>HTTP de código 500</b>.</p>
                                                            <p>O <b>corpo do pedido</b> contém uma descrição (ContentType=texto/pleno) de erro que depende do tipo de exceção.</p>
                                                            <p><b>No caso de um erro X3 o cabeçalho HTTP xtd-msg-error contém as mesagens de erro.</b> </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-mc-conditions="Other.Production only">
                                                <div id="feedback-survey">
                                                    <div class="feedback-question">
                                                        <h4>Did you find this helpful?</h4>
                                                        <p>
                                                            <button class="feedback-button feedback-yes" title="Yes, this article was helpful." alt="Yes, this article was helpful.">Yes</button>&#160;<button class="feedback-button feedback-no" title="No, this article wasn't helpful." alt="No, this article wasn't helpful.">No</button></p>
                                                    </div>
                                                    <div class="feedback-reason no">
                                                        <hr />
                                                        <div class="highlightBox">
                                                            <h4>Sorry about that</h4>
                                                            <p>Why wasn't this helpful? (check all that apply)</p>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option1" value="Couldn't find what I was looking for" data-analytics-label="Could not find" />
                                                                <label for="option1">Couldn't find what I was looking for</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option2" value="Instructions confusing or unclear" data-analytics-label="Confusing or unclear" />
                                                                <label for="option2">Instructions confusing or unclear</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option3" value="Instructions didn't work" data-analytics-label="Did not work" />
                                                                <label for="option3">Instructions didn't work</label>
                                                            </div>
                                                            <div class="feedback-reason no-thanks">
                                                                <p><b>Thanks for your feedback.</b>
                                                                </p>
                                                                <h4>Want to tell us more?</h4>
                                                                <p>Send an email to our authors to leave your feedback.</p>
                                                                <!--email_off-->
                                                                <p><a href="mailto:Sage200TechnicalAuthors@sage.com?subject=Sage 200 feedback" id="feedbackEmailLink" title="Tell us if there's a problem with the information on this page." alt="Tell us if there's a problem with the information on this page." class="sageButton">Email our authors</a>
                                                                </p>
                                                                <!--/email_off-->
                                                                <p>Sorry, but we can't provide technical support from this email address. If you need assistance, then please contact our support team directly.</p>
                                                            </div>
                                                        </div>
                                                        <div id="get-in-touch" class="highlightBox colour-dark-1">
                                                            <h4>Need support?</h4>
                                                            <p>You can contact our support team on <b>0845 111 5555</b>, 9am-5pm Monday-Friday.</p>
                                                        </div>
                                                    </div>
                                                    <div class="feedback-reason yes-thanks">
                                                        <hr />
                                                        <h4>Great!</h4>
                                                        <p>Thanks for taking the time to give us some feedback.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="sage-layout-topic-panel">
                                            <div class="menu-topic-container" id="menu-on-page">
                                                <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 1280px)" class="nocontent menu _Skins_Sage_Menu_Topic_TopNav mc-component">
                                                    <li><a href="#WebservicesREST">Web services REST</a>
                                                    </li>
                                                    <ul>
                                                        <li><a href="#Introdu%C3%A7%C3%A3o">Introdução</a>
                                                        </li>
                                                        <li><a href="#Lembran%C3%A7asobreoswebservicesSOAPX3">Lembrança sobre os web services SOAP X3</a>
                                                        </li>
                                                        <li><a href="#WebservicesRESTXTEND">Web services REST XTEND</a>
                                                        </li>
                                                    </ul>
                                                </ul>
                                            </div>
                                        </div>
                                    </section>
                                    <button class="go-to-top">
                                        <!-- icon and label are inserted -->
                                    </button>
                                    <section class="sage-footer colour-dark-1" id="footer" role="contentinfo">
                                        <div class="row">
                                            <div class="small-6 medium-3 columns">
                                                <h5>Site links</h5>
                                                <p><a href="../Sitemap.htm" class="MCXref xref">Sitemap</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage links</h5>
                                                <p><a href="https://my.sage.co.uk/public/help.aspx" target="_blank" class="external">Sage Support Hub</a>
                                                </p>
                                                <p><a href="https://communities.sage.co.uk/product_support_community/" class="external" target="_blank" title="Your place to get product support from other customers and Sage experts" alt="Your place to get product support from other customers and Sage experts">Product support community</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/gdpr/" class="external" target="_blank">General Data Protection Regulation</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/legal/" class="external" target="_blank">Legal information</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Page info</h5>
                                                <p>Page updated: <span class="mc-variable Dates.DateFileSaved variable">23 janeiro 2024</span></p>
                                                <!-- script moves last published date to here -->
                                                <div id="last-published-footer">
                                                </div>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage media</h5>
                                                <p><a href="https://www.facebook.com/sageuk" target="_blank" alt="Find us on Facebook" title="Find us on Facebook"><i class="fa fa-lg fa-facebook" aria-hidden="true"></i></a>&#160;
						<a href="https://www.linkedin.com/company/sage-software" target="_blank" alt="Find us on LinkedIn" title="Find us on LinkedIn"><i class="fa fa-lg fa-linkedin" aria-hidden="true"></i></a>&#160;
						<a href="https://twitter.com/sageuk/" target="_blank" alt="Find us on Twitter" title="Find us on Twitter"><i class="fa fa-lg fa-twitter" aria-hidden="true"></i></a>&#160;
						<a href="https://www.youtube.com/user/SageUKOfficial" target="_blank" alt="Find us on YouTube" title="Find us on YouTube"><i class="fa fa-lg fa-youtube" aria-hidden="true"></i></a></p>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- Skin type scripts -->
                                    <script type="text/javascript" src="../Resources/Scripts/SideNav-template.js" data-mc-conditions="Other.HTML5-SideNav">
                                    </script>
                                    <!-- Google Analytics -->
                                    <div data-mc-conditions="Other.Production only">
                                        <!-- Google analytics script -->
                                        <!-- Copy and paste full HTML of tracking code here for Global site tag (gtag.js) -->
                                        <!-- Remember to edit 'async' parameter to read async="" -->
                                        <!-- Analytics for events -->
                                        <script type="text/javascript" src="../Resources/Scripts/google-analytics-events.js">
                                        </script>
                                    </div>
                                    <!-- cookies -->
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.js">
                                    </script>
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.config.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>