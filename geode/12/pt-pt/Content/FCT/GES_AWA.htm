<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="pt-pt" xml:lang="pt-pt" class="_Skins_Sage_Skin_SideNav" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="author" content="ADONIX" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="keywords" content="Workflow,Anexo,Técnico" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="description" content="Anexo técnico workflow" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="module" content="[Supervisor]" xmlns="http://www.w3.org/1999/xhtml" />
        <meta name="robots" content="all" xmlns="http://www.w3.org/1999/xhtml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" /><title>Anexo técnico workflow</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/Sage.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/Stylesheets/font-awesome.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: #000000 url('../../Skins/Default/Stylesheets/Images/60x60_globe_white-on-transparent_icon.png') no-repeat center center;
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link rel="stylesheet" type="text/css" media="all" href="../Resources/Images/ADXHelp_main.css" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Voltar" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Ir para conteúdo principal</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Conta</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Definições</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Terminar sessão</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Mostrar painel de navegação" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../Home.htm" alt="Logótipo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Conta</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Definições</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Terminar sessão</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Campo de pesquisa" placeholder="Pesquisar" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filtro:</span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Filtro de pesquisa" title="Todos os ficheiros" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">Todos os ficheiros</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Pesquisar" role="button" tabindex="0"><span class="invisible-label">Enviar pesquisa</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <script type="text/javascript">/*<![CDATA[*/$(document).ready(function(){
			$("#selectlang").appendTo("div.central-account-wrapper");
		});/*]]>*/</script>
                                    <div id="selectlang" class="headerlang">
                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_Language_toggle mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                            <div class="button-group-container-left">
                                                <button class="button needs-pie select-language-button" title="Alterar idioma">
                                                    <div>
                                                        <div role="img" class="button-icon-wrapper" aria-label="Alterar idioma">
                                                            <div class="button-icon"> </div>
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="sage-header-title">
                                        <img id="sage-header-logo" src="../Resources/Images/Sage_logo_green.svg" alt="Sage" /><span id="sage-header-product-name"><span id="sage-header-product"><span class="mc-variable Sage-Product.ProductName variable">X3 Warehousing</span></span></span>
                                    </div>
                                    <section class="sage-topic-body sage-layout-two-columns">
                                        <div class="sage-layout-topic-main">
                                            <div role="main" id="mc-main-content">
                                                <div id="container" xmlns="http://www.w3.org/1999/xhtml">
                                                    <div id="pageHeader">
                                                        <h1 class="g1" id="Anexotécnicoworkflow" data-magellan-target="Anexotécnicoworkflow"><span>Anexo técnico workflow</span>
                                                        </h1>
                                                    </div>
                                                    <div id="intro">
                                                        <div id="presentation">
                                                            <p>No momento de execução de um workflow, assim que no momento da sua assinatura, dispõe-se de um contexto muito rico, sob a forma de classes de variáveis e de variáveis locais em linha. Este contexto depende do tipo de workflow e do processo em curso (workflow original, assinatura, workflow consecutivo a um primeiro workflow). Este anexo descreve o algoritmo utilizado pelo motor de workflow e detalhado as variáveis utilizáveis em cada estado.</p>
                                                            <p>Deve-se notar que o assistente de fórmula fornece uma lista de variáveis emitidas do contexto para construir as fórmulas a mais adaptada possível.</p>
                                                        </div>
                                                    </div>
                                                    <div id="supportingText">
                                                        <div class="stdBloc"><a id="MIS_30_10"></a>
                                                            <h2 class="g1" id="Algoritmoprincipalworkflowobjecto" data-magellan-target="Algoritmoprincipalworkflowobjecto">Algoritmo principal workflow objecto</h2>
                                                            <div class="links">
                                                                <ul>
                                                                    <li><a href="#MIS_30_20">Inicialização das variáveis de ambiente</a>
                                                                    </li>
                                                                    <li><a href="#MIS_30_30">Tratamento da regra de afectação</a>
                                                                    </li>
                                                                    <li><a href="#MIS_30_40">Tratamento do worflow</a>
                                                                    </li>
                                                                    <li><a href="#MIS_30_50">Tratamento da mensagem</a>
                                                                    </li>
                                                                    <li><a href="#MIS_30_60">Tratamento do seguimento</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <p>Um workflow de tipo objecto se descompõe numa série de etapas que são as seguintes:</p>
                                                            <ul>
                                                                <li><a href="#MIS_30_20">Inicialização das variáveis de ambiente</a>
                                                                </li>
                                                                <li>Para um workflow de tipo <em>cabeçalho</em> ou de tipo <em>linha</em>&#160;sem reagrupamento,&#160;<a href="#MIS_30_30">tratamento da regra de afectação</a> se ela existe, mais tratamento do&#160;workflow. </li>
                                                                <li>Para um workflow de tipo <em>linha </em>com reagrupamento, leitura das linhas com ruptura sobre os diferentes valores do grupo. Com valor constante, executa-se as acções de tipo <em>linha</em> que existem, e se formata o texto linha. Depois se <a href="#MIS_30_30">trata a regra de afectação</a> para o grupo se ele existe, e se <a href="#MIS_30_40">traita o workflow</a>  para o grupo, antes de passar ao grupo seguinte. </li>
                                                            </ul><a id="MIS_30_20"></a>
                                                            <h3 class="g1">Inicialização das variáveis de ambiente</h3>
                                                            <p>Esta etapa consiste a afectar as variáveis globais. Dispõe-se nomeadamente da variável USRWRK que corresponde ao utilizador corrente do workflow de origem.</p><a id="MIS_30_30"></a>
                                                            <h3 class="g1">Tratamento da regra de afectação</h3>
                                                            <p>Nesta etapa, avalia-se as formulas dadas na regra, e se armazena numa variável dimencionada nomeada VALEXP. Isto permite dispor nomeadamente de valores agregados que não são forçosamente utilizados como critério de definição dos destinatários, mas simplesmente úteis na seguida do workflow (por exemplo para decidir do envio de uma mensagem em função de valores mínino, máximo, médias de um elemento).</p>
                                                            <p>O número de valores calculados é conhecido pela variável NBCOL.</p>
                                                            <p>Pesquisa-se em seguida, a partir dos valores calculados, a linha de regra que corresponde, para afectar o quadro de variáveis USER (indiciada de 1 a 10 no máximo).</p><a id="MIS_30_40"></a>
                                                            <h3 class="g1">Tratamento do worflow</h3>
                                                            <p>Esta etapa se decompõe em várias sub-etapas. Então, determina-se um certo número de valores :</p>
                                                            <ul>
                                                                <li>inicializa-se a variável CTX, que contém o contexto corrente, de após as fórmulas parametrizadas. Este contexto está armazenado no histórico workflow e será em seguida restituido se um evento worflow ulterior é desencadeado em seguida do primeiro.</li>
                                                                <li>Afecta as variáveis S_USER, S_CLEOBJ, S_ABREV, que definem o utilizador na origem do workflow, a chave de objecto ou do grupo de linhas, e o código objecto afectado.</li>
                                                                <li>Calcula-se S_NBRUSER, que dá o número de signatários realmente definidos na regra.</li>
                                                            </ul>
                                                            <p>Em seguida, verifica-se as condições de execução em cabeaçlho do workflow. Se estas condições são realizadas, realiza-se as operações seguintes:</p>
                                                            <ul>
                                                                <li>Constituição do contexto de devolução (îcone)</li>
                                                                <li>Atribuição de um número de crono em cada tratamento de uma regra. No caso do workflow manual, uma atribuição é feita em cada vez que se carrega o valor da chave principal (se não existe campo reagrupamento) ou de valor do reagrupamento (se existe uma). </li>
                                                                <li>Atribuição de um número de crono para cada linha (existem vários por grupo se existe um reagrupamento).</li>
                                                                <li>Execução da acção de início de workflow (se existe e que condições são reunidas).</li>
                                                                <li>Se uma mensagem deve ser enviada, ou um seguimento feito, pesquisa dos utilizadores delegados.</li>
                                                                <li>Se uma mensagem deve ser enviada, <a href="#MIS_30_50">tratamento da mensagem</a>. </li>
                                                                <li>Se um seguimento deve ser feito, <a href="#MIS_30_60">tratamento da mensagem</a>. </li>
                                                                <li>Execução da acção de tipo fim de workflow (se existe e que condições são reunidas).</li>
                                                            </ul><a id="MIS_30_50"></a>
                                                            <h3 class="g1">Tratamento da mensagem</h3>
                                                            <p>Esta etapa realiza as operações seguintes :</p>
                                                            <ul>
                                                                <li>Constituição do texto por assemblagem do texto principal e do texto do detalhe das linhas (se existe uma).</li>
                                                                <li>Constituição do objecto da mensagem</li>
                                                                <li>Afixação da janela de modificação da mensagem (se a mensagem está modificável e se o desencadeamento interativo).</li>
                                                                <li>Transacção de registo nas tabelas correspondentes: <a href="../MCD/AWRKHISMES.htm">AWRKHISMES</a> contém o corpo da mensagem, <a href="../MCD/AWRKHISJOI.htm">AWRKHISJOI</a>&#160;os documentos juntos, e <a href="../MCD/AWRKHISDES.htm">AWRKHISDES</a>&#160;os destinatários.</li>
                                                                <li>Envio da mensagem se a opção de envio agrupado está não activado. Senão, o envio grupado será feito no fim do tratamento do workflow.</li>
                                                            </ul><a id="MIS_30_60"></a>
                                                            <h3 class="g1">Tratamento do seguimento</h3>
                                                            <p>A etapa é realizada na actualização da linha de seguimento a tratar na tabela <a href="../MCD/AWRKHISSUI.htm">AWRKHISSUI</a>. A transacção correspondente está separado dos precedentes (mas ela não foi executada que se os precedentes são bem passados).</p>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_40_10"></a>
                                                            <h2 class="g1" id="Algoritmoprincipalworkflowassinatura" data-magellan-target="Algoritmoprincipalworkflowassinatura">Algoritmo principal workflow assinatura</h2>
                                                            <p>Um workflow de tipo signatário está desencadeado no seguimento de uma acção de assinatura (seja manualmente depois o plano de trabalho, seja automaticamente via um outro evento de workflow ou uma notificação via um clique sobre uma relação).</p>
                                                            <p>As etapas correspondentes são os seguintes :</p>
                                                            <ul>
                                                                <li><a href="#MIS_40_20">Inicialização das variáveis herdadas</a>
                                                                </li>
                                                                <li>Carregamento das classes de variáveis [F] (tabelas) definidos pelo evento de origem.</li>
                                                                <li>Para um workflow de tipo <em>cabeçalho</em> ou de tipo <em>linha</em>&#160;sem reagrupamento,&#160;<a href="#MIS_30_30">tratamento da regra de afectação</a> depois, <a href="#MIS_30_40">tratamento do workflow</a>.</li>
                                                                <li>Se é um workflow com um reagrupamento de linhas,leitura das linhas de agrupamento correspondente ao seguimento, o tratamento da regra de afectação, depois  <a href="#MIS_30_40">tratamento do workflow</a>.</li>
                                                                <li>Para cada linha, execução da acção de tipo linha e formatação do texto da linha.</li>
                                                                <li>O seguimento do processo é idêntico a um workflow standard.</li>
                                                            </ul><a id="MIS_40_20"></a>
                                                            <h3 class="g1">Inicialização das variáveis herdadas</h3>
                                                            <p>As variáveis herdadas do contexto de assinatura são afectadas nesta fase. Estas variáveis são as seguintes :</p>
                                                            <p />
                                                            <table width="100%" border="2">
                                                                <tbody>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>NUMORG</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>número cronológico de origem.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>USRORG</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>destinatário do evento de origem.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>NUMSIG</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>crono sobre o qual se foi desencadeada o processo de assinatura.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>USRDES</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>destinatário do crono sobre o qual foi desencadeado o processo de assinatura.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>USRWRK</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>utilizador que assina</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>MAIWRK</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>endereço de mensagem do signatário, quando a assinatura se faz por uma ligação http externa.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>LEVSIG</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Nível de assinatura (o evento de origem porta o número 0, os eventos que se encadeam portam os número sucessivos a partir de 1).</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>RETORG</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Chave do objecto no qual foi desencadeado o workflow de origem.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>CONTXT</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Referência de îcone de devolução.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>CLEOBJ</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Número do crono assinados</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>CTX(1..15)</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Variáveis do contexto.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>S_USER</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Destinatário tendo desencadeado o workflow de origem.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>S_CLEOBJ</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Chave de desencadeamento (objecto ou reagrupamento)</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>S_ABREV</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Abreviação do objecto do workflow de origem.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>S_NBRUSR</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Número de utilizadores definidos na regra de workflow de origem.</p>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <div class="stdBloc"><a id="MIS_50_10"></a>
                                                            <h2 class="g1" id="Algoritmodetratamentodeumaassinatura" data-magellan-target="Algoritmodetratamentodeumaassinatura">Algoritmo de tratamento de uma assinatura.</h2>
                                                            <p>A fase de assinatura de um evento se faz pelo processo seguinte:</p>
                                                            <ul>
                                                                <li><a href="#MIS_50_20">inicialização do contexto de assinatura</a>.</li>
                                                                <li>Verificação da existência do crono e fecho.</li>
                                                                <li>Avaliação (à vista das condições) da lista das respostas autorizados.</li>
                                                                <li>Registo de uma resposta por entre as respostas possíveis.</li>
                                                                <li>Fecho da ficha que gerou o primeiro seguimento.</li>
                                                                <li>Carregamento das classes de variáveis [F]</li>
                                                                <li>Actualização da variável RESULT em função da resposta</li>
                                                                <li>Modificação desta variável por registo (se a resposta é modificável)</li>
                                                            </ul>
                                                            <p>Em seguida, a transacção de assinatura propriamente dita está feito :</p>
                                                            <ul>
                                                                <li>Execução das acções de assinatura se existirem</li>
                                                                <li>Actualização do campo corresponde à resposta (se elas existem)</li>
                                                                <li>Tratamento da regra de workflow associado à assinatura (se existe uma)</li>
                                                                <li>Actualização da linha de seguimento (flag assinada, signatário correspondente).</li>
                                                            </ul><a id="MIS_50_20"></a>
                                                            <h3 class="g1">inicialização do contexto de assinatura.</h3>
                                                            <p>Quando um utilizador assina um seguimento, as variáveis no contexto no contexto são os seguintes:</p>
                                                            <p />
                                                            <table width="100%" border="2">
                                                                <tbody>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>CRONO</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>crono do evento sobre o qual se vai fazer uma assinatura.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>USRDES</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>código utilizador do destinatário.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>USRSIG</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>código utilizador do signatário</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>USRMAIL</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>endereço de mensagem do signatário, quando a assinatura se faz por uma ligação http externa.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>NUMORG</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Crono evento de origem sobre a qual foi feita a primerira signatura.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>USRORG</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Destinatário deste evento.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>LEVSIG</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Nível de assinatura (o evento de origem porta o número 0, os eventos que se encadeam portam os número sucessivos a partir de 1).</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>USRTOP</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Destinatário principal (os outros são delegados).</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>NUMGRP</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Grupo de evento a assinar</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>CTX(1..15)</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Variáveis do contexto.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>S_USER</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Destinatário tendo desencadeado o workflow de origem.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>S_CLEOBJ</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Chave de desencadeamento (objecto ou reagrupamento)</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>S_ABREV</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Abreviação do objecto do workflow de origem.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>S_NBRUSR</p>
                                                                        </td>
                                                                        <td colspan="1" rowspan="1">
                                                                            <p>Número de utilizadores definidos na regra de workflow de origem.</p>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <p>O quadro de variáveis REPCHR permite de saber se outros destinatários do mesmo evento já foram assinados. Conta-se em facto o número de grupos (um grupo está igual a uma linha no quadro dos signatários, desde que um delegado foi assinado, o evento está assinado e não pode ser assinado uma segunda vez por um outro membro do mesmo grupo).</p>
                                                            <p>Tem-se então:</p>
                                                            <p>REPCHR(0) = número de respostas que resta a fazer : se por exemplo existem 4 linhas de signatários na descrição do evento e que um foi assinado, este valor é igual a 3.</p>
                                                            <p>REPCHR(NO), onde NO pode valer de 1 a 10, dá o número de signatários que responderam com a resposta colocada sobre a linha número NO no quadro das respostas.</p>
                                                            <p>Estas variáveis permitem nomeadamente de condicionar as etapas seguintes pelo facto que o último signatário em espera foi respondido, ou de trabalhar sobre as lógicas maioritárias de assinatura.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-mc-conditions="Other.Production only">
                                                <div id="feedback-survey">
                                                    <div class="feedback-question">
                                                        <h4>Did you find this helpful?</h4>
                                                        <p>
                                                            <button class="feedback-button feedback-yes" title="Yes, this article was helpful." alt="Yes, this article was helpful.">Yes</button>&#160;<button class="feedback-button feedback-no" title="No, this article wasn't helpful." alt="No, this article wasn't helpful.">No</button></p>
                                                    </div>
                                                    <div class="feedback-reason no">
                                                        <hr />
                                                        <div class="highlightBox">
                                                            <h4>Sorry about that</h4>
                                                            <p>Why wasn't this helpful? (check all that apply)</p>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option1" value="Couldn't find what I was looking for" data-analytics-label="Could not find" />
                                                                <label for="option1">Couldn't find what I was looking for</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option2" value="Instructions confusing or unclear" data-analytics-label="Confusing or unclear" />
                                                                <label for="option2">Instructions confusing or unclear</label>
                                                            </div>
                                                            <div class="feedback-option">
                                                                <input type="checkbox" class="option no" id="option3" value="Instructions didn't work" data-analytics-label="Did not work" />
                                                                <label for="option3">Instructions didn't work</label>
                                                            </div>
                                                            <div class="feedback-reason no-thanks">
                                                                <p><b>Thanks for your feedback.</b>
                                                                </p>
                                                                <h4>Want to tell us more?</h4>
                                                                <p>Send an email to our authors to leave your feedback.</p>
                                                                <!--email_off-->
                                                                <p><a href="mailto:Sage200TechnicalAuthors@sage.com?subject=Sage 200 feedback" id="feedbackEmailLink" title="Tell us if there's a problem with the information on this page." alt="Tell us if there's a problem with the information on this page." class="sageButton">Email our authors</a>
                                                                </p>
                                                                <!--/email_off-->
                                                                <p>Sorry, but we can't provide technical support from this email address. If you need assistance, then please contact our support team directly.</p>
                                                            </div>
                                                        </div>
                                                        <div id="get-in-touch" class="highlightBox colour-dark-1">
                                                            <h4>Need support?</h4>
                                                            <p>You can contact our support team on <b>0845 111 5555</b>, 9am-5pm Monday-Friday.</p>
                                                        </div>
                                                    </div>
                                                    <div class="feedback-reason yes-thanks">
                                                        <hr />
                                                        <h4>Great!</h4>
                                                        <p>Thanks for taking the time to give us some feedback.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="sage-layout-topic-panel">
                                            <div class="menu-topic-container" id="menu-on-page">
                                                <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 1280px)" class="nocontent menu _Skins_Sage_Menu_Topic_TopNav mc-component">
                                                    <li><a href="#Anexot%C3%A9cnicoworkflow">Anexo técnico workflow</a>
                                                    </li>
                                                    <ul>
                                                        <li><a href="#Algoritmoprincipalworkflowobjecto">Algoritmo principal workflow objecto</a>
                                                        </li>
                                                        <li><a href="#Algoritmoprincipalworkflowassinatura">Algoritmo principal workflow assinatura</a>
                                                        </li>
                                                        <li><a href="#Algoritmodetratamentodeumaassinatura">Algoritmo de tratamento de uma assinatura.</a>
                                                        </li>
                                                    </ul>
                                                </ul>
                                            </div>
                                        </div>
                                    </section>
                                    <button class="go-to-top">
                                        <!-- icon and label are inserted -->
                                    </button>
                                    <section class="sage-footer colour-dark-1" id="footer" role="contentinfo">
                                        <div class="row">
                                            <div class="small-6 medium-3 columns">
                                                <h5>Site links</h5>
                                                <p><a href="../Sitemap.htm" class="MCXref xref">Sitemap</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage links</h5>
                                                <p><a href="https://my.sage.co.uk/public/help.aspx" target="_blank" class="external">Sage Support Hub</a>
                                                </p>
                                                <p><a href="https://communities.sage.co.uk/product_support_community/" class="external" target="_blank" title="Your place to get product support from other customers and Sage experts" alt="Your place to get product support from other customers and Sage experts">Product support community</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/gdpr/" class="external" target="_blank">General Data Protection Regulation</a>
                                                </p>
                                                <p><a href="https://www.sage.com/en-gb/legal/" class="external" target="_blank">Legal information</a>
                                                </p>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Page info</h5>
                                                <p>Page updated: <span class="mc-variable Dates.DateFileSaved variable">23 janeiro 2024</span></p>
                                                <!-- script moves last published date to here -->
                                                <div id="last-published-footer">
                                                </div>
                                            </div>
                                            <div class="small-6 medium-3 columns">
                                                <h5>Sage media</h5>
                                                <p><a href="https://www.facebook.com/sageuk" target="_blank" alt="Find us on Facebook" title="Find us on Facebook"><i class="fa fa-lg fa-facebook" aria-hidden="true"></i></a>&#160;
						<a href="https://www.linkedin.com/company/sage-software" target="_blank" alt="Find us on LinkedIn" title="Find us on LinkedIn"><i class="fa fa-lg fa-linkedin" aria-hidden="true"></i></a>&#160;
						<a href="https://twitter.com/sageuk/" target="_blank" alt="Find us on Twitter" title="Find us on Twitter"><i class="fa fa-lg fa-twitter" aria-hidden="true"></i></a>&#160;
						<a href="https://www.youtube.com/user/SageUKOfficial" target="_blank" alt="Find us on YouTube" title="Find us on YouTube"><i class="fa fa-lg fa-youtube" aria-hidden="true"></i></a></p>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- Skin type scripts -->
                                    <script type="text/javascript" src="../Resources/Scripts/SideNav-template.js" data-mc-conditions="Other.HTML5-SideNav">
                                    </script>
                                    <!-- Google Analytics -->
                                    <div data-mc-conditions="Other.Production only">
                                        <!-- Google analytics script -->
                                        <!-- Copy and paste full HTML of tracking code here for Global site tag (gtag.js) -->
                                        <!-- Remember to edit 'async' parameter to read async="" -->
                                        <!-- Analytics for events -->
                                        <script type="text/javascript" src="../Resources/Scripts/google-analytics-events.js">
                                        </script>
                                    </div>
                                    <!-- cookies -->
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.js">
                                    </script>
                                    <script src="../Resources/Scripts/jquery.cookiesdirective.sage.config.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>